<!DOCTYPE html>

<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport"
        content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
    <title>大屏数据可视化 - 模板</title>
    <link rel="stylesheet" href="css/app.css" />
    <link rel="stylesheet" href="css/mine.css" />

    <!-- JQuery -->
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <!-- 弹出窗口 -->
    <link rel="stylesheet" href="css/hover_window_2.css" />
    <link rel="stylesheet" href="css/hover_window.css" />
    <script type="text/javascript" src="js/hover_window_2.js"></script>

    <!-- echarts -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
    <script type="text/javascript" src="js/color.js"></script>

    <!-- semantic UI -->
    <link href="https://cdn.bootcdn.net/ajax/libs/semantic-ui/2.4.1/components/icon.css" rel="stylesheet">
    <link href="https://cdn.bootcdn.net/ajax/libs/semantic-ui/2.4.1/components/button.css" rel="stylesheet">
    <link href="https://cdn.bootcdn.net/ajax/libs/semantic-ui/2.4.1/components/table.css" rel="stylesheet">

    <!-- bootstrap -->
    <script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>

    <!-- <script src="json/data.json"></script> -->
    <script type="text/javascript" src="js/global_config.js"></script></head>

</head>

<body>
    <div class="header">
        <h1 class="header-title" style="font-size:40px">上海市质量状况可视化展图</h1>
    </div>
    <div class="wrapper">
        <div class="content">
            <div class="col col-l">
                <div class="xpanel-wrapper xpanel-wrapper-50">
                    <div class="xpanel xpanel-l-t">
                        <div class="title">2014-2017上海质量热线举报中计量类分类</div>
                        <div id="container_11_1" style="height: 90%"></div>
                    </div>
                </div>
                <div class="xpanel-wrapper xpanel-wrapper-55">
                    <div class="xpanel xpanel-l-b">
                        <div class="title">2013-2017上海质量热线举报信息分类</div>
                        <div id="container_11_2" style="height: 90%"></div>
                    </div>
                </div>
            </div>
            <div class="col col-c">
                <div class="xpanel-wrapper xpanel-wrapper-50">
                    <div class="xpanel xpanel-c-t">
                        <div class="title">2012-2017年吊销营业执照数量</div>
                        <div id="container_11_6" style="height: 90%"> </div>
                    </div>
                </div>
                <div class="xpanel-wrapper xpanel-wrapper-55">
                    <div class="xpanel xpanel-c-b">
                        <div class="title">2013-2017上海质量违法案件查处分类</div>
                        <div id="container_11_4" style="height: 90%"></div>
                    </div>
                </div>
            </div>
            <div class="col col-r">
                <div class="xpanel-wrapper xpanel-wrapper-50">
                    <div class="xpanel xpanel-r-t">
                        <div class="title">2012-2017上海市“三品”认证变化率趋势</div>
                        <div id="container_11_5" style="height: 90%"></div>
                    </div>
                </div>
                <div class="xpanel-wrapper xpanel-wrapper-55">
                    <div class="xpanel xpanel-r-b">
                        <div class="title">2013-2017上海质量申诉总体情况</div>
                        <div id="container_11_3" style="height: 90%"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="popLayer"></div>
    <div id="popBox_11_1" class="popBox">
        <!-- <div class="close">
				<a href="javascript:void(0)" onclick="closeBoxSuffix('_11_1')">关闭</a>
			</div> -->
        <div class="content" style="overflow: scroll; max-height: 80%;">
            <table id="table_11_1" class="ui definition table">
                <thead>
                    <tr>
                        <th></th>
                        <th>Arguments</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>reset rating</td>
                        <td>
                            <div class="ui input">
                                <input type="text" placeholder="搜索...">
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>set rating</td>
                        <td>
                            <div class="ui input">
                                <input type="text" placeholder="搜索...">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="dlg_bottom">
            <button class="ui primary button" onclick="alert('submit success!')">
                保存
            </button>
            <button class="ui button" onclick="closeBoxSuffix('_11_1')">
                关闭
            </button>
            <button class="ui button" onclick="addTableRow('_11_1')">
                添加一行
            </button>
        </div>

    </div>
    <script>
			// initHoverWindowBySuffix('_11_1', submitHandler, function(){hideDialogID('_11_1')});
    </script>
</body>

</html>


<!--解决本地json跨域问题-->
<script>
    var alldata = {};

    function demo(res) {
        alldata = res;
    }
</script>
<script src="data/data2.json?callback=demo"></script>

<!--全局页面字体配置 -->
<!--script>
    var fontSize_all_legend = 18
    var fontSize_axis_label = 14
</script-->



<!--配置页面 11-1 的Echart图-->
<!-- <script>
    var dom_11_1 = document.getElementById("container_11_1");
    var myChart_11_1 = echarts.init(dom_11_1, 'chalk');

    var data_11_1 = alldata["2014-2017上海质量热线举报中计量类分类（按件数）"]

    var xAxis_11_1 = []
    var yAxis_11_1a = []
    var yAxis_11_1b = []
    var yAxis_11_1c = []
    var yAxis_11_1d = []

    for (var i = 1; i < data_11_1.length; ++i) {
        xAxis_11_1.push(data_11_1[i][0])
        yAxis_11_1a.push(data_11_1[i][1])
        yAxis_11_1b.push(data_11_1[i][2])
        yAxis_11_1c.push(data_11_1[i][3])
        yAxis_11_1d.push(data_11_1[i][4])
    }


    var option_11_1 = {
        textStyle: {
            fontSize: fontSize_all_legend,
        },
        tooltip: {
            trigger: 'axis'
        },
        legend: {
            data: ['电子秤计量不准', '加油机计量不准', '民用三表', '其他'],
            textStyle: {
                color: '#F0F8FF'
            }
        },
        toolbox: {
            show: true,
            orient: 'vertical',
            left: 'right',
            top: 'center',
            feature: {
                dataView: { show: true, readOnly: false },
                magicType: { show: true, type: ['line', 'bar'] },
                restore: { show: true },
                saveAsImage: { show: true }
            }
        },
        calculable: true,
        xAxis: [
            {
                type: 'category',
                data: xAxis_11_1,
                axisLabel: {
                    fontSize: fontSize_axis_label
                }
            }
        ],
        yAxis: [
            {
                type: 'value',
                name: '数量（件）',
                axisLabel: {
                    fontSize: fontSize_axis_label
                }
            }
        ],
        series: [
            {
                name: '电子秤计量不准',
                type: 'line',
                data: yAxis_11_1a,
            },
            {
                name: '加油机计量不准',
                type: 'line',
                data: yAxis_11_1b,
            },
            {
                name: '民用三表',
                type: 'line',
                data: yAxis_11_1c,
            },
            {
                name: '其他',
                type: 'line',
                data: yAxis_11_1d,
            }
        ]
    };



    if (option_11_1 && typeof option_11_1 === 'object') {
        myChart_11_1.setOption(option_11_1);
        console.log(data_11_1)
    }

</script> -->
<script>
    var ori_data_11_1 = {};

    function callback_3_11_1(res){
        ori_data_11_1 = res;
		console.log('3_11_1.json读取成功')
		console.log(ori_data_11_1);
    }
</script>
<script src="data/3_11_1.json?callback=callback_3_11_1"></script>

<script>

	var dom_11_1 = document.getElementById("container_11_1");
	var myChart_11_1 = echarts.init(dom_11_1, 'chalk');
	var app_11_1 = {};

	function view_3_11_1_change(){
		console.log("3_11_1 change")
		// Document.getElementById('view_2_11_1').innerHTML
		console.log(document.getElementById('view_3_11_1').value)
		document.getElementById('view_3_11_1').innerHTML = document.getElementById('view_3_11_1').value
	}

	//折线图
	var option_3_11_1 = {
        textStyle: {
            fontSize: fontSize_all_legend,
        },
        tooltip: {
			trigger: 'axis',
			axisPointer: {            // 坐标轴指示器，坐标轴触发有效
				type: 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
			}
		},
		toolbox: {
			show: true,
			itemSize: echart_toolbox_size, 
            orient: 'vertical',
			feature: {
				dataView: {
					show: true, 
					readOnly: false,
					optionToContent: function(opt) {
						// console.log(opt)
						var axisData = opt['xAxis'][0]['data'];
						var series = opt['series'];
						console.log("start show")
						// console.log(axisData)
						// console.log(series)
						var table = '<textarea id="view_3_11_1" onchange="view_3_11_1_change()" style="width: 100%; height: 100%; font-family: monospace; font-size: 14px; line-height: 1.6rem; color: rgb(0, 0, 0); border-color: rgb(51, 51, 51); background-color: rgb(255, 255, 255);">\n';
						// table += option_11_1_9['series'][0]['name'];
						// table += '\n';
						table += "年份"
						for(var i = 0; i < option_3_11_1['legend']['data'].length; ++i){
							table += (','+option_3_11_1['legend']['data'][i]);
						}
						table += '\n';

						for (var i = 0, l = axisData.length; i < l; i++) {
							table += axisData[i];
							for(var j = 0; j < series.length; ++j){
								// if(series[j].data[i] == undefined){
								// 	table += (',null'+series[j].data[i]);

								// }
								table += (','+series[j].data[i]);
							}
							table += '\n';
						}
						table += '</textarea>'
						// table += '</tbody></table></div>';
						// console.log(table)
						return table;
						// return option_2_11_1['xAxis']['data']
					},
					contentToOption:function(HTMLDomElement, opt){
						console.log("start save 11_1")

						var plain_tex = HTMLDomElement.firstChild.innerHTML;
						var arr_tex = plain_tex.split('\n')

						var legend_11_1 = arr_tex[0].split(',').slice(1);
						var valid_num = legend_11_1.length;

						var X_11_1 = [];
						var Y_11_1 = [];

						while(Y_11_1.length < valid_num){
							Y_11_1.push([])
						}

						for(var i = 1; i < arr_tex.length; ++i){
							cur_pair = arr_tex[i].split(',');
							// if(cur_pair.length != valid_num){
							// 	// console.alert('wrong data')
							// 	continue
							// }
							// if(cur_pair[0] == '' || cur_pair[0] == undefined){
							// 	continue
							// }
							
							if(cur_pair.length < valid_num+1 || cur_pair[0].length == 0){
								continue;
							}

							X_11_1.push(cur_pair[0]);

							for(var j = 1,k = 0; j < cur_pair.length && k < Y_11_1.length; ++j, ++k){
								Y_11_1[k].push(cur_pair[j]);
							}
							// Y_9_1.push(cur_pair[1]);
						}

						option_3_11_1['legend']['data'] = legend_11_1;
						option_3_11_1['xAxis'][0]['data'] = X_11_1;

						option_3_11_1['series'] = [];

						for(var i = 0; i < Y_11_1.length; ++i){
							option_3_11_1['series'].push({
								name: legend_11_1[i],
								type: "line",//折线图
								// stack: "抽查情况",
								data: Y_11_1[i],
							})
						}
						
						myChart_11_1.setOption(option_3_11_1);

						var Link = document.createElement('a');
						Link.download = "3_11_1.json";
						Link.style.display = 'none';
						// 字符内容转变成blob地址
						var blob = new Blob(['callback_3_11_1('+JSON.stringify(option_3_11_1)+')']);
						Link.href = URL.createObjectURL(blob);
						// 触发点击 	
						document.body.appendChild(Link);
						Link.click();
						// 然后移除
						document.body.removeChild(Link);
						return opt
					},
				},
				magicType: {show: true, type: ['line','bar','stack','tiled']},
				// restore: {show: true},
				saveAsImage: {show: true}
			}
		},
		legend: {
			data: ['电子秤计量不准', '加油机计量不准', '民用三表', '其他'],
			textStyle: { //图例文字的样式
				color: color_legend,
				fontSize: fontSize_all_legend
			},
		},
		grid: {
			left: '3%',
			right: '4%',
			bottom: '3%',
			containLabel: true
		},
		xAxis: [
			{
				type: 'category',
				data: ['周一', '周二', '周三', '周四', '周五', '周六', '周日'],
                boundaryGap: false,
                axisLabel:{
				textStyle: { //图例文字的样式
					color: color_axis,
					fontSize: fontSize_axis_label
				},
			}
			}
		],
		yAxis: [
			{
				type: 'value',
				name: '数量（件）',
				axisLabel:{
					textStyle: { //图例文字的样式
						color: color_axis,
						fontSize: fontSize_axis_label
					},
				}
				// max: 365,
			}
		],
		series: [
			{
				name: '电子秤计量不准',
				type: 'line',
				// stack: '抽查情况',
				data: [120, 132, 101, 134, 90, 230, 210]
			},
			{
				name: '加油机计量不准',
				type: 'line',
				// stack: '抽查情况',
				data: [220, 182, 191, 234, 290, 330, 310]
			},
			{
				name: '民用三表',
				type: 'line',
				// stack: '抽查情况',
				data: [120, 132, 101, 134, 90, 230, 210]
			},
			{
				name: '其他',
				type: 'line',
				// stack: '抽查情况',
				data: [220, 182, 191, 234, 290, 330, 310]
			}
		]
	};


	option_3_11_1['series'] = ori_data_11_1['series'];
	option_3_11_1['legend']['data'] = ori_data_11_1['legend']['data'];
	option_3_11_1['xAxis'][0]['data'] = ori_data_11_1['xAxis'][0]['data'];

	myChart_11_1.setOption(option_3_11_1, true);

</script>

<!--配置页面 11-2 的表格-->
<!-- <script>
    var dom_11_2 = document.getElementById("container_11_2");
    var myChart_11_2 = echarts.init(dom_11_2, 'chalk');

    var data_11_2 = alldata[" 2013-2017上海质量热线举报信息分类（件）"]

    var xAxis_11_2 = []
    var yAxis_11_2a = []
    var yAxis_11_2b = []
    var yAxis_11_2c = []
    var yAxis_11_2d = []
    var yAxis_11_2e = []
    var yAxis_11_2f = []
    var yAxis_11_2g = []
    var yAxis_11_2h = []
    var yAxis_11_2i = []
    var yAxis_11_2j = []

    for (var i = 1; i < data_11_2.length; ++i) {
        xAxis_11_2.push(data_11_2[i][0])
        yAxis_11_2a.push(data_11_2[i][1])
        yAxis_11_2b.push(data_11_2[i][2])
        yAxis_11_2c.push(data_11_2[i][3])
        yAxis_11_2d.push(data_11_2[i][4])
        yAxis_11_2e.push(data_11_2[i][5])
        yAxis_11_2f.push(data_11_2[i][6])
        yAxis_11_2g.push(data_11_2[i][7])
        yAxis_11_2h.push(data_11_2[i][8])
        yAxis_11_2i.push(data_11_2[i][9])
        yAxis_11_2j.push(data_11_2[i][10])
    }


    var option_11_2 = {
        textStyle: {
            fontSize: fontSize_all_legend,
        },
        tooltip: {
            trigger: 'axis',
            axisPointer: {
                type: 'cross',
                label: {
                    backgroundColor: '#6a7985'
                }
            }
        },
        legend: {
            data: ["特种设备类","轻工产品类","机电类","计量类","办公通讯类","家电类","食品相关类","建材产品类","能源类","其他"],
            textStyle: {
                color: '#F0F8FF'
            }
        },
        toolbox: {
            show: true,
            orient: 'vertical',
            left: 'right',
            top: 'center',
            feature: {
                dataView: { show: true, readOnly: false },
                magicType: { show: true, type: ['line', 'bar'] },
                restore: { show: true },
                saveAsImage: { show: true }
            }
        },
        grid: {
            left: '3%',
            right: '4%',
            bottom: '3%',
            containLabel: true
        }, xAxis: [
            {
                type: 'category',
                boundaryGap: false,

                data: xAxis_11_2,
                axisLabel: {
                    fontSize: fontSize_axis_label
                }
            }
        ],
        yAxis: [
            {
                type: 'value',
                axisLabel: {
                    fontSize: fontSize_axis_label
                }
            }
        ],
        series: [
            {
                name: '特种设备类',
                type: 'line',
                stack: '总量',
                areaStyle: {},
                data: yAxis_11_2a
            },
            {
                name: '轻工产品类',
                type: 'line',
                stack: '总量',
                areaStyle: {},
                data: yAxis_11_2b
            },
            {
                name: '机电类',
                type: 'line',
                stack: '总量',
                areaStyle: {},
                data: yAxis_11_2c
            },
            {
                name: '计量类',
                type: 'line',
                stack: '总量',
                areaStyle: {},
                data: yAxis_11_2d
            },
            {
                name: '办公通讯类',
                type: 'line',
                stack: '总量',
                areaStyle: {},
                data: yAxis_11_2e
            },
            {
                name: '家电类',
                type: 'line',
                stack: '总量',
                areaStyle: {},
                data: yAxis_11_2f
            },
            {
                name: '食品相关类',
                type: 'line',
                stack: '总量',
                areaStyle: {},
                data: yAxis_11_2g
            },
            {
                name: '建材产品类',
                type: 'line',
                stack: '总量',
                areaStyle: {},
                data: yAxis_11_2h
            },
            {
                name: '能源类',
                type: 'line',
                stack: '总量',
                areaStyle: {},
                data: yAxis_11_2i
            },
            {
                name: '其他',
                type: 'line',
                stack: '总量',
                areaStyle: {},
                data: yAxis_11_2j
            },
        ]
    };



    if (option_11_2 && typeof option_11_2 === 'object') {
        myChart_11_2.setOption(option_11_2);
        console.log(data_11_2)
    }

</script> -->

<script>
    var ori_data_11_2 = {};

    function callback_3_11_2(res){
        ori_data_11_2 = res;
		console.log('3_11_2.json读取成功')
		console.log(ori_data_11_2);
    }
</script>
<script src="data/3_11_2.json?callback=callback_3_11_2"></script>

<script>

	var dom_11_2 = document.getElementById("container_11_2");
	var myChart_11_2 = echarts.init(dom_11_2, 'chalk');
	var app_11_2 = {};

	function view_3_11_2_change(){
		console.log("3_11_2 change")
		// Document.getElementById('view_2_11_2').innerHTML
		console.log(document.getElementById('view_3_11_2').value)
		document.getElementById('view_3_11_2').innerHTML = document.getElementById('view_3_11_2').value
	}

	//折线图
	var option_3_11_2 = {
        textStyle: {
            fontSize: fontSize_all_legend,
        },
        tooltip: {
			trigger: 'axis',
			axisPointer: {            // 坐标轴指示器，坐标轴触发有效
				type: 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
			}
		},
		toolbox: {
			show: true,
			itemSize: echart_toolbox_size, 
            orient: 'vertical',
			feature: {
				dataView: {
					show: true, 
					readOnly: false,
					optionToContent: function(opt) {
						// console.log(opt)
						var axisData = opt['xAxis'][0]['data'];
						var series = opt['series'];
						console.log("start show")
						// console.log(axisData)
						// console.log(series)
						var table = '<textarea id="view_3_11_2" onchange="view_3_11_2_change()" style="width: 100%; height: 100%; font-family: monospace; font-size: 14px; line-height: 1.6rem; color: rgb(0, 0, 0); border-color: rgb(51, 51, 51); background-color: rgb(255, 255, 255);">\n';
						// table += option_11_2_9['series'][0]['name'];
						// table += '\n';
						table += "年份"
						for(var i = 0; i < option_3_11_2['legend']['data'].length; ++i){
							table += (','+option_3_11_2['legend']['data'][i]);
						}
						table += '\n';

						for (var i = 0, l = axisData.length; i < l; i++) {
							table += axisData[i];
							for(var j = 0; j < series.length; ++j){
								// if(series[j].data[i] == undefined){
								// 	table += (',null'+series[j].data[i]);

								// }
								table += (','+series[j].data[i]);
							}
							table += '\n';
						}
						table += '</textarea>'
						// table += '</tbody></table></div>';
						// console.log(table)
						return table;
						// return option_2_11_2['xAxis']['data']
					},
					contentToOption:function(HTMLDomElement, opt){
						console.log("start save 11_2")

						var plain_tex = HTMLDomElement.firstChild.innerHTML;
						var arr_tex = plain_tex.split('\n')

						var legend_11_2 = arr_tex[0].split(',').slice(1);
						var valid_num = legend_11_2.length;

						var X_11_2 = [];
						var Y_11_2 = [];

						while(Y_11_2.length < valid_num){
							Y_11_2.push([])
						}

						for(var i = 1; i < arr_tex.length; ++i){
							cur_pair = arr_tex[i].split(',');
							// if(cur_pair.length != valid_num){
							// 	// console.alert('wrong data')
							// 	continue
							// }
							// if(cur_pair[0] == '' || cur_pair[0] == undefined){
							// 	continue
							// }
							
							if(cur_pair.length < valid_num+1 || cur_pair[0].length == 0){
								continue;
							}

							X_11_2.push(cur_pair[0]);

							for(var j = 1,k = 0; j < cur_pair.length && k < Y_11_2.length; ++j, ++k){
								Y_11_2[k].push(cur_pair[j]);
							}
							// Y_9_1.push(cur_pair[1]);
						}

						option_3_11_2['legend']['data'] = legend_11_2;
						option_3_11_2['xAxis'][0]['data'] = X_11_2;

						option_3_11_2['series'] = [];

						for(var i = 0; i < Y_11_2.length; ++i){
							option_3_11_2['series'].push({
								name: legend_11_2[i],
								type: "line",//折线图
                                areaStyle: {},//阴影情况
                                stack: '总量',
								data: Y_11_2[i],
							})
						}
						
						myChart_11_2.setOption(option_3_11_2);

						var Link = document.createElement('a');
						Link.download = "3_11_2.json";
						Link.style.display = 'none';
						// 字符内容转变成blob地址
						var blob = new Blob(['callback_3_11_2('+JSON.stringify(option_3_11_2)+')']);
						Link.href = URL.createObjectURL(blob);
						// 触发点击 	
						document.body.appendChild(Link);
						Link.click();
						// 然后移除
						document.body.removeChild(Link);
						return opt
					},
				},
				magicType: {show: true, type: ['line','bar','stack','tiled']},
				// restore: {show: true},
				saveAsImage: {show: true}
			}
		},
		legend: {
			data: ["特种设备类","轻工产品类","机电类","计量类","办公通讯类","家电类","食品相关类","建材产品类","能源类","其他"],
			textStyle: { //图例文字的样式
				color: color_legend,
				fontSize: fontSize_all_legend
			},
		},
		grid: {
			left: '3%',
			right: '4%',
			bottom: '3%',
			containLabel: true
		},
		xAxis: [
			{
				type: 'category',
				data: ['周一', '周二', '周三', '周四', '周五', '周六', '周日'],
                boundaryGap: false,
                axisLabel:{
				textStyle: { //图例文字的样式
					color: color_axis,
					fontSize: fontSize_axis_label
				},
			}
			}
		],
		yAxis: [
			{
				type: 'value',
				axisLabel:{
					textStyle: { //图例文字的样式
						color: color_axis,
						fontSize: fontSize_axis_label
					},
				}
				// max: 365,
			}
		],
		series: [
			{
                name: '特种设备类',
                type: 'line',
                stack: '总量',
                areaStyle: {},
				// stack: '抽查情况',
				data: [120, 132, 101, 134, 90, 230, 210]
			},
			{
                name: '轻工产品类',
                type: 'line',
                stack: '总量',
                areaStyle: {},
				// stack: '抽查情况',
				data: [220, 182, 191, 234, 290, 330, 310]
			},
			{
                name: '机电类',
                type: 'line',
                stack: '总量',
                areaStyle: {},
				// stack: '抽查情况',
				data: [120, 132, 101, 134, 90, 230, 210]
			},
			{
                name: '计量类',
                type: 'line',
                stack: '总量',
                areaStyle: {},
				// stack: '抽查情况',
				data: [220, 182, 191, 234, 290, 330, 310]
			},
			{
				name: '英国',
				type: 'line',
				// stack: '抽查情况',
				data: [220, 182, 191, 234, 290, 330, 310]
			},
			{
                name: '办公通讯类',
                type: 'line',
                stack: '总量',
                areaStyle: {},
				// stack: '抽查情况',
				data: [220, 182, 191, 234, 290, 330, 310]
			},
			{
                name: '家电类',
                type: 'line',
                stack: '总量',
                areaStyle: {},
				// stack: '抽查情况',
				data: [220, 182, 191, 234, 290, 330, 310]
			},
			{
                name: '食品相关类',
                type: 'line',
                stack: '总量',
                areaStyle: {},
				// stack: '抽查情况',
				data: [220, 182, 191, 234, 290, 330, 310]
			},
            {
                name: '建材产品类',
                type: 'line',
                stack: '总量',
                areaStyle: {},
				// stack: '抽查情况',
				data: [220, 182, 191, 234, 290, 330, 310]
			},
            {
                name: '能源类',
                type: 'line',
                stack: '总量',
                areaStyle: {},
				// stack: '抽查情况',
				data: [220, 182, 191, 234, 290, 330, 310]
			},
            {
                name: '其他',
                type: 'line',
                stack: '总量',
                areaStyle: {},
				// stack: '抽查情况',
				data: [220, 182, 191, 234, 290, 330, 310]
			}

		]
	};


	option_3_11_2['series'] = ori_data_11_2['series'];
	option_3_11_2['legend']['data'] = ori_data_11_2['legend']['data'];
	option_3_11_2['xAxis'][0]['data'] = ori_data_11_2['xAxis'][0]['data'];

	myChart_11_2.setOption(option_3_11_2, true);

</script>

<!--配置页面 11-3 的Echart图-->
<!-- <script>
    var dom_11_3 = document.getElementById("container_11_3");
    var myChart_11_3 = echarts.init(dom_11_3, 'chalk');

    var data_11_3 = alldata["013-2017上海质量申诉总体情况（按件数）"]

    var xAxis_11_3 = []
    var yAxis_11_3a = []
    var yAxis_11_3b = []
    var yAxis_11_3c = []
    var yAxis_11_3d = []
    var yAxis_11_3e = []
    var yAxis_11_3f = []
    var yAxis_11_3g = []
    var yAxis_11_3h = []

    for (var i = 1; i < data_11_3[0].length; ++i) {
        xAxis_11_3.push(data_11_3[0][i])
        yAxis_11_3a.push(data_11_3[1][i])
        yAxis_11_3b.push(data_11_3[2][i])
        yAxis_11_3c.push(data_11_3[3][i])
        yAxis_11_3d.push(data_11_3[4][i])
        yAxis_11_3e.push(data_11_3[5][i])
        yAxis_11_3f.push(data_11_3[6][i])
        yAxis_11_3g.push(data_11_3[7][i])
        yAxis_11_3h.push(data_11_3[8][i])
    }


    var option_11_3 = {
        textStyle: {
            fontSize: fontSize_all_legend,
        },
        tooltip: {
            trigger: 'axis',
            axisPointer: {
                type: 'cross',
                label: {
                    backgroundColor: '#6a7985'
                }
            }
        },
        legend: {
            data: ["机电产品类","轻工产品类","家电类","办公通讯类","建材产品类","食品相关类","农用产品类","其他"],
            textStyle: {
                color: '#F0F8FF'
            }
        },
        toolbox: {
            show: true,
            orient: 'vertical',
            left: 'right',
            top: 'center',
            feature: {
                dataView: { show: true, readOnly: false },
                magicType: { show: true, type: ['line', 'bar'] },
                restore: { show: true },
                saveAsImage: { show: true }
            }
        },
        grid: {
            left: '3%',
            right: '4%',
            bottom: '3%',
            containLabel: true
        }, 
        xAxis: [
            {
                type: 'category',
                boundaryGap: false,

                data: xAxis_11_3,
                axisLabel: {
                    fontSize: fontSize_axis_label
                }
            }
        ],
        yAxis: [
            {
                type: 'value',
                axisLabel: {
                    fontSize: fontSize_axis_label
                }
            }
        ],
        series: [
            {
                name: '机电产品类',
                type: 'line',
                stack: '总量',
                areaStyle: {},
                data: yAxis_11_3a
            },
            {
                name: '轻工产品类',
                type: 'line',
                stack: '总量',
                areaStyle: {},
                data: yAxis_11_3b
            },
            {
                name: '家电类',
                type: 'line',
                stack: '总量',
                areaStyle: {},
                data: yAxis_11_3c
            },
            {
                name: '办公通讯类',
                type: 'line',
                stack: '总量',
                areaStyle: {},
                data: yAxis_11_3d
            },
            {
                name: '建材产品类',
                type: 'line',
                stack: '总量',
                areaStyle: {},
                data: yAxis_11_3e
            },
            {
                name: '食品相关类',
                type: 'line',
                stack: '总量',
                areaStyle: {},
                data: yAxis_11_3f
            },
            {
                name: '农用产品类',
                type: 'line',
                stack: '总量',
                areaStyle: {},
                data: yAxis_11_3g
            },
            {
                name: '其他',
                type: 'line',
                stack: '总量',
                areaStyle: {},
                data: yAxis_11_3h
            },
        ]
    };



    if (option_11_3 && typeof option_11_3 === 'object') {
        myChart_11_3.setOption(option_11_3);
        console.log(data_11_3)
    }

</script> -->

<script>
    var ori_data_11_3 = {};

    function callback_3_11_3(res){
        ori_data_11_3 = res;
		console.log('3_11_3.json读取成功')
		console.log(ori_data_11_3);
    }
</script>
<script src="data/3_11_3.json?callback=callback_3_11_3"></script>

<script>

	var dom_11_3 = document.getElementById("container_11_3");
	var myChart_11_3 = echarts.init(dom_11_3, 'chalk');
	var app_11_3 = {};

	function view_3_11_3_change(){
		console.log("3_11_3 change")
		// Document.getElementById('view_2_11_3').innerHTML
		console.log(document.getElementById('view_3_11_3').value)
		document.getElementById('view_3_11_3').innerHTML = document.getElementById('view_3_11_3').value
	}

	//折线图
	var option_3_11_3 = {
        textStyle: {
            fontSize: fontSize_all_legend,
        },
        tooltip: {
			trigger: 'axis',
			axisPointer: {            // 坐标轴指示器，坐标轴触发有效
				type: 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
			}
		},
		toolbox: {
			show: true,
			itemSize: echart_toolbox_size, 
            orient: 'vertical',
			feature: {
				dataView: {
					show: true, 
					readOnly: false,
					optionToContent: function(opt) {
						// console.log(opt)
						var axisData = opt['xAxis'][0]['data'];
						var series = opt['series'];
						console.log("start show")
						// console.log(axisData)
						// console.log(series)
						var table = '<textarea id="view_3_11_3" onchange="view_3_11_3_change()" style="width: 100%; height: 100%; font-family: monospace; font-size: 14px; line-height: 1.6rem; color: rgb(0, 0, 0); border-color: rgb(51, 51, 51); background-color: rgb(255, 255, 255);">\n';
						// table += option_11_3_9['series'][0]['name'];
						// table += '\n';
						table += "年份"
						for(var i = 0; i < option_3_11_3['legend']['data'].length; ++i){
							table += (','+option_3_11_3['legend']['data'][i]);
						}
						table += '\n';

						for (var i = 0, l = axisData.length; i < l; i++) {
							table += axisData[i];
							for(var j = 0; j < series.length; ++j){
								// if(series[j].data[i] == undefined){
								// 	table += (',null'+series[j].data[i]);

								// }
								table += (','+series[j].data[i]);
							}
							table += '\n';
						}
						table += '</textarea>'
						// table += '</tbody></table></div>';
						// console.log(table)
						return table;
						// return option_2_11_3['xAxis']['data']
					},
					contentToOption:function(HTMLDomElement, opt){
						console.log("start save 11_3")

						var plain_tex = HTMLDomElement.firstChild.innerHTML;
						var arr_tex = plain_tex.split('\n')

						var legend_11_3 = arr_tex[0].split(',').slice(1);
						var valid_num = legend_11_3.length;

						var X_11_3 = [];
						var Y_11_3 = [];

						while(Y_11_3.length < valid_num){
							Y_11_3.push([])
						}

						for(var i = 1; i < arr_tex.length; ++i){
							cur_pair = arr_tex[i].split(',');
							// if(cur_pair.length != valid_num){
							// 	// console.alert('wrong data')
							// 	continue
							// }
							// if(cur_pair[0] == '' || cur_pair[0] == undefined){
							// 	continue
							// }
							
							if(cur_pair.length < valid_num+1 || cur_pair[0].length == 0){
								continue;
							}

							X_11_3.push(cur_pair[0]);

							for(var j = 1,k = 0; j < cur_pair.length && k < Y_11_3.length; ++j, ++k){
								Y_11_3[k].push(cur_pair[j]);
							}
							// Y_9_1.push(cur_pair[1]);
						}

						option_3_11_3['legend']['data'] = legend_11_3;
						option_3_11_3['xAxis'][0]['data'] = X_11_3;

						option_3_11_3['series'] = [];

						for(var i = 0; i < Y_11_3.length; ++i){
							option_3_11_3['series'].push({
								name: legend_11_3[i],
								type: "line",//折线图
                                areaStyle: {},//阴影情况
                                stack: "总量",
								data: Y_11_3[i],
							})
						}
						
						myChart_11_3.setOption(option_3_11_3);

						var Link = document.createElement('a');
						Link.download = "3_11_3.json";
						Link.style.display = 'none';
						// 字符内容转变成blob地址
						var blob = new Blob(['callback_3_11_3('+JSON.stringify(option_3_11_3)+')']);
						Link.href = URL.createObjectURL(blob);
						// 触发点击 	
						document.body.appendChild(Link);
						Link.click();
						// 然后移除
						document.body.removeChild(Link);
						return opt
					},
				},
				magicType: {show: true, type: ['line','bar','stack','tiled']},
				// restore: {show: true},
				saveAsImage: {show: true}
			}
		},
		legend: {
            data: ["机电产品类","轻工产品类","家电类","办公通讯类","建材产品类","食品相关类","农用产品类","其他"],
			textStyle: { //图例文字的样式
				color: color_legend,
				fontSize: fontSize_all_legend
			},
		},
		grid: {
			left: '3%',
			right: '4%',
			bottom: '3%',
			containLabel: true
		},
		xAxis: [
			{
				type: 'category',
				data: ['周一', '周二', '周三', '周四', '周五', '周六', '周日'],
                boundaryGap: false,
                axisLabel:{
				textStyle: { //图例文字的样式
					color: color_axis,
					fontSize: fontSize_axis_label
				},
			}
			}
		],
		yAxis: [
			{
				type: 'value',
				axisLabel:{
					textStyle: { //图例文字的样式
						color: color_axis,
						fontSize: fontSize_axis_label
					},
				}
				// max: 365,
			}
		],
		series: [
			{
                name: '机电产品类',
                type: 'line',
                stack: '总量',
                areaStyle: {},
				// stack: '抽查情况',
				data: [120, 132, 101, 134, 90, 230, 210]
			},
			{
                name: '轻工产品类',
                type: 'line',
                stack: '总量',
                areaStyle: {},
				// stack: '抽查情况',
				data: [220, 182, 191, 234, 290, 330, 310]
			},
            {
                name: '家电类',
                type: 'line',
                stack: '总量',
                areaStyle: {},
				// stack: '抽查情况',
				data: [220, 182, 191, 234, 290, 330, 310]
			},
            {
                name: '办公通讯类',
                type: 'line',
                stack: '总量',
                areaStyle: {},
				// stack: '抽查情况',
				data: [220, 182, 191, 234, 290, 330, 310]
			},
            {
                name: '建材产品类',
                type: 'line',
                stack: '总量',
                areaStyle: {},
				// stack: '抽查情况',
				data: [220, 182, 191, 234, 290, 330, 310]
			},
			{
                name: '食品相关类',
                type: 'line',
                stack: '总量',
                areaStyle: {},
				// stack: '抽查情况',
				data: [220, 182, 191, 234, 290, 330, 310]
			},
           
            {
                name: '农用产品类',
                type: 'line',
                stack: '总量',
                areaStyle: {},
				// stack: '抽查情况',
				data: [220, 182, 191, 234, 290, 330, 310]
			},
            {
                name: '其他',
                type: 'line',
                stack: '总量',
                areaStyle: {},
				// stack: '抽查情况',
				data: [220, 182, 191, 234, 290, 330, 310]
			}

		]
	};


	option_3_11_3['series'] = ori_data_11_3['series'];
	option_3_11_3['legend']['data'] = ori_data_11_3['legend']['data'];
	option_3_11_3['xAxis'][0]['data'] = ori_data_11_3['xAxis'][0]['data'];

	myChart_11_3.setOption(option_3_11_3, true);

</script>

<!--配置页面 11-4 的Echart图-->
<!-- <script>
    var dom_11_4 = document.getElementById("container_11_4");
    var myChart_11_4 = echarts.init(dom_11_4, 'chalk');

    var data_11_4 = alldata["2013-2017上海质量违法案件查处分类（件）（缺2017年"]


    var xAxis_11_4 = []
    var yAxis_11_4a = []
    var yAxis_11_4b = []
    var yAxis_11_4c = []
    var yAxis_11_4d = []
    var yAxis_11_4e = []
    var yAxis_11_4f = []
    var yAxis_11_4g = []
    var yAxis_11_4h = []
    var yAxis_11_4i = []

    for (var i = 1; i < data_11_4.length; ++i) {
        xAxis_11_4.push(data_11_4[i][0])
        yAxis_11_4a.push(data_11_4[i][1])
        yAxis_11_4b.push(data_11_4[i][2])
        yAxis_11_4c.push(data_11_4[i][3])
        yAxis_11_4d.push(data_11_4[i][4])
        yAxis_11_4e.push(data_11_4[i][5])
        yAxis_11_4f.push(data_11_4[i][6])
        yAxis_11_4g.push(data_11_4[i][7])
        yAxis_11_4h.push(data_11_4[i][8])
        yAxis_11_4i.push(data_11_4[i][9])
    }


    var option_11_4 = {
        textStyle: {
            fontSize: fontSize_all_legend,
        },
        tooltip: {
            trigger: 'axis',
            axisPointer: {
                type: 'cross',
                label: {
                    backgroundColor: '#6a7985'
                }
            }
        },
        legend: {
            data: ["产品质量违法行为","认证相关违法行为","标准违法行为","计量违法行为","特种设备违法行为","纤维违法行为","强制性产品认证违法行为","生产许可违法行为","其他违法行为"],
            textStyle: {
                color: '#F0F8FF'
            }
        },
        toolbox: {
            show: true,
            orient: 'vertical',
            left: 'right',
            top: 'center',
            feature: {
                dataView: { show: true, readOnly: false },
                magicType: { show: true, type: ['line', 'bar'] },
                restore: { show: true },
                saveAsImage: { show: true }
            }
        },
        grid: {
            left: '3%',
            right: '4%',
            bottom: '3%',
            containLabel: true
        }, xAxis: [
            {
                type: 'category',
                boundaryGap: false,

                data: xAxis_11_4,
                axisLabel: {
                    fontSize: fontSize_axis_label
                }
            }
        ],
        yAxis: [
            {
                type: 'value',
                axisLabel: {
                    fontSize: fontSize_axis_label
                }
            }
        ],
        series: [
            {
                name: '产品质量违法行为',
                type: 'line',
                stack: '总量',
                areaStyle: {},
                data: yAxis_11_4a
            },
            {
                name: '认证相关违法行为',
                type: 'line',
                stack: '总量',
                areaStyle: {},
                data: yAxis_11_4b
            },
            {
                name: '标准违法行为',
                type: 'line',
                stack: '总量',
                areaStyle: {},
                data: yAxis_11_4c
            },
            {
                name: '计量违法行为',
                type: 'line',
                stack: '总量',
                areaStyle: {},
                data: yAxis_11_4d
            },
            {
                name: '特种设备违法行为',
                type: 'line',
                stack: '总量',
                areaStyle: {},
                data: yAxis_11_4e
            },
            {
                name: '纤维违法行为',
                type: 'line',
                stack: '总量',
                areaStyle: {},
                data: yAxis_11_4f
            },
            {
                name: '强制性产品认证违法行为',
                type: 'line',
                stack: '总量',
                areaStyle: {},
                data: yAxis_11_4g
            },
            {
                name: '生产许可违法行为',
                type: 'line',
                stack: '总量',
                areaStyle: {},
                data: yAxis_11_4h
            },
            {
                name: '其他违法行为',
                type: 'line',
                stack: '总量',
                areaStyle: {},
                data: yAxis_11_4i
            },
        ]
    };



    if (option_11_4 && typeof option_11_4 === 'object') {
        myChart_11_4.setOption(option_11_4);
        console.log(data_11_4)
    }

</script> -->
<script>
    var ori_data_11_4 = {};

    function callback_3_11_4(res){
        ori_data_11_4 = res;
		console.log('3_11_4.json读取成功')
		console.log(ori_data_11_4);
    }
</script>
<script src="data/3_11_4.json?callback=callback_3_11_4"></script>

<script>

	var dom_11_4 = document.getElementById("container_11_4");
	var myChart_11_4 = echarts.init(dom_11_4, 'chalk');
	var app_11_4 = {};

	function view_3_11_4_change(){
		console.log("3_11_4 change")
		// Document.getElementById('view_2_11_4').innerHTML
		console.log(document.getElementById('view_3_11_4').value)
		document.getElementById('view_3_11_4').innerHTML = document.getElementById('view_3_11_4').value
	}

	//折线图
	var option_3_11_4 = {
        textStyle: {
            fontSize: fontSize_all_legend,
        },
        tooltip: {
			trigger: 'axis',
			axisPointer: {            // 坐标轴指示器，坐标轴触发有效
				type: 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
			}
		},
		toolbox: {
			show: true,
			itemSize: echart_toolbox_size, 
            orient: 'vertical',
			feature: {
				dataView: {
					show: true, 
					readOnly: false,
					optionToContent: function(opt) {
						// console.log(opt)
						var axisData = opt['xAxis'][0]['data'];
						var series = opt['series'];
						console.log("start show")
						// console.log(axisData)
						// console.log(series)
						var table = '<textarea id="view_3_11_4" onchange="view_3_11_4_change()" style="width: 100%; height: 100%; font-family: monospace; font-size: 14px; line-height: 1.6rem; color: rgb(0, 0, 0); border-color: rgb(51, 51, 51); background-color: rgb(255, 255, 255);">\n';
						// table += option_11_4_9['series'][0]['name'];
						// table += '\n';
						table += "年份"
						for(var i = 0; i < option_3_11_4['legend']['data'].length; ++i){
							table += (','+option_3_11_4['legend']['data'][i]);
						}
						table += '\n';

						for (var i = 0, l = axisData.length; i < l; i++) {
							table += axisData[i];
							for(var j = 0; j < series.length; ++j){
								// if(series[j].data[i] == undefined){
								// 	table += (',null'+series[j].data[i]);

								// }
								table += (','+series[j].data[i]);
							}
							table += '\n';
						}
						table += '</textarea>'
						// table += '</tbody></table></div>';
						// console.log(table)
						return table;
						// return option_2_11_4['xAxis']['data']
					},
					contentToOption:function(HTMLDomElement, opt){
						console.log("start save 11_4")

						var plain_tex = HTMLDomElement.firstChild.innerHTML;
						var arr_tex = plain_tex.split('\n')

						var legend_11_4 = arr_tex[0].split(',').slice(1);
						var valid_num = legend_11_4.length;

						var X_11_4 = [];
						var Y_11_4 = [];

						while(Y_11_4.length < valid_num){
							Y_11_4.push([])
						}

						for(var i = 1; i < arr_tex.length; ++i){
							cur_pair = arr_tex[i].split(',');
							// if(cur_pair.length != valid_num){
							// 	// console.alert('wrong data')
							// 	continue
							// }
							// if(cur_pair[0] == '' || cur_pair[0] == undefined){
							// 	continue
							// }
							
							if(cur_pair.length < valid_num+1 || cur_pair[0].length == 0){
								continue;
							}

							X_11_4.push(cur_pair[0]);

							for(var j = 1,k = 0; j < cur_pair.length && k < Y_11_4.length; ++j, ++k){
								Y_11_4[k].push(cur_pair[j]);
							}
							// Y_9_1.push(cur_pair[1]);
						}

						option_3_11_4['legend']['data'] = legend_11_4;
						option_3_11_4['xAxis'][0]['data'] = X_11_4;

						option_3_11_4['series'] = [];

						for(var i = 0; i < Y_11_4.length; ++i){
							option_3_11_4['series'].push({
								name: legend_11_4[i],
								type: "line",//折线图
                                areaStyle: {},//阴影情况
                                stack: "总量",
								data: Y_11_4[i],
							})
						}
						
						myChart_11_4.setOption(option_3_11_4);

						var Link = document.createElement('a');
						Link.download = "3_11_4.json";
						Link.style.display = 'none';
						// 字符内容转变成blob地址
						var blob = new Blob(['callback_3_11_4('+JSON.stringify(option_3_11_4)+')']);
						Link.href = URL.createObjectURL(blob);
						// 触发点击 	
						document.body.appendChild(Link);
						Link.click();
						// 然后移除
						document.body.removeChild(Link);
						return opt
					},
				},
				magicType: {show: true, type: ['line','bar','stack','tiled']},
				// restore: {show: true},
				saveAsImage: {show: true}
			}
		},
		legend: {
			data: ["产品质量违法行为","认证相关违法行为","标准违法行为","计量违法行为","特种设备违法行为","纤维违法行为","强制性产品认证违法行为","生产许可违法行为","其他违法行为"],
			textStyle: { //图例文字的样式
				color: color_legend,
				fontSize: fontSize_all_legend
			},
		},
		grid: {
			left: '3%',
			right: '4%',
			bottom: '3%',
			containLabel: true
		},
		xAxis: [
			{
				type: 'category',
				data: ['周一', '周二', '周三', '周四', '周五', '周六', '周日'],
                boundaryGap: false,
                axisLabel:{
				textStyle: { //图例文字的样式
					color: color_axis,
					fontSize: fontSize_axis_label
				},
			}
			}
		],
		yAxis: [
			{
				type: 'value',
				axisLabel:{
					textStyle: { //图例文字的样式
						color: color_axis,
						fontSize: fontSize_axis_label
					},
				}
				// max: 365,
			}
		],
		series: [
			{
                name: '产品质量违法行为',
                type: 'line',
                stack: '总量',
                areaStyle: {},
				// stack: '抽查情况',
				data: [120, 132, 101, 134, 90, 230, 210]
			},
			{
                name: '认证相关违法行为',
                type: 'line',
                stack: '总量',
                areaStyle: {},
				// stack: '抽查情况',
				data: [220, 182, 191, 234, 290, 330, 310]
			},
			{
                name: '标准违法行为',
                type: 'line',
                stack: '总量',
                areaStyle: {},
				// stack: '抽查情况',
				data: [120, 132, 101, 134, 90, 230, 210]
			},
			{
                name: '计量违法行为',
                type: 'line',
                stack: '总量',
                areaStyle: {},
				// stack: '抽查情况',
				data: [220, 182, 191, 234, 290, 330, 310]
			},
			{
				name: '特种设备违法行为',
				type: 'line',
				// stack: '抽查情况',
				data: [220, 182, 191, 234, 290, 330, 310]
			},
			{
                name: '纤维违法行为',
                type: 'line',
                stack: '总量',
                areaStyle: {},
				// stack: '抽查情况',
				data: [220, 182, 191, 234, 290, 330, 310]
			},
			{
                name: '强制性产品认证违法行为',
                type: 'line',
                stack: '总量',
                areaStyle: {},
				// stack: '抽查情况',
				data: [220, 182, 191, 234, 290, 330, 310]
			},
			{
                name: '生产许可违法行为',
                type: 'line',
                stack: '总量',
                areaStyle: {},
				// stack: '抽查情况',
				data: [220, 182, 191, 234, 290, 330, 310]
			},
            {
                name: '其他违法行为',
                type: 'line',
                stack: '总量',
                areaStyle: {},
				// stack: '抽查情况',
				data: [220, 182, 191, 234, 290, 330, 310]
			}

		]
	};


	option_3_11_4['series'] = ori_data_11_4['series'];
	option_3_11_4['legend']['data'] = ori_data_11_4['legend']['data'];
	option_3_11_4['xAxis'][0]['data'] = ori_data_11_4['xAxis'][0]['data'];

	myChart_11_4.setOption(option_3_11_4, true);

</script>

<!--配置页面 11-5 的Echart图-->
<!-- <script>
    var dom_11_5 = document.getElementById("container_11_5");
    var myChart_11_5 = echarts.init(dom_11_5, 'chalk');

    var data_11_5 = alldata["2012-2017上海市“三品”认证变化率趋势"]

    var xAxis_11_5 = []
    var yAxis_11_5a = []


    for (var i = 1; i < data_11_5.length; ++i) {
        xAxis_11_5.push(data_11_5[i][0])
        yAxis_11_5a.push(data_11_5[i][1])
    }


    var option_11_5 = {
        textStyle: {
            fontSize: fontSize_all_legend,
        },
        tooltip: {
            trigger: 'axis'
        },
        legend: {
            data: ['“三品”认证率'],
            textStyle: {
                color: '#F0F8FF'
            }
        },
        toolbox: {
            show: true,
            orient: 'vertical',
            left: 'right',
            top: 'center',
            feature: {
                mark: { show: true },
                dataView: { show: true, readOnly: false },
                magicType: { show: true, type: ['line', 'bar', 'tiled'] },
                restore: { show: true },
                saveAsImage: { show: true }
            }
        },
        xAxis: [
            {
                type: 'category',
                boundaryGap: true,
                data: xAxis_11_5,
                axisLabel: {
                    fontSize: fontSize_axis_label
                }
            }
        ],
        yAxis: [
            {
                type: 'value',
                name: "百分比",
                axisLabel: {
                    fontSize: fontSize_axis_label
                }
            }
        ],
        series: [
            {
                name: '“三品”认证率',
                type: 'line',
                data: yAxis_11_5a,
            },
        ]
    };

    if (option_11_5 && typeof option_11_5 === 'object') {
        myChart_11_5.setOption(option_11_5);
        console.log(data_11_5)
    }

</script> -->

<script>
    var ori_data_11_5 = {};

    function callback_3_11_5(res){
        ori_data_11_5 = res;
		console.log('3_11_5.json读取成功')
		console.log(ori_data_11_5);
    }
</script>
<script src="data/3_11_5.json?callback=callback_3_11_5"></script>

<script>

	var dom_11_5 = document.getElementById("container_11_5");
	var myChart_11_5 = echarts.init(dom_11_5, 'chalk');
	var app_11_5 = {};

	function view_3_11_5_change(){
		console.log("3_11_5 change")
		// Document.getElementById('view_2_11_5').innerHTML
		console.log(document.getElementById('view_3_11_5').value)
		document.getElementById('view_3_11_5').innerHTML = document.getElementById('view_3_11_5').value
	}

	//折线图
	var option_3_11_5 = {
        textStyle: {
            fontSize: fontSize_all_legend,
        },
        tooltip: {
			trigger: 'axis',
			axisPointer: {            // 坐标轴指示器，坐标轴触发有效
				type: 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
			}
		},
		toolbox: {
			show: true,
			itemSize: echart_toolbox_size, 
            orient: 'vertical',
			feature: {
				dataView: {
					show: true, 
					readOnly: false,
					optionToContent: function(opt) {
						// console.log(opt)
						var axisData = opt['xAxis'][0]['data'];
						var series = opt['series'];
						console.log("start show")
						// console.log(axisData)
						// console.log(series)
						var table = '<textarea id="view_3_11_5" onchange="view_3_11_5_change()" style="width: 100%; height: 100%; font-family: monospace; font-size: 14px; line-height: 1.6rem; color: rgb(0, 0, 0); border-color: rgb(51, 51, 51); background-color: rgb(255, 255, 255);">\n';
						// table += option_11_5_9['series'][0]['name'];
						// table += '\n';
						table += "年份"
						for(var i = 0; i < option_3_11_5['legend']['data'].length; ++i){
							table += (','+option_3_11_5['legend']['data'][i]);
						}
						table += '\n';

						for (var i = 0, l = axisData.length; i < l; i++) {
							table += axisData[i];
							for(var j = 0; j < series.length; ++j){
								// if(series[j].data[i] == undefined){
								// 	table += (',null'+series[j].data[i]);

								// }
								table += (','+series[j].data[i]);
							}
							table += '\n';
						}
						table += '</textarea>'
						// table += '</tbody></table></div>';
						// console.log(table)
						return table;
						// return option_2_11_5['xAxis']['data']
					},
					contentToOption:function(HTMLDomElement, opt){
						console.log("start save 11_5")

						var plain_tex = HTMLDomElement.firstChild.innerHTML;
						var arr_tex = plain_tex.split('\n')

						var legend_11_5 = arr_tex[0].split(',').slice(1);
						var valid_num = legend_11_5.length;

						var X_11_5 = [];
						var Y_11_5 = [];

						while(Y_11_5.length < valid_num){
							Y_11_5.push([])
						}

						for(var i = 1; i < arr_tex.length; ++i){
							cur_pair = arr_tex[i].split(',');
							// if(cur_pair.length != valid_num){
							// 	// console.alert('wrong data')
							// 	continue
							// }
							// if(cur_pair[0] == '' || cur_pair[0] == undefined){
							// 	continue
							// }
							
							if(cur_pair.length < valid_num+1 || cur_pair[0].length == 0){
								continue;
							}

							X_11_5.push(cur_pair[0]);

							for(var j = 1,k = 0; j < cur_pair.length && k < Y_11_5.length; ++j, ++k){
								Y_11_5[k].push(cur_pair[j]);
							}
							// Y_9_1.push(cur_pair[1]);
						}

						option_3_11_5['legend']['data'] = legend_11_5;
						option_3_11_5['xAxis'][0]['data'] = X_11_5;

						option_3_11_5['series'] = [];

						for(var i = 0; i < Y_11_5.length; ++i){
							option_3_11_5['series'].push({
								name: legend_11_5[i],
								type: "line",//折线图
								data: Y_11_5[i],
							})
						}
						
						myChart_11_5.setOption(option_3_11_5);

						var Link = document.createElement('a');
						Link.download = "3_11_5.json";
						Link.style.display = 'none';
						// 字符内容转变成blob地址
						var blob = new Blob(['callback_3_11_5('+JSON.stringify(option_3_11_5)+')']);
						Link.href = URL.createObjectURL(blob);
						// 触发点击 	
						document.body.appendChild(Link);
						Link.click();
						// 然后移除
						document.body.removeChild(Link);
						return opt
					},
				},
				magicType: {show: true, type: ['line','bar','stack','tiled']},
				// restore: {show: true},
				saveAsImage: {show: true}
			}
		},
		legend: {
			data: ['“三品”认证率'],
            textStyle: { //图例文字的样式
				color: color_legend,
				fontSize: fontSize_all_legend
			},
		},
		grid: {
			left: '3%',
			right: '4%',
			bottom: '3%',
			containLabel: true
		},
		xAxis: [
			{
				type: 'category',
				data: ['周一', '周二', '周三', '周四', '周五', '周六', '周日'],
                boundaryGap: false,
                axisLabel:{
				textStyle: { //图例文字的样式
					color: color_axis,
					fontSize: fontSize_axis_label
				},
			}
			}
		],
		yAxis: [
			{
				type: 'value',
                name: "百分比",
				axisLabel:{
					textStyle: { //图例文字的样式
						color: color_axis,
						fontSize: fontSize_axis_label
					},
				}
				// max: 365,
			}
		],
		series: [
			{
                name: '“三品”认证率',
                type: 'line',
				// stack: '抽查情况',
				data: [120, 132, 101, 134, 90, 230, 210]
			},
		]
	};
	option_3_11_5['series'] = ori_data_11_5['series'];
	option_3_11_5['legend']['data'] = ori_data_11_5['legend']['data'];
	option_3_11_5['xAxis'][0]['data'] = ori_data_11_5['xAxis'][0]['data'];

	myChart_11_5.setOption(option_3_11_5, true);

</script>


<!--配置页面 11-6 的Echart图-->
<!-- <script>
    var dom_11_6 = document.getElementById("container_11_6");
    var myChart_11_6 = echarts.init(dom_11_6, 'chalk');

    var data_11_6 = alldata["2012-2017年吊销营业执照数量（单位 张）"]

    var xAxis_11_6 = []
    var yAxis_11_6a = []


    for (var i = 1; i < data_11_6.length; ++i) {
        xAxis_11_6.push(data_11_6[i][0])
        yAxis_11_6a.push(data_11_6[i][1])
    }


    var option_11_6 = {
        textStyle: {
            fontSize: fontSize_all_legend,
        },
        tooltip: {
            trigger: 'axis'
        },
        legend: {
            data: ['吊销营业执照数量'],
            textStyle: {
                color: '#F0F8FF'
            }
        },
        toolbox: {
            show: true,
            orient: 'vertical',
            left: 'right',
            top: 'center',
            feature: {
                mark: { show: true },
                dataView: { show: true, readOnly: false },
                magicType: { show: true, type: ['line', 'bar', 'tiled'] },
                restore: { show: true },
                saveAsImage: { show: true }
            }
        },
        xAxis: [
            {
                type: 'category',
                boundaryGap: true,
                data: xAxis_11_6,
                axisLabel: {
                    fontSize: fontSize_axis_label
                }
            }
        ],
        yAxis: [
            {
                type: 'value',
                name: "单位(张）",
                axisLabel: {
                    fontSize: fontSize_axis_label
                }
            }
        ],
        series: [
            {
                name: '吊销营业执照数量',
                type: 'bar',
                data: yAxis_11_6a,
            },
        ]
    };

    if (option_11_6 && typeof option_11_6 === 'object') {
        myChart_11_6.setOption(option_11_6);
        console.log(data_11_6)
    }

</script> -->
<script>
    var data_11_6 = {};

    function callback_3_11_6(res){
        ori_data_11_6 = res;
		console.log('3_11_6.json读取成功')
		console.log(ori_data_11_6);
    }
</script>
<script src="data/3_11_6.json?callback=callback_3_11_6"></script>

<script>

	var dom_11_6 = document.getElementById("container_11_6");
	var myChart_11_6 = echarts.init(dom_11_6, 'chalk');
	var app_11_6 = {};

	function view_11_6_1_change(){
		console.log("11_6_1 change")
		// Document.getElementById('view_11_6_1').innerHTML
		console.log(document.getElementById('view_11_6_1').value)
		document.getElementById('view_11_6_1').innerHTML = document.getElementById('view_11_6_1').value
	}

	var option_11_6_1 = {
        textStyle: {
            fontSize: fontSize_all_legend,
        },
        tooltip: {
			trigger: 'axis',
			axisPointer: {            // 坐标轴指示器，坐标轴触发有效
				type: 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
			}
		},
		toolbox: {
			show: true,
			itemSize: echart_toolbox_size, 
            orient: 'vertical',
			feature: {
				dataView: {
					show: true, 
					readOnly: false,
					// optionToContent: function(opt) {
    				// 	str = '<textarea id="view_2_11_6" style="width: 100%; height: 100%; font-family: monospace; font-size: 14px; line-height: 1.6rem; color: rgb(0, 0, 0); border-color: rgb(51, 51, 51); background-color: rgb(255, 255, 255);"></textarea>'
					// 	return str
					// },
					optionToContent: function(opt) {
						// console.log(opt)
						var axisData = opt['xAxis'][0]['data'];
						var series = opt['series'];
						console.log("start show")
						// console.log(axisData)
						// console.log(series)
						var table = '<textarea id="view_11_6_1" onchange="view_11_6_1_change()" style="width: 100%; height: 100%; font-family: monospace; font-size: 14px; line-height: 1.6rem; color: rgb(0, 0, 0); border-color: rgb(51, 51, 51); background-color: rgb(255, 255, 255);">时间,数值\n';
						// var table = '<div style=" overflow-y:auto;height: 100%;width:100%;"><table style="width:100%;text-align:center"><tbody><tr>'
						// 			+ '<td><font color="red">时间</font></td>'
						// 			+ '<td>' + '数值' + '</td>'
						// 			+ '</tr>';
						for (var i = 0, l = axisData.length; i < l; i++) {
							// table += '<tr>'
							// 		+ '<td>' + axisData[i] + '</td>'
							// 		+ '<td>' + series[0].data[i] + '</td>'
							// 		+ '</tr>';
							table += axisData[i]+','+series[0].data[i]+'\n'
						}
						table += '</textarea>'
						// table += '</tbody></table></div>';
						// console.log(table)
						return table;
						// return option_11_6_1['xAxis']['data']
					},
					contentToOption:function(HTMLDomElement, opt){
						console.log("start save")
						// console.log(opt)
						// console.log(HTMLDomElement.firstChild)

						var plain_tex = HTMLDomElement.firstChild.innerHTML;
						var arr_tex = plain_tex.split('\n')
						// console.log(arr_tex)

						X_11_6 = [];
						Y_11_6 = [];

						for(var i = 1; i < arr_tex.length; ++i){
							cur_pair = arr_tex[i].split(',');
							if(cur_pair.length != 2){
								// console.alert('wrong data')
								continue
							}
							if(cur_pair[0] == '' || cur_pair[0] == undefined){
								continue
							}
							X_11_6.push(cur_pair[0]);
							Y_11_6.push(cur_pair[1]);
						}

						// console.log(X_11_6)
						// console.log(Y_11_6)

						option_11_6_1['series'][0]['data'] = Y_11_6;
						option_11_6_1['xAxis']['data'] = X_11_6;
						myChart_11_6.setOption(option_11_6_1);

						option_11_6_2['series'][0]['data'] = Y_11_6;
						option_11_6_2['xAxis']['data'] = X_11_6;
						

						var Link = document.createElement('a');
						Link.download = "3_11_6.json";
						Link.style.display = 'none';
						// 字符内容转变成blob地址
						var blob = new Blob(['callback_3_11_6('+JSON.stringify(option_11_6_1)+')']);
						Link.href = URL.createObjectURL(blob);
						// 触发点击 	
						document.body.appendChild(Link);
						Link.click();
						// 然后移除
						document.body.removeChild(Link);
						return opt
					},
				},
				magicType: {show: true, type: ['line', 'bar']},
				// restore: {show: true},
				saveAsImage: {show: true}
			}
		},
		xAxis: {
			type: 'category',
			data: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
			axisLabel:{
				textStyle: { //图例文字的样式
					color: color_axis,
					fontSize: fontSize_axis_label
				},
			}
		},
		yAxis: {
			type: 'value',
			min: 0,
			// max: function (value) {
			// 	return value.max + 20;
			// },
			axisLabel:{
				textStyle: { //图例文字的样式
					color: color_axis,
					fontSize: fontSize_axis_label
				},
			}
		},
		series: [{
            name: '吊销营业执照数量',
			data: [120, 200, 150, 80, 70, 110, 130],
			type: 'bar',
			showBackground: true,
			backgroundStyle: {
				color: 'rgba(180, 180, 180, 0.2)'
			}
		}],
        legend: {
            data: ['吊销营业执照数量'],
            textStyle: {
                color: '#F0F8FF'
            }
        },
	};

	// // 折线图
	var option_11_6_2 = {
		tooltip: {
			trigger: 'axis',
			axisPointer: {            // 坐标轴指示器，坐标轴触发有效
				type: 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
			}
		},
		toolbox: {
			show: true,
			itemSize: echart_toolbox_size, 
            orient: 'vertical',
			feature: {
				dataView: {
					show: true, 
					readOnly: false,
					// optionToContent: function(opt) {
    				// 	str = '<textarea id="view_2_11_6" style="width: 100%; height: 100%; font-family: monospace; font-size: 14px; line-height: 1.6rem; color: rgb(0, 0, 0); border-color: rgb(51, 51, 51); background-color: rgb(255, 255, 255);"></textarea>'
					// 	return str
					// },
					optionToContent: function(opt) {
						// console.log(opt)
						var axisData = opt['xAxis'][0]['data'];
						var series = opt['series'];
						console.log("start show")
						// console.log(axisData)
						// console.log(series)
						var table = '<textarea id="view_11_6_1" onchange="view_11_6_1_change()" style="width: 100%; height: 100%; font-family: monospace; font-size: 14px; line-height: 1.6rem; color: rgb(0, 0, 0); border-color: rgb(51, 51, 51); background-color: rgb(255, 255, 255);">时间,数值\n';
						// var table = '<div style=" overflow-y:auto;height: 100%;width:100%;"><table style="width:100%;text-align:center"><tbody><tr>'
						// 			+ '<td><font color="red">时间</font></td>'
						// 			+ '<td>' + '数值' + '</td>'
						// 			+ '</tr>';
						for (var i = 0, l = axisData.length; i < l; i++) {
							// table += '<tr>'
							// 		+ '<td>' + axisData[i] + '</td>'
							// 		+ '<td>' + series[0].data[i] + '</td>'
							// 		+ '</tr>';
							table += axisData[i]+','+series[0].data[i]+'\n'
						}
						table += '</textarea>'
						// table += '</tbody></table></div>';
						// console.log(table)
						return table;
						// return option_11_6_1['xAxis']['data']
					},
					contentToOption:function(HTMLDomElement, opt){
						console.log("start save")
						// console.log(opt)
						// console.log(HTMLDomElement.firstChild)

						var plain_tex = HTMLDomElement.firstChild.innerHTML;
						var arr_tex = plain_tex.split('\n')
						// console.log(arr_tex)

						X_11_6 = [];
						Y_11_6 = [];

						for(var i = 1; i < arr_tex.length; ++i){
							cur_pair = arr_tex[i].split(',');
							if(cur_pair.length != 2){
								// console.alert('wrong data')
								continue
							}
							if(cur_pair[0] == '' || cur_pair[0] == undefined){
								continue
							}
							X_11_6.push(cur_pair[0]);
							Y_11_6.push(cur_pair[1]);
						}

						// console.log(X_11_6)
						// console.log(Y_11_6)

						option_11_6_1['series'][0]['data'] = Y_11_6;
						option_11_6_1['xAxis']['data'] = X_11_6;
						myChart_11_6.setOption(option_11_6_1);

						option_11_6_2['series'][0]['data'] = Y_11_6;
						option_11_6_2['xAxis']['data'] = X_11_6;
						

						var Link = document.createElement('a');
						Link.download = "3_11_6.json";
						Link.style.display = 'none';
						// 字符内容转变成blob地址
						var blob = new Blob(['callback_3_11_6('+JSON.stringify(option_11_6_1)+')']);
						Link.href = URL.createObjectURL(blob);
						// 触发点击 	
						document.body.appendChild(Link);
						Link.click();
						// 然后移除
						document.body.removeChild(Link);
						return opt
					},
				},
				magicType: {show: true, type: ['line', 'bar']},
				// restore: {show: true},
				saveAsImage: {show: true}
			}
		},
		xAxis: {
			type: 'category',
			data: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
			axisLabel:{
				textStyle: { //图例文字的样式
					color: color_axis,
					fontSize: fontSize_axis_label
				},
			}
		},
		yAxis: {
			type: 'value',
			min: function (value) {
				return value.min - 20;
			},
			max: function (value) {
				return value.max + 20;
			},
			axisLabel:{
				textStyle: { //图例文字的样式
					color: color_axis,
					fontSize: fontSize_axis_label
				},
			}
		},
		series: [{
			markPoint: {
                data: [
                    {type: 'max', name: '最大值'},
                    {type: 'min', name: '最小值'}
                ]
            },
			data: [820, 932, 901, 934, 1290, 1330, 1320],
			type: 'line',
			smooth: true
		}],
        legend: {
            data: ['吊销营业执照数量'],
            textStyle: {
                color: '#F0F8FF'
            }
        },
	};


	var X_11_6 = ori_data_11_6['xAxis']['data'];
	var Y_11_6 = ori_data_11_6['series'][0]['data'];

	option_11_6_1['series'][0]['data'] = Y_11_6;
	option_11_6_1['xAxis']['data'] = X_11_6;
	myChart_11_6.setOption(option_11_6_1);

	option_11_6_2['series'][0]['data'] = Y_11_6;
	option_11_6_2['xAxis']['data'] = X_11_6;

	// var arr_option_11_6 = [option_11_6_1, option_11_6_2];
	// var cur_option_11_6 = 0;

	// console.log('arr_option_11_6')
	// console.log(arr_option_11_6)

	// function change_option_11_6(){
	// 	console.log('exchange');
	// 	cur_option_11_6 = (cur_option_11_6+1)%arr_option_11_6.length;
	// 	myChart_11_6.setOption(arr_option_11_6[cur_option_11_6]);
	// }

	myChart_11_6.on('magictypechanged', function (params) {
		let o = { ...params };
		console.log(params)
		if(params.currentType == 'line'){
			o.newOption = option_11_6_2;
		}else if(params.currentType == 'bar'){
			o.newOption = option_11_6_1;
		}
		myChart_11_6.setOption(o.newOption, true);
	});


</script>



<!-- <script>
	$('<i id="back-to-top" onclick="history.back()"></i>').appendTo($('body'));
	// $('<i id="back-to-top" onclick="location=\'./index_3.html\'"></i>').appendTo($('body'));
	$('#back-to-top').fadeIn();	
</script> -->

<script type="text/javascript" src="js/left_top_but.js"></script>