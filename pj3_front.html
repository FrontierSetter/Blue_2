<!DOCTYPE html>

<html>

<head>
    <meta charset="utf-8" />
    <meta name="viewport"
        content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
    <title>大屏数据可视化 - 模板</title>
    <link rel="stylesheet" href="css/app.css" />
    <link rel="stylesheet" href="css/mine.css" />
    

    <!-- JQuery -->
    <script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <!-- 弹出窗口 -->
    <link rel="stylesheet" href="css/hover_window_2.css" />
    <link rel="stylesheet" href="css/hover_window.css" />
    <script type="text/javascript" src="js/hover_window_2.js"></script>

    <!-- echarts -->
    <script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
    <script type="text/javascript" src="js/color.js"></script>

    <!-- semantic UI -->
    <link href="https://cdn.bootcdn.net/ajax/libs/semantic-ui/2.4.1/components/icon.css" rel="stylesheet">
    <link href="https://cdn.bootcdn.net/ajax/libs/semantic-ui/2.4.1/components/button.css" rel="stylesheet">
    <link href="https://cdn.bootcdn.net/ajax/libs/semantic-ui/2.4.1/components/table.css" rel="stylesheet">
    <link rel="stylesheet" href="semantic-ui/semantic.min.css">
    <script type="text/javascript" src="js/jquery3.3.1.js"></script>
    <script type="text/javascript" src="semantic-ui/semantic.min.js"></script>

    <!-- <script src="json/data.json"></script> -->
    <script type="text/javascript" src="js/global_config.js"></script></head>

<body>
    <div class="header">
        <h1 class="header-title" style="font-size:40px">上海市质量状况可视化展图</h1>
    </div>
    <div class="wrapper">
        <div class="content">
            <div class="col col-l">
                <div class="xpanel-wrapper xpanel-wrapper-50">
                    <div class="xpanel xpanel-l-t">
                        <div class="title">上海市质量监管状况分析<a href="./index_4.html" style="color: white;" class="title_link"><i class="external square alternate icon"></i></a></div>
                        <h1 class="subtitle">2010-2017年质量监督执法情况</h1>
                        <div id="container_1_1" style="height: 85%"></div>
                    </div>
                </div>
                <div class="xpanel-wrapper xpanel-wrapper-55">
                    <div class="xpanel xpanel-l-b">
                        <div class="title">上海市行业状况分析<a href="./index_5.html" style="color: white;" class="title_link"><i class="external square alternate icon"></i></a></div>
                        <h1 class="subtitle">2008年-2017年上海市采用国际标准数量与制修订地方标准数</h1>
                        <div id="container_1_2" style="height: 90%"></div>
                    </div>
                </div>
            </div>
            <div class="col col-c">
                <div class="xpanel-wrapper xpanel-wrapper-50">
                    <div class="xpanel xpanel-c-t">
                        <div class="title">上海市总体质量状况分析<a href="./index_2.html" style="color: white;" class="title_link"><i class="external square alternate icon"></i></a></div>
                        <h1 class="subtitle">2008-2017年上海市国家级监督抽查及市级监督抽查合格率</h1>
                        <div id="container_1_3" style="height: 85%"></div>
                    </div>
                </div>
                <div class="xpanel-wrapper xpanel-wrapper-55">
                    <div class="xpanel xpanel-c-b">
                        <div class="title">上海市社区服务分析<a href="./index_6.html" style="color: white;" class="title_link"><i class="external square alternate icon"></i></a>
                        </div>
                        <h1 class="subtitle">社区卫生服务历年公众满意度结果</h1>
                        <div id="container_1_4" style="height: 90%"></div>
                    </div>
                </div>
            </div>
            <div class="col col-r">
                <div class="xpanel-wrapper xpanel-wrapper-50">
                    <div class="xpanel xpanel-r-t">
                        <div class="title">上海市食品质量状况分析<a href="./index_8.html" style="color: white;" class="title_link"><i class="external square alternate icon"></i></a></div>
                        <h1 class="subtitle">2010-2017年上海食品监督抽检合格率情况</h1>
                        <div id="container_1_5" style="height: 85%"></div>
                    </div>
                </div>
                <div class="xpanel-wrapper xpanel-wrapper-55">
                    <div class="xpanel xpanel-r-b">
                        <div class="title">上海市质量奖获奖状况<a href="./index_7.html" style="color: white;" class="title_link"><i class="external square alternate icon"></i></a></div>
                        <h1 class="subtitle">2008-2017年上海市各质量激励奖获得情况</h1>
                        <div id="container_1_6" style="height: 90%"></div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="popLayer"></div>
    <div id="popBox_1_1" class="popBox">
        <!-- <div class="close">
				<a href="javascript:void(0)" onclick="closeBoxSuffix('_1_1')">关闭</a>
			</div> -->
        <div class="content" style="overflow: scroll; max-height: 80%;">
            <table id="table_1_1" class="ui definition table">
                <thead>
                    <tr>
                        <th></th>
                        <th>Arguments</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>reset rating</td>
                        <td>
                            <div class="ui input">
                                <input type="text" placeholder="搜索...">
                            </div>
                        </td>
                    </tr>
                    <tr>
                        <td>set rating</td>
                        <td>
                            <div class="ui input">
                                <input type="text" placeholder="搜索...">
                            </div>
                        </td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div class="dlg_bottom">
            <button class="ui primary button" onclick="alert('submit success!')">
                保存
            </button>
            <button class="ui button" onclick="closeBoxSuffix('_1_1')">
                关闭
            </button>
            <button class="ui button" onclick="addTableRow('_1_1')">
                添加一行
            </button>
        </div>

    </div>
    <script>
			// initHoverWindowBySuffix('_1_1', submitHandler, function(){hideDialogID('_1_1')});
    </script>
</body>

</html>

<script type="text/javascript" src="js/left_top_but.js"></script>


<!--解决本地json跨域问题-->
<script>
    var alldata = {};

    function demo(res) {
        alldata = res;
    }
</script>
<script src="data/data2.json?callback=demo"></script>

<!--全局页面字体配置 -->
<!--script>
    var fontSize_all_legend = 18
    var fontSize_axis_label = 14
</script -->



<!--配置页面 1-1 的Echart图-->
<!-- <script>
    var dom_1_1 = document.getElementById("container_1_1");
    var myChart_1_1 = echarts.init(dom_1_1, 'chalk');

    var data_1_1 = alldata["2010-2017年质量监督执法情况"]

    var xAxis_1_1 = []
    var yAxis_1_1a = []
    var yAxis_1_1b = []

    for (var i = 1; i < data_1_1.length; ++i) {
        xAxis_1_1.push(data_1_1[i][0])
        yAxis_1_1a.push(data_1_1[i][1])
        yAxis_1_1b.push(data_1_1[i][2])
    }


    var option_1_1 = {
        textStyle: {
            fontSize: fontSize_all_legend,
        },
        tooltip: {
            trigger: 'axis'
        },
        legend: {
            data: ['立案案件数', '罚没款/万'],
            textStyle: {
                color: '#F0F8FF'
            }
        },
        toolbox: {
            show: true,
            orient: 'vertical',
            left: 'right',
            top: 'center',
            feature: {
                dataView: { show: true, readOnly: false },
                magicType: { show: true, type: ['line', 'bar'] },
                restore: { show: true },
                saveAsImage: { show: true }
            }
        },
        calculable: true,
        xAxis: [
            {
                type: 'category',
                data: xAxis_1_1,
                axisLabel: {
                    fontSize: fontSize_axis_label
                }
            }
        ],
        yAxis: [
            {
                type: 'value',
                name: '案件数',
                max: 4000,
                min: 0,
                boundaryGap: [0.2, 0.2],
                axisLabel: {
                    fontSize: fontSize_axis_label
                }
            },
            {
                type: 'value',
                name: '金额/万',
                max: 8000,
                min: 0,
                boundaryGap: [0.2, 0.2],
                axisLabel: {
                    fontSize: fontSize_axis_label
                }
            }
        ],
        series: [
            {
                name: '立案案件数',
                type: 'bar',
                data: yAxis_1_1a,
                yAxisIndex: 0
            },
            {
                name: '罚没款/万',
                type: 'line',
                data: yAxis_1_1b,
                yAxisIndex: 1,
            }
        ]
    };



    if (option_1_1 && typeof option_1_1 === 'object') {
        myChart_1_1.setOption(option_1_1);
        console.log(data_1_1)
    }

</script> -->

<script>
    var ori_data_1_1 = {};

    function callback_3_1_1(res){
        ori_data_1_1 = res;
		console.log('3_1_1.json读取成功')
		console.log(ori_data_1_1);
    }
</script>
<script src="data/3_1_1.json?callback=callback_3_1_1"></script>

<script>

	var dom_1_1 = document.getElementById("container_1_1");
	var myChart_1_1 = echarts.init(dom_1_1, 'chalk');
	var app_1_1 = {};

	function view_3_1_1_change(){
		console.log("3_1_1 change")
		// Document.getElementById('view_2_1_1').innerHTML
		console.log(document.getElementById('view_3_1_1').value)
		document.getElementById('view_3_1_1').innerHTML = document.getElementById('view_3_1_1').value
	}

	//折线图
	var option_3_1_1 = {
        textStyle: {
            fontSize: fontSize_all_legend,
        },
        tooltip: {
			trigger: 'axis',
			axisPointer: {            // 坐标轴指示器，坐标轴触发有效
				type: 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
			}
		},
        calculable: true,
		toolbox: {
			show: true,
            orient: 'vertical',
            left: 'right',
            top: 'center',
			feature: {
				dataView: {
					show: true, 
					readOnly: false,
					optionToContent: function(opt) {
						// console.log(opt)
						var axisData = opt['xAxis'][0]['data'];
						var series = opt['series'];
						console.log("start show")
						// console.log(axisData)
						// console.log(series)
						var table = '<textarea id="view_3_1_1" onchange="view_3_1_1_change()" style="width: 100%; height: 100%; font-family: monospace; font-size: 14px; line-height: 1.6rem; color: rgb(0, 0, 0); border-color: rgb(51, 51, 51); background-color: rgb(255, 255, 255);">\n';
						// table += option_1_1_9['series'][0]['name'];
						// table += '\n';
						table += "年份"
						for(var i = 0; i < option_3_1_1['legend']['data'].length; ++i){
							table += (','+option_3_1_1['legend']['data'][i]);
						}
						table += '\n';

						for (var i = 0, l = axisData.length; i < l; i++) {
							table += axisData[i];
							for(var j = 0; j < series.length; ++j){
								// if(series[j].data[i] == undefined){
								// 	table += (',null'+series[j].data[i]);

								// }
								table += (','+series[j].data[i]);
							}
							table += '\n';
						}
						table += '</textarea>'
						// table += '</tbody></table></div>';
						// console.log(table)
						return table;
						// return option_2_1_1['xAxis']['data']
					},
					contentToOption:function(HTMLDomElement, opt){
						console.log("start save 1_1")

						var plain_tex = HTMLDomElement.firstChild.innerHTML;
						var arr_tex = plain_tex.split('\n')

						var legend_1_1 = arr_tex[0].split(',').slice(1);
						var valid_num = legend_1_1.length;

						var X_1_1 = [];
						var Y_1_1 = [];

						while(Y_1_1.length < valid_num){
							Y_1_1.push([])
						}

						for(var i = 1; i < arr_tex.length; ++i){
							cur_pair = arr_tex[i].split(',');
							// if(cur_pair.length != valid_num){
							// 	// console.alert('wrong data')
							// 	continue
							// }
							// if(cur_pair[0] == '' || cur_pair[0] == undefined){
							// 	continue
							// }
							
							if(cur_pair.length < valid_num+1 || cur_pair[0].length == 0){
								continue;
							}

							X_1_1.push(cur_pair[0]);

							for(var j = 1,k = 0; j < cur_pair.length && k < Y_1_1.length; ++j, ++k){
								Y_1_1[k].push(cur_pair[j]);
							}
							// Y_9_1.push(cur_pair[1]);
						}

						option_3_1_1['legend']['data'] = legend_1_1;
						option_3_1_1['xAxis'][0]['data'] = X_1_1;

						option_3_1_1['series'] = [];

						for(var i = 0; i < Y_1_1.length; ++i){
                            if(i==0)
                            {
                                option_3_1_1['series'].push({
								name: legend_1_1[i],
                                yAxisIndex: 0,
								type: "bar",//折线图
								data: Y_1_1[i],});

                            }else{
                                option_3_1_1['series'].push({
								name: legend_1_1[i],
                                yAxisIndex: 1,
								type: "line",//直方图
								data: Y_1_1[i],});
                            }

						}
						
						myChart_1_1.setOption(option_3_1_1);

						var Link = document.createElement('a');
						Link.download = "3_1_1.json";
						Link.style.display = 'none';
						// 字符内容转变成blob地址
						var blob = new Blob(['callback_3_1_1('+JSON.stringify(option_3_1_1)+')']);
						Link.href = URL.createObjectURL(blob);
						// 触发点击 	
						document.body.appendChild(Link);
						Link.click();
						// 然后移除
						document.body.removeChild(Link);
						return opt
					},
				},
				magicType: {show: true, type: ['line','bar','stack','tiled']},
				// restore: {show: true},
				saveAsImage: {show: true}
			}
		},
		legend: {
            data: ['立案案件数', '罚没款/万'],
            textStyle: { //图例文字的样式
				color: color_legend,
				fontSize: fontSize_all_legend
			},
		},
		xAxis: [
			{
				type: 'category',
				data: ['周一', '周二', '周三', '周四', '周五', '周六', '周日'],
                axisLabel:{
				textStyle: { //图例文字的样式
					color: color_axis,
					fontSize: fontSize_axis_label
				},
			}
			},
		],
		yAxis: [
			{
				type: 'value',
                name: '案件数',
                max: 4000,
                min: 0,
                boundaryGap: [0.2, 0.2],
				axisLabel:{
					textStyle: { //图例文字的样式
						color: color_axis,
						fontSize: fontSize_axis_label
					},
				}
			},
            {
                type: 'value',
                name: '金额/万',
                max: 8000,
                min: 0,
                boundaryGap: [0.2, 0.2],
                axisLabel: {
                    textStyle: { //图例文字的样式
						color: color_axis,
						fontSize: fontSize_axis_label
					},
                }
            },
		],
		series: [
			{
                name: '立案案件数',
                type: 'bar',
				// stack: '抽查情况',
                yAxisIndex: 0,
				data: [120, 132, 101, 134, 90, 230, 210]
			},
			{
                name: '罚没款/万',
                type: 'line',
				// stack: '抽查情况',
                yAxisIndex: 1,
				data: [220, 182, 191, 234, 290, 330, 310],

			},
		]
	};


	option_3_1_1['series'] = ori_data_1_1['series'];
	option_3_1_1['legend']['data'] = ori_data_1_1['legend']['data'];
	option_3_1_1['xAxis'][0]['data'] = ori_data_1_1['xAxis'][0]['data'];

	myChart_1_1.setOption(option_3_1_1, true);

</script>


<!--配置页面 1-2 的Echart图-->
<!-- <script>
    var dom_1_2 = document.getElementById("container_1_2");
    var myChart_1_2 = echarts.init(dom_1_2, 'chalk');

    var data_1_2 = alldata["2008年-2017年上海市采用国际标准数量与制修订地方标准数"]

    var xAxis_1_2 = []
    var yAxis_1_2a = []
    var yAxis_1_2b = []
    var yAxis_1_2c = []

    for (var i = 1; i < data_1_2.length; ++i) {
        xAxis_1_2.push(data_1_2[i][0])
        yAxis_1_2a.push(data_1_2[i][1])
        yAxis_1_2b.push(data_1_2[i][2])
        yAxis_1_2c.push(data_1_2[i][3])
    }

    var labelOption = {
        show: true,
        position: 'insideBottom',
        distance: 15,
        align: 'left',
        verticalAlign: 'middle',
        rotate: 90,
        formatter: '{c}  {name|{a}}',
        fontSize: 16,
        rich: {
            name: {
                textBorderColor: '#fff'
            }
        }
    };

    var option_1_2 = {
        textStyle: {
            fontSize: fontSize_all_legend,
        },
        //color: ['#FFCCCC', '#FFFF99', '#99CCFF'],
        tooltip: {
            trigger: 'axis',
            axisPointer: {
                type: 'shadow'
            }
        },
        legend: {
            data: ['国际标准数', '地方标准数', '企业标准数'],
            textStyle: {
                color: '#F0F8FF'
            }
        },
        toolbox: {
            show: true,
            orient: 'vertical',
            left: 'right',
            top: 'center',
            feature: {
                mark: { show: true },
                dataView: { show: true, readOnly: false },
                magicType: { show: true, type: ['line', 'bar', 'stack', 'tiled'] },
                restore: { show: true },
                saveAsImage: { show: true }
            }
        },
        xAxis: [
            {
                type: 'category',
                axisTick: { show: false },
                data: xAxis_1_2,
                axisLabel: {
                    fontSize: fontSize_axis_label
                }
            }
        ],
        yAxis: [
            {
                type: 'value',
                name: '标准数',
                max: 4000,
                min: 0,
                boundaryGap: [0.2, 0.2],
                axisLabel: {
                    fontSize: fontSize_axis_label
                }
            },
            {
                type: 'value',
                name: '企业标准数',
                max: 200000,
                min: 0,
                boundaryGap: [0.2, 0.2],
                axisLabel: {
                    fontSize: fontSize_axis_label
                }
            }
        ],
        series: [
            {
                name: '国际标准数',
                type: 'bar',
                barGap: 0,
                //label: labelOption,
                data: yAxis_1_2a,
                yAxisIndex: 0
            },
            {
                name: '地方标准数',
                type: 'bar',
                //label: labelOption,
                data: yAxis_1_2b,
                yAxisIndex: 0
            },
            {
                name: '企业标准数',
                type: 'line',
                //label: labelOption,
                data: yAxis_1_2c,
                yAxisIndex: 1
            }
        ]
    };



    if (option_1_2 && typeof option_1_2 === 'object') {
        myChart_1_2.setOption(option_1_2);
        console.log(data_1_2)
    }

</script> -->

<script>
    var ori_data_1_2 = {};

    function callback_3_1_2(res){
        ori_data_1_2 = res;
		console.log('3_1_2.json读取成功')
		console.log(ori_data_1_2);
    }
</script>
<script src="data/3_1_2.json?callback=callback_3_1_2"></script>

<script>

	var dom_1_2 = document.getElementById("container_1_2");
	var myChart_1_2 = echarts.init(dom_1_2, 'chalk');
	var app_1_2 = {};

	function view_3_1_2_change(){
		console.log("3_1_2 change")
		// Document.getElementById('view_2_1_2').innerHTML
		console.log(document.getElementById('view_3_1_2').value)
		document.getElementById('view_3_1_2').innerHTML = document.getElementById('view_3_1_2').value
	}

	//折线图
	var option_3_1_2 = {
        textStyle: {
            fontSize: fontSize_all_legend,
        },
        tooltip: {
			trigger: 'axis',
			axisPointer: {            // 坐标轴指示器，坐标轴触发有效
				type: 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
			}
		},
        calculable: true,
		toolbox: {
			show: true,
            orient: 'vertical',
            left: 'right',
            top: 'center',
			feature: {
				dataView: {
					show: true, 
					readOnly: false,
					optionToContent: function(opt) {
						// console.log(opt)
						var axisData = opt['xAxis'][0]['data'];
						var series = opt['series'];
						console.log("start show")
						// console.log(axisData)
						// console.log(series)
						var table = '<textarea id="view_3_1_2" onchange="view_3_1_2_change()" style="width: 100%; height: 100%; font-family: monospace; font-size: 14px; line-height: 1.6rem; color: rgb(0, 0, 0); border-color: rgb(51, 51, 51); background-color: rgb(255, 255, 255);">\n';
						// table += option_1_2_9['series'][0]['name'];
						// table += '\n';
						table += "年份"
						for(var i = 0; i < option_3_1_2['legend']['data'].length; ++i){
							table += (','+option_3_1_2['legend']['data'][i]);
						}
						table += '\n';

						for (var i = 0, l = axisData.length; i < l; i++) {
							table += axisData[i];
							for(var j = 0; j < series.length; ++j){
								// if(series[j].data[i] == undefined){
								// 	table += (',null'+series[j].data[i]);

								// }
								table += (','+series[j].data[i]);
							}
							table += '\n';
						}
						table += '</textarea>'
						// table += '</tbody></table></div>';
						// console.log(table)
						return table;
						// return option_2_1_2['xAxis']['data']
					},
					contentToOption:function(HTMLDomElement, opt){
						console.log("start save 1_2")

						var plain_tex = HTMLDomElement.firstChild.innerHTML;
						var arr_tex = plain_tex.split('\n')

						var legend_1_2 = arr_tex[0].split(',').slice(1);
						var valid_num = legend_1_2.length;

						var X_1_2 = [];
						var Y_1_2 = [];

						while(Y_1_2.length < valid_num){
							Y_1_2.push([])
						}

						for(var i = 1; i < arr_tex.length; ++i){
							cur_pair = arr_tex[i].split(',');
							// if(cur_pair.length != valid_num){
							// 	// console.alert('wrong data')
							// 	continue
							// }
							// if(cur_pair[0] == '' || cur_pair[0] == undefined){
							// 	continue
							// }
							
							if(cur_pair.length < valid_num+1 || cur_pair[0].length == 0){
								continue;
							}

							X_1_2.push(cur_pair[0]);

							for(var j = 1,k = 0; j < cur_pair.length && k < Y_1_2.length; ++j, ++k){
								Y_1_2[k].push(cur_pair[j]);
							}
							// Y_9_1.push(cur_pair[1]);
						}

						option_3_1_2['legend']['data'] = legend_1_2;
						option_3_1_2['xAxis'][0]['data'] = X_1_2;

						option_3_1_2['series'] = [];

						for(var i = 0; i < Y_1_2.length; ++i){
                            if(i==0||i==1)
                            {
                                option_3_1_2['series'].push({
								name: legend_1_2[i],
                                yAxisIndex: 0,
								type: "bar",//折线图
								data: Y_1_2[i],});
                            }else{
                                option_3_1_2['series'].push({
								name: legend_1_2[i],
                                yAxisIndex: 1,
								type: "line",//直方图
								data: Y_1_2[i],});
                            }

						}
						
						myChart_1_2.setOption(option_3_1_2);

						var Link = document.createElement('a');
						Link.download = "3_1_2.json";
						Link.style.display = 'none';
						// 字符内容转变成blob地址
						var blob = new Blob(['callback_3_1_2('+JSON.stringify(option_3_1_2)+')']);
						Link.href = URL.createObjectURL(blob);
						// 触发点击 	
						document.body.appendChild(Link);
						Link.click();
						// 然后移除
						document.body.removeChild(Link);
						return opt
					},
				},
				magicType: {show: true, type: ['line','bar','stack','tiled']},
				// restore: {show: true},
				saveAsImage: {show: true}
			}
		},
		legend: {
            data: ['国际标准数', '地方标准数', '企业标准数'],
            textStyle: { //图例文字的样式
				color: color_legend,
				fontSize: fontSize_all_legend
			},
		},
		xAxis: [
			{
				type: 'category',
				data: ['周一', '周二', '周三', '周四', '周五', '周六', '周日'],
                axisTick: { show: false },
                axisLabel:{
				textStyle: { //图例文字的样式
					color: color_axis,
					fontSize: fontSize_axis_label
				},
			}
			},
		],
		yAxis: [
			{
                type: 'value',
                name: '标准数',
                max: 4000,
                min: 0,
                boundaryGap: [0.2, 0.2],
				axisLabel:{
					textStyle: { //图例文字的样式
						color: color_axis,
						fontSize: fontSize_axis_label
					},
				}
			},
            {
                type: 'value',
                name: '企业标准数',
                max: 200000,
                min: 0,
                boundaryGap: [0.2, 0.2],
                axisLabel: {
                    textStyle: { //图例文字的样式
						color: color_axis,
						fontSize: fontSize_axis_label
					},
                }
            },
		],
		series: [
			{
                name: '国际标准数',
                type: 'bar',
                barGap: 0,
                yAxisIndex: 0,
				data: [120, 132, 101, 134, 90, 230, 210]
			},
            {
                name: '地方标准数',
                type: 'bar',
                barGap: 0,
                yAxisIndex: 0,
				data: [120, 132, 101, 134, 90, 230, 210]
			},
			{
                name: '企业标准数',
                type: 'line',
				// stack: '抽查情况',
                yAxisIndex: 1,
				data: [220, 182, 191, 234, 290, 330, 310],

			},
		]
	};


	option_3_1_2['series'] = ori_data_1_2['series'];
	option_3_1_2['legend']['data'] = ori_data_1_2['legend']['data'];
	option_3_1_2['xAxis'][0]['data'] = ori_data_1_2['xAxis'][0]['data'];

	myChart_1_2.setOption(option_3_1_2, true);

</script>


<!--配置页面 1-3 的Echart图-->
<!-- <script>
    var dom_1_3 = document.getElementById("container_1_3");
    var myChart_1_3 = echarts.init(dom_1_3, 'chalk');

    var data_1_3 = alldata["2008-2017年上海市国家级监督抽查及市级监督抽查合格率"]

    var xAxis_1_3 = []
    var yAxis_1_3a = []
    var yAxis_1_3b = []

    for (var i = 1; i < data_1_3.length; ++i) {
        xAxis_1_3.push(data_1_3[i][0])
        yAxis_1_3a.push(data_1_3[i][1])
        yAxis_1_3b.push(data_1_3[i][2])
    }


    var option_1_3 = {
        textStyle: {
            fontSize: fontSize_all_legend,
        },
        tooltip: {
            trigger: 'axis'
        },
        legend: {
            data: ['国抽', '市抽'],
            textStyle: {
                color: '#F0F8FF'
            }
        },
        toolbox: {
            show: true,
            orient: 'vertical',
            left: 'right',
            top: 'center',
            feature: {
                dataView: { show: true, readOnly: false },
                magicType: { show: true, type: ['line', 'bar'] },
                restore: { show: true },
                saveAsImage: { show: true }
            }
        },
        calculable: true,
        xAxis: [
            {
                type: 'category',
                data: xAxis_1_3,
                axisLabel: {
                    fontSize: fontSize_axis_label
                }
            }
        ],
        yAxis: [
            {
                type: 'value',
                name: '合格率（%）',
                min: 60,
                max: 100,
                axisLabel: {
                    fontSize: fontSize_axis_label
                }
            }
        ],
        series: [
            {
                name: '国抽',
                type: 'line',
                data: yAxis_1_3a,
            },
            {
                name: '市抽',
                type: 'line',
                data: yAxis_1_3b,
            }
        ],
        visualMap: {
            top: 10,
            right: 10,
            pieces: [{
                gt: 60,
                lte: 75,
                color: '#333300'
            }, {
                gt: 75,
                lte: 80,
                color: '#555500'
            }, {
                gt: 80,
                lte: 84,
                color: '#777700'
            }, {
                gt: 84,
                lte: 88,
                color: '#999900'
            }, {
                gt: 88,
                lte: 92,
                color: '#bbbb00'
            }, {
                gt: 92,
                lte: 98,
                color: '#dddd00'
            }, {
                gt: 98,
                lte: 100,
                color: '#eeee00'
            }],
            outOfRange: {
                color: '#ffff00'
            },
            textStyle: {
                color: "#ffffff"
            }
        },
    };



    if (option_1_3 && typeof option_1_3 === 'object') {
        myChart_1_3.setOption(option_1_3);
        console.log(data_1_3)
    }

</script> -->

<script>
    var ori_data_1_3 = {};

    function callback_3_1_3(res){
        ori_data_1_3 = res;
		console.log('3_1_3.json读取成功')
		console.log(ori_data_1_3);
    }
</script>
<script src="data/3_1_3.json?callback=callback_3_1_3"></script>

<script>

	var dom_1_3 = document.getElementById("container_1_3");
	var myChart_1_3 = echarts.init(dom_1_3, 'chalk');
	var app_1_3 = {};

	function view_3_1_3_change(){
		console.log("3_1_3 change")
		// Document.getElementById('view_2_1_3').innerHTML
		console.log(document.getElementById('view_3_1_3').value)
		document.getElementById('view_3_1_3').innerHTML = document.getElementById('view_3_1_3').value
	}

	//折线图
	var option_3_1_3 = {
        textStyle: {
            fontSize: fontSize_all_legend,
        },
        tooltip: {
			trigger: 'axis',
			axisPointer: {            // 坐标轴指示器，坐标轴触发有效
				type: 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
			}
		},
		toolbox: {
			show: true,
			itemSize: echart_toolbox_size, 
            orient: 'vertical',
			feature: {
				dataView: {
					show: true, 
					readOnly: false,
					optionToContent: function(opt) {
						// console.log(opt)
						var axisData = opt['xAxis'][0]['data'];
						var series = opt['series'];
						console.log("start show")
						// console.log(axisData)
						// console.log(series)
						var table = '<textarea id="view_3_1_3" onchange="view_3_1_3_change()" style="width: 100%; height: 100%; font-family: monospace; font-size: 14px; line-height: 1.6rem; color: rgb(0, 0, 0); border-color: rgb(51, 51, 51); background-color: rgb(255, 255, 255);">\n';
						// table += option_1_3_9['series'][0]['name'];
						// table += '\n';
						table += "年份"
						for(var i = 0; i < option_3_1_3['legend']['data'].length; ++i){
							table += (','+option_3_1_3['legend']['data'][i]);
						}
						table += '\n';

						for (var i = 0, l = axisData.length; i < l; i++) {
							table += axisData[i];
							for(var j = 0; j < series.length; ++j){
								// if(series[j].data[i] == undefined){
								// 	table += (',null'+series[j].data[i]);

								// }
								table += (','+series[j].data[i]);
							}
							table += '\n';
						}
						table += '</textarea>'
						// table += '</tbody></table></div>';
						// console.log(table)
						return table;
						// return option_2_1_3['xAxis']['data']
					},
					contentToOption:function(HTMLDomElement, opt){
						console.log("start save 1_3")

						var plain_tex = HTMLDomElement.firstChild.innerHTML;
						var arr_tex = plain_tex.split('\n')

						var legend_1_3 = arr_tex[0].split(',').slice(1);
						var valid_num = legend_1_3.length;

						var X_1_3 = [];
						var Y_1_3 = [];

						while(Y_1_3.length < valid_num){
							Y_1_3.push([])
						}

						for(var i = 1; i < arr_tex.length; ++i){
							cur_pair = arr_tex[i].split(',');
							// if(cur_pair.length != valid_num){
							// 	// console.alert('wrong data')
							// 	continue
							// }
							// if(cur_pair[0] == '' || cur_pair[0] == undefined){
							// 	continue
							// }
							
							if(cur_pair.length < valid_num+1 || cur_pair[0].length == 0){
								continue;
							}

							X_1_3.push(cur_pair[0]);

							for(var j = 1,k = 0; j < cur_pair.length && k < Y_1_3.length; ++j, ++k){
								Y_1_3[k].push(cur_pair[j]);
							}
							// Y_9_1.push(cur_pair[1]);
						}

						option_3_1_3['legend']['data'] = legend_1_3;
						option_3_1_3['xAxis'][0]['data'] = X_1_3;

						option_3_1_3['series'] = [];

						for(var i = 0; i < Y_1_3.length; ++i){
							option_3_1_3['series'].push({
								name: legend_1_3[i],
								type: "line",//折线图
								data: Y_1_3[i],
							})
						}
						
						myChart_1_3.setOption(option_3_1_3);

						var Link = document.createElement('a');
						Link.download = "3_1_3.json";
						Link.style.display = 'none';
						// 字符内容转变成blob地址
						var blob = new Blob(['callback_3_1_3('+JSON.stringify(option_3_1_3)+')']);
						Link.href = URL.createObjectURL(blob);
						// 触发点击 	
						document.body.appendChild(Link);
						Link.click();
						// 然后移除
						document.body.removeChild(Link);
						return opt
					},
				},
				magicType: {show: true, type: ['line','bar','stack','tiled']},
				// restore: {show: true},
				saveAsImage: {show: true}
			}
		},
		legend: {
            data: ['国抽', '市抽'],
            textStyle: {
                color: '#F0F8FF'
            }
		},
        calculable: true,
		xAxis: [
			{
				type: 'category',
				data: ['周一', '周二', '周三', '周四', '周五', '周六', '周日'],
                boundaryGap: false,
                axisLabel:{
				textStyle: { //图例文字的样式
					color: color_axis,
					fontSize: fontSize_axis_label
				},
			}
			}
		],
		yAxis: [
			{
				type: 'value',
                name: '合格率（%）',
                min: 60,
                max: 100,
				axisLabel:{
					textStyle: { //图例文字的样式
						color: color_axis,
						fontSize: fontSize_axis_label
					},
				}
				// max: 365,
			}
		],
		series: [
			{
                name: '国抽',
                type: 'line',
				// stack: '抽查情况',
				data: [120, 132, 101, 134, 90, 230, 210]
			},
			{
                name: '市抽',
                type: 'line',
				// stack: '抽查情况',
				data: [220, 182, 191, 234, 290, 330, 310]
			},
		],
        visualMap: {
            top: 10,
            right: 10,
            pieces: [{
                gt: 60,
                lte: 75,
                color: '#333300'
            }, {
                gt: 75,
                lte: 80,
                color: '#555500'
            }, {
                gt: 80,
                lte: 84,
                color: '#777700'
            }, {
                gt: 84,
                lte: 88,
                color: '#999900'
            }, {
                gt: 88,
                lte: 92,
                color: '#bbbb00'
            }, {
                gt: 92,
                lte: 98,
                color: '#dddd00'
            }, {
                gt: 98,
                lte: 100,
                color: '#eeee00'
            }],
            outOfRange: {
                color: '#ffff00'
            },
            textStyle: {
                color: "#ffffff"
            }
        },
	};


	option_3_1_3['series'] = ori_data_1_3['series'];
	option_3_1_3['legend']['data'] = ori_data_1_3['legend']['data'];
	option_3_1_3['xAxis'][0]['data'] = ori_data_1_3['xAxis'][0]['data'];

	myChart_1_3.setOption(option_3_1_3, true);

</script>


<!--配置页面 1-4 的Echart图-->
<!-- <script>
    var dom_1_4 = document.getElementById("container_1_4");
    var myChart_1_4 = echarts.init(dom_1_4, 'chalk');

    var data_1_4 = alldata["社区卫生服务历年公众满意度结果"]

    var xAxis_1_4 = []
    var yAxis_1_4a = []

    for (var i = 1; i < data_1_4.length; ++i) {
        xAxis_1_4.push(data_1_4[i][0])
        yAxis_1_4a.push(data_1_4[i][1])
    }


    var option_1_4 = {
        textStyle: {
            fontSize: fontSize_all_legend,
        },
        tooltip: {
            trigger: 'axis'
        },
        legend: {
            data: ['社区卫生服务公众满意度'],
            textStyle: {
                color: '#F0F8FF'
            }
        },
        toolbox: {
            show: true,
            orient: 'vertical',
            left: 'right',
            top: 'center',
            feature: {
                dataView: {
					show: true, 
					readOnly: false,
				},
                magicType: { show: true, type: ['line', 'bar'] },
                restore: { show: true },
                saveAsImage: { show: true }
            }
        },
        calculable: true,
        xAxis: [
            {
                type: 'category',
                data: xAxis_1_4,
                axisLabel: {
                    fontSize: fontSize_axis_label
                }
            }
        ],
        yAxis: [
            {
                type: 'value',
                name: '合格率（%）',
                min: 60,
                max: 100,
                axisLabel: {
                    fontSize: fontSize_axis_label
                }
            }
        ],
        series: [
            {
                name: '社区卫生服务公众满意度',
                type: 'line',
                data: yAxis_1_4a,
                smooth: true
            }
        ]
    };


    if (option_1_4 && typeof option_1_4 === 'object') {
        myChart_1_4.setOption(option_1_4);
        console.log(data_1_4)
    }

</script> -->
<script>
    var data_1_4 = {};

    function callback_3_1_4(res){
        ori_data_1_4 = res;
		console.log('3_1_4.json读取成功')
		console.log(ori_data_1_4);
    }
</script>
<script src="data/3_1_4.json?callback=callback_3_1_4"></script>

<script>

	var dom_1_4 = document.getElementById("container_1_4");
	var myChart_1_4 = echarts.init(dom_1_4, 'chalk');
	var app_1_4 = {};

	function view_1_4_1_change(){
		console.log("1_4_1 change")
		// Document.getElementById('view_1_4_1').innerHTML
		console.log(document.getElementById('view_1_4_1').value)
		document.getElementById('view_1_4_1').innerHTML = document.getElementById('view_1_4_1').value
	}

	// // 折线图
	var option_1_4_2 = {
        textStyle: {
            fontSize: fontSize_all_legend,
        },
        tooltip: {
			trigger: 'axis',
			// axisPointer: {            // 坐标轴指示器，坐标轴触发有效
			// 	type: 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
			// }
		},
		toolbox: {
			show: true,
			itemSize: echart_toolbox_size, 
            orient: 'vertical',
			feature: {
				dataView: {
					show: true, 
					readOnly: false,
					// optionToContent: function(opt) {
    				// 	str = '<textarea id="view_2_1_4" style="width: 100%; height: 100%; font-family: monospace; font-size: 14px; line-height: 1.6rem; color: rgb(0, 0, 0); border-color: rgb(51, 51, 51); background-color: rgb(255, 255, 255);"></textarea>'
					// 	return str
					// },
					optionToContent: function(opt) {
						// console.log(opt)
						var axisData = opt['xAxis'][0]['data'];
						var series = opt['series'];
						console.log("start show")
						// console.log(axisData)
						// console.log(series)
						var table = '<textarea id="view_1_4_1" onchange="view_1_4_1_change()" style="width: 100%; height: 100%; font-family: monospace; font-size: 14px; line-height: 1.6rem; color: rgb(0, 0, 0); border-color: rgb(51, 51, 51); background-color: rgb(255, 255, 255);">时间,数值\n';
						// var table = '<div style=" overflow-y:auto;height: 100%;width:100%;"><table style="width:100%;text-align:center"><tbody><tr>'
						// 			+ '<td><font color="red">时间</font></td>'
						// 			+ '<td>' + '数值' + '</td>'
						// 			+ '</tr>';
						for (var i = 0, l = axisData.length; i < l; i++) {
							// table += '<tr>'
							// 		+ '<td>' + axisData[i] + '</td>'
							// 		+ '<td>' + series[0].data[i] + '</td>'
							// 		+ '</tr>';
							table += axisData[i]+','+series[0].data[i]+'\n'
						}
						table += '</textarea>'
						// table += '</tbody></table></div>';
						// console.log(table)
						return table;
						// return option_1_4_1['xAxis']['data']
					},
					contentToOption:function(HTMLDomElement, opt){
						console.log("start save")
						// console.log(opt)
						// console.log(HTMLDomElement.firstChild)

						var plain_tex = HTMLDomElement.firstChild.innerHTML;
						var arr_tex = plain_tex.split('\n')
						// console.log(arr_tex)

						X_1_4 = [];
						Y_1_4 = [];

						for(var i = 1; i < arr_tex.length; ++i){
							cur_pair = arr_tex[i].split(',');
							if(cur_pair.length != 2){
								// console.alert('wrong data')
								continue
							}
							if(cur_pair[0] == '' || cur_pair[0] == undefined){
								continue
							}
							X_1_4.push(cur_pair[0]);
							Y_1_4.push(cur_pair[1]);
						}

						// console.log(X_1_4)
						// console.log(Y_1_4)

						option_1_4_1['series'][0]['data'] = Y_1_4;
						option_1_4_1['xAxis']['data'] = X_1_4;
						myChart_1_4.setOption(option_1_4_1);

						option_1_4_2['series'][0]['data'] = Y_1_4;
						option_1_4_2['xAxis']['data'] = X_1_4;
						

						var Link = document.createElement('a');
						Link.download = "3_1_4.json";
						Link.style.display = 'none';
						// 字符内容转变成blob地址
						var blob = new Blob(['callback_3_1_4('+JSON.stringify(option_1_4_1)+')']);
						Link.href = URL.createObjectURL(blob);
						// 触发点击 	
						document.body.appendChild(Link);
						Link.click();
						// 然后移除
						document.body.removeChild(Link);
						return opt
					},
				},
				magicType: {show: true, type: ['line', 'bar']},
				// restore: {show: true},
				saveAsImage: {show: true}
			}
		},
        legend: {
        data: ['社区卫生服务公众满意度'],
        textStyle: {
            color: '#F0F8FF'
        }
    },
		xAxis: {
			type: 'category',
			data: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
			axisLabel:{
				textStyle: { //图例文字的样式
					color: color_axis,
					fontSize: fontSize_axis_label
				},
			}
		},
		yAxis: {
			type: 'value',
            name: '合格率（%）',
			min: function (value) {
				return value.min - 20;
			},
			max: function (value) {
				return value.max + 20;
			},
			axisLabel:{
				textStyle: { //图例文字的样式
					color: color_axis,
					fontSize: fontSize_axis_label
				},
			}
		},
		series: [{
			// markPoint: {
            //     data: [
            //         {type: 'max', name: '最大值'},
            //         {type: 'min', name: '最小值'}
            //     ]
            // },
            name: '社区卫生服务公众满意度',
            data: [820, 932, 901, 934, 1290, 1330, 1320],
			type: 'line',
			smooth: true
		}],
	};

	var option_1_4_1 = {
		tooltip: {
			trigger: 'axis',
			axisPointer: {            // 坐标轴指示器，坐标轴触发有效
				type: 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
			}
		},
		toolbox: {
			show: true,
			itemSize: echart_toolbox_size, 
            orient: 'vertical',
			feature: {
				dataView: {
					show: true, 
					readOnly: false,
					// optionToContent: function(opt) {
    				// 	str = '<textarea id="view_2_1_4" style="width: 100%; height: 100%; font-family: monospace; font-size: 14px; line-height: 1.6rem; color: rgb(0, 0, 0); border-color: rgb(51, 51, 51); background-color: rgb(255, 255, 255);"></textarea>'
					// 	return str
					// },
					optionToContent: function(opt) {
						// console.log(opt)
						var axisData = opt['xAxis'][0]['data'];
						var series = opt['series'];
						console.log("start show")
						// console.log(axisData)
						// console.log(series)
						var table = '<textarea id="view_1_4_1" onchange="view_1_4_1_change()" style="width: 100%; height: 100%; font-family: monospace; font-size: 14px; line-height: 1.6rem; color: rgb(0, 0, 0); border-color: rgb(51, 51, 51); background-color: rgb(255, 255, 255);">时间,数值\n';
						// var table = '<div style=" overflow-y:auto;height: 100%;width:100%;"><table style="width:100%;text-align:center"><tbody><tr>'
						// 			+ '<td><font color="red">时间</font></td>'
						// 			+ '<td>' + '数值' + '</td>'
						// 			+ '</tr>';
						for (var i = 0, l = axisData.length; i < l; i++) {
							// table += '<tr>'
							// 		+ '<td>' + axisData[i] + '</td>'
							// 		+ '<td>' + series[0].data[i] + '</td>'
							// 		+ '</tr>';
							table += axisData[i]+','+series[0].data[i]+'\n'
						}
						table += '</textarea>'
						// table += '</tbody></table></div>';
						// console.log(table)
						return table;
						// return option_1_4_1['xAxis']['data']
					},
					contentToOption:function(HTMLDomElement, opt){
						console.log("start save")
						// console.log(opt)
						// console.log(HTMLDomElement.firstChild)

						var plain_tex = HTMLDomElement.firstChild.innerHTML;
						var arr_tex = plain_tex.split('\n')
						// console.log(arr_tex)

						X_1_4 = [];
						Y_1_4 = [];

						for(var i = 1; i < arr_tex.length; ++i){
							cur_pair = arr_tex[i].split(',');
							if(cur_pair.length != 2){
								// console.alert('wrong data')
								continue
							}
							if(cur_pair[0] == '' || cur_pair[0] == undefined){
								continue
							}
							X_1_4.push(cur_pair[0]);
							Y_1_4.push(cur_pair[1]);
						}

						// console.log(X_1_4)
						// console.log(Y_1_4)

						option_1_4_1['series'][0]['data'] = Y_1_4;
						option_1_4_1['xAxis']['data'] = X_1_4;
						myChart_1_4.setOption(option_1_4_1);

						option_1_4_2['series'][0]['data'] = Y_1_4;
						option_1_4_2['xAxis']['data'] = X_1_4;
						

						var Link = document.createElement('a');
						Link.download = "3_1_4.json";
						Link.style.display = 'none';
						// 字符内容转变成blob地址
						var blob = new Blob(['callback_3_1_4('+JSON.stringify(option_1_4_1)+')']);
						Link.href = URL.createObjectURL(blob);
						// 触发点击 	
						document.body.appendChild(Link);
						Link.click();
						// 然后移除
						document.body.removeChild(Link);
						return opt
					},
				},
				magicType: {show: true, type: ['line', 'bar']},
				// restore: {show: true},
				saveAsImage: {show: true}
			}
		},
		xAxis: {
			type: 'category',
			data: ['Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat', 'Sun'],
			axisLabel:{
				textStyle: { //图例文字的样式
					color: color_axis,
					fontSize: fontSize_axis_label
				},
			}
		},
		yAxis: {
			type: 'value',
            name: '合格率（%）',
			min: 0,
			// max: function (value) {
			// 	return value.max + 20;
			// },
			axisLabel:{
				textStyle: { //图例文字的样式
					color: color_axis,
					fontSize: fontSize_axis_label
				},
			}
		},
		series: [{
            name: '社区卫生服务公众满意度',
			data: [120, 200, 150, 80, 70, 110, 130],
			type: 'bar',
			showBackground: true,
			backgroundStyle: {
				color: 'rgba(180, 180, 180, 0.2)'
			}
		}],
        legend: {
            data: ['社区卫生服务公众满意度'],
            textStyle: {
                color: '#F0F8FF'
            }
        },
	};

	var X_1_4 = ori_data_1_4['xAxis']['data'];
	var Y_1_4 = ori_data_1_4['series'][0]['data'];




	option_1_4_2['series'][0]['data'] = Y_1_4;
	option_1_4_2['xAxis']['data'] = X_1_4;

	myChart_1_4.setOption(option_1_4_2);

	option_1_4_1['series'][0]['data'] = Y_1_4;
	option_1_4_1['xAxis']['data'] = X_1_4;

	// var arr_option_1_4 = [option_1_4_1, option_1_4_2];
	// var cur_option_1_4 = 0;

	// console.log('arr_option_1_4')
	// console.log(arr_option_1_4)

	// function change_option_1_4(){
	// 	console.log('exchange');
	// 	cur_option_1_4 = (cur_option_1_4+1)%arr_option_1_4.length;
	// 	myChart_1_4.setOption(arr_option_1_4[cur_option_1_4]);
	// }

	myChart_1_4.on('magictypechanged', function (params) {
		let o = { ...params };
		console.log(params)
		if(params.currentType == 'line'){
			o.newOption = option_1_4_2;
		}else if(params.currentType == 'bar'){
			o.newOption = option_1_4_1;
		}
		myChart_1_4.setOption(o.newOption, true);
	});


</script>

<!--配置页面 1-5 的Echart图-->
<!-- <script>
    var dom_1_5 = document.getElementById("container_1_5");
    var myChart_1_5 = echarts.init(dom_1_5, 'chalk');

    var data_1_5 = alldata["2010-2017年上海食品监督抽检合格率情况"]

    var xAxis_1_5 = []
    var yAxis_1_5a = []
    var yAxis_1_5b = []
    var yAxis_1_5c = []
    var yAxis_1_5d = []
    var yAxis_1_5e = []
    var yAxis_1_5f = []

    for (var i = 1; i < data_1_5[0].length; ++i) {
        xAxis_1_5.push(data_1_5[0][i])
        yAxis_1_5a.push(100*data_1_5[1][i])
        yAxis_1_5b.push(100*data_1_5[2][i])
        yAxis_1_5c.push(100*data_1_5[3][i])
        yAxis_1_5d.push(100*data_1_5[4][i])
        yAxis_1_5e.push(100*data_1_5[5][i])
        yAxis_1_5f.push(100*data_1_5[6][i])
    }


    var option_1_5 = {
        textStyle: {
            fontSize: fontSize_all_legend,
        },
        tooltip: {
            trigger: 'axis'
        },
        legend: {
            data: ['总体', '生产', '流通', '餐饮', '种养殖', '进出口'],
            textStyle: {
                color: '#F0F8FF'
            }
        },
        toolbox: {
            show: true,
            orient: 'vertical',
            left: 'right',
            top: 'center',
            feature: {
                mark: { show: true },
                dataView: { show: true, readOnly: false },
                magicType: { show: true, type: ['line', 'bar', 'tiled'] },
                restore: { show: true },
                saveAsImage: { show: true }
            }
        },
        xAxis: [
            {
                type: 'category',
                boundaryGap: true,
                data: xAxis_1_5,
                axisLabel: {
                    fontSize: fontSize_axis_label
                }
            }
        ],
        yAxis: [
            {
                type: 'value',
                max: 100,
                min: 85,
                minInterval: 5,
                name: '合格率（%）',
                axisLabel: {
                    fontSize: fontSize_axis_label
                }
            }
        ],
        series: [
            {
                name: '总体',
                type: 'bar',
                data: yAxis_1_5a,
            },
            {
                name: '生产',
                type: 'line',
                data: yAxis_1_5b,
            },
            {
                name: '流通',
                type: 'line',
                data: yAxis_1_5c,
            },
            {
                name: '餐饮',
                type: 'line',
                data: yAxis_1_5d,
            },
            {
                name: '种养殖',
                type: 'line',
                data: yAxis_1_5e,
            },
            {
                name: '进出口',
                type: 'line',
                data: yAxis_1_5f,
            },
        ]
    };

    if (option_1_5 && typeof option_1_5 === 'object') {
        myChart_1_5.setOption(option_1_5);
        console.log(data_1_5)
    }

</script> -->

<script>
    var ori_data_1_5 = {};

    function callback_3_1_5(res){
        ori_data_1_5 = res;
		console.log('3_1_5.json读取成功')
		console.log(ori_data_1_5);
    }
</script>
<script src="data/3_1_5.json?callback=callback_3_1_5"></script>

<script>

	var dom_1_5 = document.getElementById("container_1_5");
	var myChart_1_5 = echarts.init(dom_1_5, 'chalk');
	var app_1_5 = {};

	function view_3_1_5_change(){
		console.log("3_1_5 change")
		// Document.getElementById('view_2_1_5').innerHTML
		console.log(document.getElementById('view_3_1_5').value)
		document.getElementById('view_3_1_5').innerHTML = document.getElementById('view_3_1_5').value
	}

	//折线图
	var option_3_1_5 = {
        textStyle: {
            fontSize: fontSize_all_legend,
        },
        tooltip: {
			trigger: 'axis',
			axisPointer: {            // 坐标轴指示器，坐标轴触发有效
				type: 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
			}
		},
        calculable: true,
		toolbox: {
			show: true,
            orient: 'vertical',
            left: 'right',
            top: 'center',
			feature: {
				dataView: {
					show: true, 
					readOnly: false,
					optionToContent: function(opt) {
						// console.log(opt)
						var axisData = opt['xAxis'][0]['data'];
						var series = opt['series'];
						console.log("start show")
						// console.log(axisData)
						// console.log(series)
						var table = '<textarea id="view_3_1_5" onchange="view_3_1_5_change()" style="width: 100%; height: 100%; font-family: monospace; font-size: 14px; line-height: 1.6rem; color: rgb(0, 0, 0); border-color: rgb(51, 51, 51); background-color: rgb(255, 255, 255);">\n';
						// table += option_1_5_9['series'][0]['name'];
						// table += '\n';
						table += "年份"
						for(var i = 0; i < option_3_1_5['legend']['data'].length; ++i){
							table += (','+option_3_1_5['legend']['data'][i]);
						}
						table += '\n';

						for (var i = 0, l = axisData.length; i < l; i++) {
							table += axisData[i];
							for(var j = 0; j < series.length; ++j){
								// if(series[j].data[i] == undefined){
								// 	table += (',null'+series[j].data[i]);

								// }
								table += (','+series[j].data[i]);
							}
							table += '\n';
						}
						table += '</textarea>'
						// table += '</tbody></table></div>';
						// console.log(table)
						return table;
						// return option_2_1_5['xAxis']['data']
					},
					contentToOption:function(HTMLDomElement, opt){
						console.log("start save 1_5")

						var plain_tex = HTMLDomElement.firstChild.innerHTML;
						var arr_tex = plain_tex.split('\n')

						var legend_1_5 = arr_tex[0].split(',').slice(1);
						var valid_num = legend_1_5.length;

						var X_1_5 = [];
						var Y_1_5 = [];

						while(Y_1_5.length < valid_num){
							Y_1_5.push([])
						}

						for(var i = 1; i < arr_tex.length; ++i){
							cur_pair = arr_tex[i].split(',');
							// if(cur_pair.length != valid_num){
							// 	// console.alert('wrong data')
							// 	continue
							// }
							// if(cur_pair[0] == '' || cur_pair[0] == undefined){
							// 	continue
							// }
							
							if(cur_pair.length < valid_num+1 || cur_pair[0].length == 0){
								continue;
							}

							X_1_5.push(cur_pair[0]);

							for(var j = 1,k = 0; j < cur_pair.length && k < Y_1_5.length; ++j, ++k){
								Y_1_5[k].push(cur_pair[j]);
							}
							// Y_9_1.push(cur_pair[1]);
						}

						option_3_1_5['legend']['data'] = legend_1_5;
						option_3_1_5['xAxis'][0]['data'] = X_1_5;

						option_3_1_5['series'] = [];

						for(var i = 0; i < Y_1_5.length; ++i){
                            if(i==0)
                            {
                                option_3_1_5['series'].push({
								name: legend_1_5[i],
								type: "bar",
								data: Y_1_5[i],});
                            }else{
                                option_3_1_5['series'].push({
								name: legend_1_5[i],
								type: "line",
								data: Y_1_5[i],});
                            }

						}
						
						myChart_1_5.setOption(option_3_1_5);

						var Link = document.createElement('a');
						Link.download = "3_1_5.json";
						Link.style.display = 'none';
						// 字符内容转变成blob地址
						var blob = new Blob(['callback_3_1_5('+JSON.stringify(option_3_1_5)+')']);
						Link.href = URL.createObjectURL(blob);
						// 触发点击 	
						document.body.appendChild(Link);
						Link.click();
						// 然后移除
						document.body.removeChild(Link);
						return opt
					},
				},
				magicType: {show: true, type: ['line','bar','stack','tiled']},
				// restore: {show: true},
				saveAsImage: {show: true}
			}
		},
		legend: {
            data: ['总体', '生产', '流通', '餐饮', '种养殖', '进出口'],
            textStyle: { //图例文字的样式
				color: color_legend,
				fontSize: fontSize_all_legend
			},
		},
		xAxis: [
			{
				type: 'category',
				data: ['周一', '周二', '周三', '周四', '周五', '周六', '周日'],
                axisLabel:{
				textStyle: { //图例文字的样式
					color: color_axis,
					fontSize: fontSize_axis_label
				},
			}
			},
		],
		yAxis: [
			{
                type: 'value',
                max: 100,
                min: 85,
                minInterval: 5,
                name: '合格率（%）',
				axisLabel:{
					textStyle: { //图例文字的样式
						color: color_axis,
						fontSize: fontSize_axis_label
					},
				}
			}
		],
		series: [
			{
                name: '总体',
                type: 'bar',
				data: [120, 132, 101, 134, 90, 230, 210]
			},
			{
                name: '生产',
                type: 'line',
				data: [220, 182, 191, 234, 290, 330, 310],

			},
            {
                name: '流通',
                type: 'line',
				data: [220, 182, 191, 234, 290, 330, 310],

			},
            {
                name: '餐饮',
                type: 'line',
				data: [220, 182, 191, 234, 290, 330, 310],

			},
            {
                name: '种养殖',
                type: 'line',
				data: [220, 182, 191, 234, 290, 330, 310],

			},
            {
                name: '进出口',
                type: 'line',
				data: [220, 182, 191, 234, 290, 330, 310],

			}
		]
	};


	option_3_1_5['series'] = ori_data_1_5['series'];
	option_3_1_5['legend']['data'] = ori_data_1_5['legend']['data'];
	option_3_1_5['xAxis'][0]['data'] = ori_data_1_5['xAxis'][0]['data'];

	myChart_1_5.setOption(option_3_1_5, true);

</script>



<!--配置页面 1-6 的Echart图-->
<script>
    var ori_data_1_6 = {};

    function callback_3_1_6(res){
        ori_data_1_6 = res;
		console.log('3_1_6.json读取成功')
		console.log(ori_data_1_6);
    }
</script>
<script src="data/3_1_6.json?callback=callback_3_1_6"></script>

<script>
    var dom_1_6 = document.getElementById("container_1_6");
    var myChart_1_6 = echarts.init(dom_1_6, 'chalk');

    var data_1_6 = alldata["2008-2017年上海市各质量激励奖获得情况"]

    var xAxis_1_6 = []
    var yAxis_1_6a = []
    var yAxis_1_6b = []
    var yAxis_1_6c = []
    var yAxis_1_6d = []

    for (var i = 1; i < data_1_6.length; ++i) {
        xAxis_1_6.push(data_1_6[i][0])
        yAxis_1_6a.push(data_1_6[i][1])
        yAxis_1_6b.push(data_1_6[i][2])
        yAxis_1_6c.push(data_1_6[i][3])
        yAxis_1_6d.push(data_1_6[i][4])
    }

	function view_1_6_1_change(){
		console.log("1_6_1 change")
		// Document.getElementById('view_2_1_1').innerHTML
		console.log(document.getElementById('view_1_6_1').value)
		document.getElementById('view_1_6_1').innerHTML = document.getElementById('view_1_6_1').value
	}

    var option_1_6 = {
        textStyle: {
            fontSize: fontSize_all_legend,
        },
        tooltip: {
            trigger: 'axis'
        },
        legend: {
            data: ['“上海质量金奖”企业数', '“上海质量金奖”个人数', '市长质量奖组织企业数', '市长质量奖个人数'],
            textStyle: {
                color: '#F0F8FF'
            }
        },
        toolbox: {
            show: true,
            orient: 'vertical',
            left: 'right',
            top: 'center',
            feature: {
                dataView: {
					show: true, 
					readOnly: false,
					optionToContent: function(opt) {
						// console.log(opt)
						var axisData = opt['xAxis'][0]['data'];
						var series = opt['series'];
						console.log("start show")
						// console.log(axisData)
						// console.log(series)
						var table = '<textarea id="view_1_6_1" onchange="view_1_6_1_change()" style="width: 100%; height: 100%; font-family: monospace; font-size: 14px; line-height: 1.6rem; color: rgb(0, 0, 0); border-color: rgb(51, 51, 51); background-color: rgb(255, 255, 255);">\n';
						// table += option_9_1_1['series'][0]['name'];
						// table += '\n';
						table += "年份"
						for(var i = 0; i < option_1_6['legend']['data'].length; ++i){
							table += (','+option_1_6['legend']['data'][i]);
						}
						table += '\n';

						for (var i = 0, l = axisData.length; i < l; i++) {
							table += axisData[i];
							for(var j = 0; j < series.length; ++j){
								// if(series[j].data[i] == undefined){
								// 	table += (',null'+series[j].data[i]);

								// }
								table += (','+series[j].data[i]);
							}
							table += '\n';
						}
						table += '</textarea>'
						// table += '</tbody></table></div>';
						// console.log(table)
						return table;
						// return option_2_1_1['xAxis']['data']
					},
					contentToOption:function(HTMLDomElement, opt){
						console.log("start save 1_6")

						var plain_tex = HTMLDomElement.firstChild.innerHTML;
						var arr_tex = plain_tex.split('\n')

						var legend_1_6 = arr_tex[0].split(',').slice(1);
						var valid_num = legend_1_6.length;

						var X_1_6 = [];
						var Y_1_6 = [];

						while(Y_1_6.length < valid_num){
							Y_1_6.push([])
						}

						for(var i = 1; i < arr_tex.length; ++i){
							cur_pair = arr_tex[i].split(',');
							// if(cur_pair.length != valid_num){
							// 	// console.alert('wrong data')
							// 	continue
							// }
							// if(cur_pair[0] == '' || cur_pair[0] == undefined){
							// 	continue
							// }
							
							if(cur_pair.length < valid_num+1 || cur_pair[0].length == 0){
								continue;
							}

							X_1_6.push(cur_pair[0]);

							for(var j = 1,k = 0; j < cur_pair.length && k < Y_1_6.length; ++j, ++k){
								Y_1_6[k].push(cur_pair[j]);
							}
							// Y_9_1.push(cur_pair[1]);
						}

						option_1_6['legend']['data'] = legend_1_6;
						option_1_6['xAxis'][0]['data'] = X_1_6;

						option_1_6['series'] = [];

						for(var i = 0; i < Y_1_6.length; ++i){
							option_1_6['series'].push({
								name: legend_1_6[i],
								type: "bar",
								// stack: "抽查情况",
								data: Y_1_6[i],
							})
						}
						
						myChart_1_6.setOption(option_1_6);

						var Link = document.createElement('a');
						Link.download = "3_1_6.json";
						Link.style.display = 'none';
						// 字符内容转变成blob地址
						var blob = new Blob(['callback_3_1_6('+JSON.stringify(option_1_6)+')']);
						Link.href = URL.createObjectURL(blob);
						// 触发点击 	
						document.body.appendChild(Link);
						Link.click();
						// 然后移除
						document.body.removeChild(Link);
						return opt
					},
				},
                magicType: { show: true, type: ['line', 'bar'] },
                restore: { show: true },
                saveAsImage: { show: true }
            }
        },
        xAxis: [
            {
                type: 'category',
                boundaryGap: true,
                data: xAxis_1_6,
                axisLabel: {
                    fontSize: fontSize_axis_label
                }
            }
        ],
        yAxis: [
            {
                type: 'value',
                axisLabel: {
                    fontSize: fontSize_axis_label
                }
            }
        ],
        series: [
            {
                name: '“上海质量金奖”企业数',
                type: 'bar',
                data: yAxis_1_6a,
            },
            {
                name: '“上海质量金奖”个人数',
                type: 'bar',
                data: yAxis_1_6b,
            },
            {
                name: '市长质量奖组织企业数',
                type: 'bar',
                data: yAxis_1_6c,
            },
            {
                name: '市长质量奖个人数',
                type: 'bar',
                data: yAxis_1_6d,
            }
        ]
    };


	option_1_6['series'] = ori_data_1_6['series'];
	option_1_6['legend']['data'] = ori_data_1_6['legend']['data'];
	option_1_6['xAxis'][0]['data'] = ori_data_1_6['xAxis'][0]['data'];

	myChart_1_6.setOption(option_1_6, true);

    if (option_1_6 && typeof option_1_6 === 'object') {
        myChart_1_6.setOption(option_1_6);
        console.log(data_1_6)
    }

</script>

