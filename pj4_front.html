<!DOCTYPE html>

<html>

<head>
	<meta charset="utf-8" />
	<meta name="viewport"
		content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
	<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
	<title>大屏数据可视化 - 模板</title>
	<link rel="stylesheet" href="css/app.css" />
	<link rel="stylesheet" href="css/mine.css" />


	<!-- JQuery -->
	<script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

	<!-- 弹出窗口 -->
	<link rel="stylesheet" href="css/hover_window_2.css" />
	<link rel="stylesheet" href="css/hover_window.css" />
	<script type="text/javascript" src="js/hover_window_2.js"></script>

	<!-- echarts -->
	<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
	<script src="https://cdn.bootcdn.net/ajax/libs/echarts/4.6.0/echarts.min.js"></script>
	<script src='js/echarts-wordcloud.min.js'></script>
	<script type="text/javascript" src="js/color.js"></script>

	<!-- semantic UI -->
	<link href="https://cdn.bootcdn.net/ajax/libs/semantic-ui/2.4.1/components/icon.css" rel="stylesheet">
	<link href="https://cdn.bootcdn.net/ajax/libs/semantic-ui/2.4.1/components/button.css" rel="stylesheet">
	<link href="https://cdn.bootcdn.net/ajax/libs/semantic-ui/2.4.1/components/table.css" rel="stylesheet">
	<link rel="stylesheet" href="semantic-ui/semantic.min.css">
	<script type="text/javascript" src="js/jquery3.3.1.js"></script>
	<script type="text/javascript" src="semantic-ui/semantic.min.js"></script>

	<!-- <script src="json/data.json"></script> -->
	<script type="text/javascript" src="js/global_config.js"></script>
</head>

<body>
	<div class="header">
		<h1 class="header-title" style="font-size:40px">宏观经济数据展图</h1>
	</div>
	<div class="wrapper">
		<div class="content">
			<div class="col col-l">
				<div class="xpanel-wrapper xpanel-wrapper-50">
					<div class="xpanel xpanel-l-t">
						<div class="title">国家优质制造水平评价数据<a href="./pj4_1.html" style="color: white;"
								class="title_link"><i class="external square alternate icon"></i></a></div>

						<div id="container_1" style="height: 95%"></div>
					</div>
				</div>
				<div class="xpanel-wrapper xpanel-wrapper-55">
					<div class="xpanel xpanel-l-b">
						<div class="title">世界500强排行榜数据<a href="./pj4_2.html" style="color: white;" class="title_link"><i
									class="external square alternate icon"></i></a></div>
						<h1 class="subtitle">2018年世界品牌500强</h1>
						<div id="container_2" style="height: 85%"></div>
					</div>
				</div>
			</div>
			<div class="col col-c">
				<div class="xpanel-wrapper xpanel-wrapper-50">
					<div class="xpanel xpanel-c-t">
						<div class="title">企业相关指数数据<a href="./pj4_3.html" style="color: white;" class="title_link"><i
									class="external square alternate icon"></i></a></div>

						<div id="container_3" style="height: 95%"></div>
					</div>
				</div>
				<div class="xpanel-wrapper xpanel-wrapper-55">
					<div class="xpanel xpanel-c-b">
						<div class="title">年度质量抽查及投诉数据<a href="./pj4_4.html" style="color: white;" class="title_link"><i
									class="external square alternate icon"></i></a>
						</div>

						<div id="container_4" style="height: 85%"></div>
					</div>
				</div>
			</div>
			<div class="col col-r">
				<div class="xpanel-wrapper xpanel-wrapper-50">
					<div class="xpanel xpanel-r-t">
						<div class="title">高端装备制造业分行业评价数据<a href="./pj4_5.html" style="color: white;"
								class="title_link"><i class="external square alternate icon"></i></a></div>

						<div id="container_5" style="height: 95%"></div>
					</div>
				</div>
				<div class="xpanel-wrapper xpanel-wrapper-55">
					<div class="xpanel xpanel-r-b">
						<div class="title">中国与世界国民经济数据<a href="./pj4_6.html" style="color: white;" class="title_link"><i
									class="external square alternate icon"></i></a></div>
						<h1 class="subtitle">中国与世界平均工业增加值年增长率</h1>
						<div id="container_6" style="height: 85%"></div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<script>
			// initHoverWindowBySuffix('_1', submitHandler, function(){hideDialogID('_1')});
	</script>
</body>

</html>

<script>
    var data_1 = {};

    function demo_pj4_4(res){
        data_1 = res;
		console.log(data_1);
    }
</script>
<script src="data/data_pj4_4.json?callback=demo_pj4_4"></script>
<!--解决本地json跨域问题-->
<script>
	var data1 = {};
	var data2 = {};
	var data3 = {};
	var data4 = {};
	var data5 = {};
	var data6 = {};

	function callback1(res) {
		data1 = res;
	}
	function callback2(res) {
		data2 = res;
	}
	function callback3(res) {
		data3 = res;
	}
	function callback4(res) {
		data4 = res;
	}
	function callback5(res) {
		data5 = res;
	}
	function callback6(res) {
		data6 = res;
	}
</script>
<script>
	var data_front4 = {};

	function demo_pj4_4(res) {
		data_front4 = res;
		console.log(data_front4);
	}
</script>
<script src="data/data_pj4_4.json?callback=demo_pj4_4"></script>
<script>
	var data = {};

	function demo(res) {
		data_front_6 = res;
	}
</script>
<script src="data/data4_6_2.json"></script>

<script src="dataproc/pj4-data/data-1.json?callback=callback1"></script>
<script src="dataproc/pj4-data/data-2.json?callback=callback2"></script>
<script src="dataproc/pj4-data/data-3.json?callback=callback3"></script>
<script src="dataproc/pj4-data/data-4.json?callback=callback4"></script>
<script src="dataproc/pj4-data/data-5.json?callback=callback5"></script>
<script src="dataproc/pj4-data/data-6.json?callback=callback6"></script>


<!--配置页面 front-1 的Echart图-->
<!-- <script>
	var dom_1 = document.getElementById("container_1");
	var myChart_1 = echarts.init(dom_1, 'chalk');

	var data_1 = data1["1-国家优质制造指数"]

	var xAxis_1 = []
	var yAxis_1a = []
	var yAxis_1b = []
	var yAxis_1c = []
	var yAxis_1d = []
	var yAxis_1e = []
	var yAxis_1f = []
	var yAxis_1g = []

	for (var i = 1; i < data_1.length; ++i) {
		xAxis_1.push(data_1[i][0])
		yAxis_1a.push(data_1[i][1])
		yAxis_1b.push(data_1[i][2])
		yAxis_1c.push(data_1[i][3])
		yAxis_1d.push(data_1[i][4])
		yAxis_1e.push(data_1[i][5])
		yAxis_1f.push(data_1[i][6])
		yAxis_1g.push(data_1[i][7])
	}


	var option_1 = {
		textStyle: {
			fontSize: fontSize_all_legend,
		},
		tooltip: {
			trigger: 'axis'
		},
		legend: {
			data: ["中国", "美国", "德国", "日本", "英国", "法国", "韩国"],
			textStyle: {
				color: '#F0F8FF'
			}
		},
		toolbox: {
			show: true,
			orient: 'vertical',
			left: 'right',
			top: 'center',
			feature: {
				dataView: { show: true, readOnly: false },
				magicType: { show: true, type: ['line', 'bar'] },
				restore: { show: true },
				saveAsImage: { show: true }
			}
		},
		calculable: true,
		xAxis: [
			{
				type: 'category',
				data: xAxis_1,
				axisLabel: {
					fontSize: fontSize_axis_label
				}
			}
		],
		yAxis: [
			{
				type: 'value',
				name: '国家优质制造指数',
				axisLabel: {
					fontSize: fontSize_axis_label
				}
			},
		],
		series: [
			{
				name: '美国',
				type: 'line',
				lineStyle: {
					width: echart_lineStyle_width
				},
				data: yAxis_1b,
			},
			{
				name: '德国',
				type: 'line',
				lineStyle: {
					width: echart_lineStyle_width
				},
				data: yAxis_1c,
			},
			{
				name: '日本',
				type: 'line',
				lineStyle: {
					width: echart_lineStyle_width
				},
				data: yAxis_1d,
			},
			{
				name: '中国',
				type: 'line',
				lineStyle: {
					width: echart_lineStyle_width_large
				},
				data: yAxis_1a,
			},
			{
				name: '英国',
				type: 'line',
				lineStyle: {
					width: echart_lineStyle_width
				},
				data: yAxis_1e,
			},
			{
				name: '法国',
				type: 'line',
				lineStyle: {
					width: echart_lineStyle_width
				},
				data: yAxis_1f,
			},
			{
				name: '韩国',
				type: 'line',
				lineStyle: {
					width: echart_lineStyle_width
				},
				data: yAxis_1g,
			},
		]
	};



	if (option_1 && typeof option_1 === 'object') {
		myChart_1.setOption(option_1);
		console.log(data_1)
	}

</script> -->
<script>
    var ori_data_1_1 = {};

    function callback_4_0_1(res){
        ori_data_1_1 = res;
		console.log('4_0_1.json读取成功')
		console.log(ori_data_1_1);
    }
</script>
<script src="data/4_0_1.json?callback=callback_4_0_1"></script>

<script>

	var dom_1_1 = document.getElementById("container_1");
	var myChart_1_1 = echarts.init(dom_1_1, 'chalk');
	var app_1_1 = {};

	function view_4_0_1_change(){
		console.log("4_0_1 change")
		// Document.getElementById('view_2_1_1').innerHTML
		console.log(document.getElementById('view_4_0_1').value)
		document.getElementById('view_4_0_1').innerHTML = document.getElementById('view_4_0_1').value
	}

	//折线图
	var option_4_0_1 = {
		textStyle: {
            fontSize: fontSize_all_legend,
        },
		tooltip: {
			trigger: 'axis',
			axisPointer: {            // 坐标轴指示器，坐标轴触发有效
				type: 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
			}
		},
		toolbox: {
			show: true,
			itemSize: echart_toolbox_size, 
            orient: 'vertical',
			feature: {
				dataView: {
					show: true, 
					readOnly: false,
					optionToContent: function(opt) {
						// console.log(opt)
						var axisData = opt['xAxis'][0]['data'];
						var series = opt['series'];
						console.log("start show")
						// console.log(axisData)
						// console.log(series)
						var table = '<textarea id="view_4_0_1" onchange="view_4_0_1_change()" style="width: 100%; height: 100%; font-family: monospace; font-size: 14px; line-height: 1.6rem; color: rgb(0, 0, 0); border-color: rgb(51, 51, 51); background-color: rgb(255, 255, 255);">\n';
						// table += option_9_1_1['series'][0]['name'];
						// table += '\n';
						table += "年份"
						for(var i = 0; i < option_4_0_1['legend']['data'].length; ++i){
							table += (','+option_4_0_1['legend']['data'][i]);
						}
						table += '\n';

						for (var i = 0, l = axisData.length; i < l; i++) {
							table += axisData[i];
							for(var j = 0; j < series.length; ++j){
								// if(series[j].data[i] == undefined){
								// 	table += (',null'+series[j].data[i]);

								// }
								table += (','+series[j].data[i]);
							}
							table += '\n';
						}
						table += '</textarea>'
						// table += '</tbody></table></div>';
						// console.log(table)
						return table;
						// return option_2_1_1['xAxis']['data']
					},
					contentToOption:function(HTMLDomElement, opt){
						console.log("start save 1_1")

						var plain_tex = HTMLDomElement.firstChild.innerHTML;
						var arr_tex = plain_tex.split('\n')

						var legend_1_1 = arr_tex[0].split(',').slice(1);
						var valid_num = legend_1_1.length;

						var X_1_1 = [];
						var Y_1_1 = [];

						while(Y_1_1.length < valid_num){
							Y_1_1.push([])
						}

						for(var i = 1; i < arr_tex.length; ++i){
							cur_pair = arr_tex[i].split(',');
							// if(cur_pair.length != valid_num){
							// 	// console.alert('wrong data')
							// 	continue
							// }
							// if(cur_pair[0] == '' || cur_pair[0] == undefined){
							// 	continue
							// }
							
							if(cur_pair.length < valid_num+1 || cur_pair[0].length == 0){
								continue;
							}

							X_1_1.push(cur_pair[0]);

							for(var j = 1,k = 0; j < cur_pair.length && k < Y_1_1.length; ++j, ++k){
								Y_1_1[k].push(cur_pair[j]);
							}
							// Y_9_1.push(cur_pair[1]);
						}

						option_4_0_1['legend']['data'] = legend_1_1;
						option_4_0_1['xAxis'][0]['data'] = X_1_1;

						option_4_0_1['series'] = [];

						for(var i = 0; i < Y_1_1.length; ++i){
							option_4_0_1['series'].push({
								name: legend_1_1[i],
								type: "line",//折线图
								// stack: "抽查情况",
								data: Y_1_1[i],
							})
						}
						
						myChart_1_1.setOption(option_4_0_1);

						var Link = document.createElement('a');
						Link.download = "4_0_1.json";
						Link.style.display = 'none';
						// 字符内容转变成blob地址
						var blob = new Blob(['callback_4_0_1('+JSON.stringify(option_4_0_1)+')']);
						Link.href = URL.createObjectURL(blob);
						// 触发点击 	
						document.body.appendChild(Link);
						Link.click();
						// 然后移除
						document.body.removeChild(Link);
						return opt
					},
				},
				magicType: {show: true, type: ['line','bar','stack','tiled']},
				// restore: {show: true},
				saveAsImage: {show: true}
			}
		},
		legend: {
			data: ["中国", "美国", "德国", "日本", "英国", "法国", "韩国"],
			textStyle: { //图例文字的样式
				color: color_legend,
				fontSize: fontSize_all_legend
			},
		},
		grid: {
			left: '3%',
			right: '4%',
			bottom: '3%',
			containLabel: true
		},
		xAxis: [
			{
				type: 'category',
				data: ['周一', '周二', '周三', '周四', '周五', '周六', '周日'],
			axisLabel:{
				textStyle: { //图例文字的样式
					color: color_axis,
					fontSize: fontSize_axis_label
				},
			}
			}
		],
		yAxis: [
			{
				type: 'value',
				name: '国家优质制造指数',
				axisLabel:{
					textStyle: { //图例文字的样式
						color: color_axis,
						fontSize: fontSize_axis_label
					},
				}
				// max: 365,
			}
		],
		series: [
			{
				name: '美国',
				type: 'line',
				// stack: '抽查情况',
				data: [120, 132, 101, 134, 90, 230, 210]
			},
			{
				name: '德国',
				type: 'line',
				// stack: '抽查情况',
				data: [220, 182, 191, 234, 290, 330, 310]
			},
			{
				name: '日本',
				type: 'line',
				// stack: '抽查情况',
				data: [120, 132, 101, 134, 90, 230, 210]
			},
			{
				name: '中国',
				type: 'line',
				// stack: '抽查情况',
				data: [220, 182, 191, 234, 290, 330, 310]
			},
			{
				name: '英国',
				type: 'line',
				// stack: '抽查情况',
				data: [220, 182, 191, 234, 290, 330, 310]
			},
			{
				name: '法国',
				type: 'line',
				// stack: '抽查情况',
				data: [220, 182, 191, 234, 290, 330, 310]
			},
			{
				name: '韩国',
				type: 'line',
				// stack: '抽查情况',
				data: [220, 182, 191, 234, 290, 330, 310]
			}


		]
	};


	option_4_0_1['series'] = ori_data_1_1['series'];
	option_4_0_1['legend']['data'] = ori_data_1_1['legend']['data'];
	option_4_0_1['xAxis'][0]['data'] = ori_data_1_1['xAxis'][0]['data'];

	myChart_1_1.setOption(option_4_0_1, true);

</script>



<!--配置页面 front-2 的Echart图-->
<script>
	var dom_2 = document.getElementById("container_2");
	//var myChart_2 = echarts.init(dom_2, 'chalk');
	var myChart_2 = echarts.init(dom_2);

	var data_2_country = [
		{
			name: '美国',
			value: 222
		},
		{
			name: '法国',
			value: 43
		},
		{
			name: '英国',
			value: 43
		},
		{
			name: '日本',
			value: 39
		},
		{
			name: '中国',
			value: 38
		},
		{
			name: '德国',
			value: 26
		},
		{
			name: '瑞士',
			value: 21
		},
		{
			name: '意大利',
			value: 15
		},
		{
			name: '荷兰',
			value: 9
		},
		{
			name: '韩国',
			value: 7
		},
		{
			name: '其他',
			value: 37
		},
	];

	var data_2_industry = [
		{ name: '汽车与零件', value: 36 },
		{ name: '传媒', value: 35 },
		{ name: '食品与饮料', value: 33 },
		{ name: '互联网', value: 24 },
		{ name: '能源', value: 23 },
		{ name: '零售', value: 22 },
		{ name: '计算机与通讯', value: 20 },
		{ name: '日化', value: 18 },
		{ name: '银行', value: 17 },
		{ name: '保险', value: 16 },
		{ name: '奢侈品', value: 16 },
		{ name: '电信', value: 15 },
		{ name: '多元金融', value: 14 },
		{ name: '咨询', value: 13 },
		{ name: '服装服饰', value: 11 },
		{ name: '钟表与珠宝', value: 11 },
		{ name: '防务与飞机制造', value: 10 },
		{ name: '航空', value: 10 },
		{ name: '教育', value: 10 },
		{ name: '软件', value: 10 },
		{ name: '制药', value: 10 },
		{ name: '其他', value: 126 }
	]

	option_2 = {
		title: [{
			subtext: '按国家分布',
			left: '30%',
			top: '85%',
			subtextStyle:{
				fontSize: fontSize_all_title
			},
			textAlign: 'center'
		}, {
			subtext: '按行业分布',
			left: '70%',
			top: '85%',
			textAlign: 'center',
			subtextStyle:{
				fontSize: fontSize_all_title
			},
		}],
		tooltip: {
			trigger: 'item',
			formatter: '{b} : {c} ({d}%)'
		},
		series: [{
			type: 'pie',
			radius: '60%',
			center: ['50%', '50%'],
			data: data_2_country,
			animation: false,
			label: {
				position: 'outer',
				//alignTo: 'labelLine',
				bleedMargin: 5
			},
			left: 0,
			right: '40%',
			top: 0,
			bottom: '10%'
		}, {
			type: 'pie',
			radius: '60%',
			center: ['50%', '50%'],
			data: data_2_industry,
			animation: false,
			label: {
				position: 'outer',
				//alignTo: 'labelLine',
				margin: 20
			},
			left: '40%',
			right: 0,
			top: 0,
			bottom: '10%'
		}]
	};



	if (option_2 && typeof option_2 === 'object') {
		myChart_2.setOption(option_2);
		console.log(data_2)
	}

</script>


<!--配置页面 front-3 的Echart图-->
<script>
	var dom_3 = document.getElementById("container_3");
	var myChart_3 = echarts.init(dom_3, 'chalk');

	var data_3 = data3["3-注册登记企业数（万户）"]

	var xAxis_3 = []
	var yAxis_3a = []

	for (var i = 1; i < data_3.length; ++i) {
		xAxis_3.push(data_3[i][0])
		yAxis_3a.push(data_3[i][1])
	}

	option_3 = {
		color: '#ffff00',
		legend: {
			show: true,
			data: ['企业数']
		},
		grid: {
			top: 100
		},
		angleAxis: {
			type: 'category',
			data: xAxis_3,
			boundaryGap: true,
			max: (data_3.length - 1),

		},
		tooltip: {
			show: true,
		},
		radiusAxis: {
		},
		polar: {
		},
		series: [{
			type: 'bar',
			data: yAxis_3a,
			coordinateSystem: 'polar',
			name: '企业数'
		}]
	};


	if (option_3 && typeof option_3 === 'object') {
		myChart_3.setOption(option_3);
		console.log(data_3)
	}

</script>



<!--配置页面 front-4 的Echart图-->
<!-- <script>

	var dom_4 = document.getElementById("container_4");
	var myChart_4 = echarts.init(dom_4, 'chalk');
	var app_4 = {};

	console.log(data_front4["4-1投诉问题类别数量分布（件）"])
	var data_4 = data_front4["4-1投诉问题类别数量分布（件）"];
	var class_4 = data_4[0];

	var option_4_1 = {
		tooltip: {
			trigger: 'axis',
			axisPointer: {            // 坐标轴指示器，坐标轴触发有效
				type: 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
			},

		},
		toolbox: {
			show: true,
			itemSize: echart_toolbox_size,
			orient: 'vertical',
			feature: {
				dataView: { show: true, readOnly: false },
				magicType: { show: true, type: ['line', 'bar', 'stack', 'tiled'] },
				// restore: {show: true},
				saveAsImage: { show: true },
				myTool2: {
					show: true,
					title: '切换到饼图',
					icon: 'image://img/shuju-data.png',
					onclick: function () {
						myChart_4.setOption(option_4_2, true);
						curIsPie_4 = true;
					}
				},
				myTool3: {
					show: true,
					title: '切换到词云',
					icon: 'image://img/yun.png',
					onclick: function () {
						myChart_4.setOption(option_4_3, true);
						curIsPie_4 = false;
					}
				},
			}
		},
		legend: {
			data: class_4,
			textStyle: { //图例文字的样式
				color: color_legend,
				fontSize: fontSize_all_legend
			},
		},
		grid: {
			left: '3%',
			right: '4%',
			bottom: '3%',
			containLabel: true
		},
		xAxis: [
			{
				type: 'category',
				data: ['周一', '周二', '周三', '周四', '周五', '周六', '周日'],
				axisLabel: {
					textStyle: { //图例文字的样式
						color: color_axis,
						fontSize: fontSize_axis_label
					},
				}
			}
		],
		yAxis: [
			{
				type: 'value',
				axisLabel: {
					textStyle: { //图例文字的样式
						color: color_axis,
						fontSize: fontSize_axis_label
					},
				}
			}
		],
		series: [
			{
				name: '锅炉',
				type: 'bar',
				stack: '抽查情况',
				data: [
					12028,
					11596,
					12355,
					12213,
					9377,
					8457,
					7937,
					7850,
					7608,
					6029
				]
			},
			{
				name: '固定式压力容器',
				type: 'bar',
				stack: '抽查情况',
				data: [
					96831,
					107986,
					125706,
					123542,
					102186,
					106608,
					109989,
					105420,
					101213,
					103377
				]
			},
			{
				name: '移动式电容器',
				type: 'bar',
				stack: '抽查情况',
				data: [
					687,
					684,
					771,
					814,
					820,
					831,
					840,
					852,
					860,
					0
				]
			},
			{
				name: '电梯',
				type: 'bar',
				stack: '抽查情况',
				data: [
					107632,
					118447,
					133397,
					149147,
					157528,
					171802,
					184543,
					201925,
					222103,
					238664
				]
			},
			{
				name: '起重机械',
				type: 'bar',
				stack: '抽查情况',
				data: [
					102437,
					111691,
					96244,
					101251,
					89661,
					93972,
					96611,
					88921,
					80216,
					75868
				]
			},
			{
				name: '场(厂)内机动车辆',
				type: 'bar',
				stack: '抽查情况',
				data: [
					14491,
					17494,
					43707,
					52554,
					55302,
					59883,
					64701,
					67329,
					69870,
					73238
				]
			},
			{
				name: '大型游乐设施',
				type: 'bar',
				stack: '抽查情况',
				data: [
					294,
					323,
					338,
					308,
					312,
					314,
					311,
					308,
					305,
					303
				]
			},
			{
				name: '客运索道',
				type: 'bar',
				stack: '抽查情况',
				data: [
					2,
					2,
					1,
					1,
					1,
					1,
					1,
					1,
					1,
					1
				]
			}
		]
	};

	// var 20 = 25
	var option_4_2 = {
		toolbox: {
			show: true,
			itemSize: echart_toolbox_size,
			orient: 'vertical',
			feature: {
				dataView: { show: true, readOnly: false },
				// magicType: {show: true, type: ['line','bar']},
				// restore: {show: true},
				saveAsImage: { show: true },

				myTool1: {
					show: true,
					title: '切换到柱状图',
					icon: 'image://img/shuju-bar.png',
					onclick: function () {
						myChart_4.setOption(option_4_1, true);
						curIsPie_4 = false;
					}
				},
				myTool3: {
					show: true,
					title: '切换到词云',
					icon: 'image://img/yun.png',
					onclick: function () {
						myChart_4.setOption(option_4_3, true);
						curIsPie_4 = false;
					}
				},
			}
		},
		legend: {
			data: class_4,
			textStyle: { //图例文字的样式
				color: color_legend,
				fontSize: fontSize_all_legend
			},
		},
		tooltip: {},
		dataset: {
			source: [
				['product', '2008', '2009', '2010', '2011', '2012', '2013', '2014', '2015', '2016', '2017'],
				[
					"锅炉",
					12028,
					11596,
					12355,
					12213,
					9377,
					8457,
					7937,
					7850,
					7608,
					6029
				],
				[
					"固定式压力容器",
					96831,
					107986,
					125706,
					123542,
					102186,
					106608,
					109989,
					105420,
					101213,
					103377
				],
				[
					"移动式电容器",
					687,
					684,
					771,
					814,
					820,
					831,
					840,
					852,
					860,
					0
				],
				[
					"电梯",
					107632,
					118447,
					133397,
					149147,
					157528,
					171802,
					184543,
					201925,
					222103,
					238664
				],
				[
					"起重机械",
					102437,
					111691,
					96244,
					101251,
					89661,
					93972,
					96611,
					88921,
					80216,
					75868
				],
				[
					"场(厂)内机动车辆",
					14491,
					17494,
					43707,
					52554,
					55302,
					59883,
					64701,
					67329,
					69870,
					73238
				],
				[
					"大型游乐设施",
					294,
					323,
					338,
					308,
					312,
					314,
					311,
					308,
					305,
					303
				],
				[
					"客运索道",
					2,
					2,
					1,
					1,
					1,
					1,
					1,
					1,
					1,
					1
				]
			]
		},
		series: [{
			type: 'pie',
			radius: '40%',
			// radius: 60,
			name: '2014',
			center: ['16.6%', '30%'],
			label: {
				formatter: '{d}%',
				color: color_axis
			},
			encode: {
				itemName: 'product',
				value: '2014'
			},
			// roseType: "radius"
			// No encode specified, by default, it is '2012'.
		}, {
			type: 'pie',
			radius: '40%',
			// radius: 60,
			name: '2015',
			center: ['50%', '30%'],
			label: {
				formatter: '{d}%',
				color: color_axis
			},
			encode: {
				itemName: 'product',
				value: '2015'
			},
			// roseType: "radius"
		}, {
			type: 'pie',
			radius: '40%',
			// radius: 60,
			name: '2016',
			center: ['83.4%', '30%'],
			label: {
				formatter: '{d}%',
				color: color_axis
			},
			encode: {
				itemName: 'product',
				value: '2016'
			},
			// roseType: "radius"
		}, {
			type: 'pie',
			radius: '40%',
			// radius: 60,
			name: '2017',
			center: ['16.6%', '75%'],
			label: {
				formatter: '{d}%',
				color: color_axis
			},
			encode: {
				itemName: 'product',
				value: '2017'
			},
			// roseType: "radius"
			// No encode specified, by default, it is '2012'.
		}, {
			type: 'pie',
			radius: '40%',
			name: '2018',
			center: ['50%', '75%'],
			label: {
				formatter: '{d}%',
				color: color_axis
			},
			encode: {
				itemName: 'product',
				value: '2018'
			},
			// roseType: "radius"
			// No encode specified, by default, it is '2012'.
		}, {
			type: 'pie',
			radius: '40%',
			name: '2019',
			center: ['83.4%', '75%'],
			label: {
				formatter: '{d}%',
				color: color_axis
			},
			encode: {
				itemName: 'product',
				value: '2019'
			},
			// roseType: "radius"
			// No encode specified, by default, it is '2012'.
		},]
	};

	option_4_3 = {
		// title: {
		// 	text: '热点分析',
		// 	link: 'https://www.baidu.com/s?wd=' + encodeURIComponent('ECharts'),
		// 	x: 'center',
		// 	textStyle: {
		// 		fontSize: 23
		// 	}

		// },
		// backgroundColor: '#F7F7F7',
		tooltip: {
			show: true
		},
		toolbox: {
			show: true,
			itemSize: echart_toolbox_size,
			orient: 'vertical',
			feature: {
				dataView: { show: true, readOnly: false },
				saveAsImage: { show: true },
				myTool1: {
					show: true,
					title: '切换到柱状图',
					icon: 'image://img/shuju-bar.png',
					onclick: function () {
						myChart_4.setOption(option_4_1, true);
						curIsPie_4 = false;
					}
				},
				myTool2: {
					show: true,
					title: '切换到饼图',
					icon: 'image://img/shuju-data.png',
					onclick: function () {
						myChart_4.setOption(option_4_2, true);
						curIsPie_4 = true;
					}
				}
			}
		},
		series: [{
			name: '投诉问题类别数量分布',
			type: 'wordCloud',
			// size: ['9%', '99%'],
			sizeRange: [40, 120],
			//textRotation: [0, 45, 90, -45],
			rotationRange: [-45, 90],
			//shape: 'circle',
			textPadding: 0,
			autoSize: {
				enable: false,
				minSize: 30
			},
			textStyle: {
				normal: {
					color: function () {
						var arr = [
							"#fc97af",
							"#87f7cf",
							"#f7f494",
							"#72ccff",
							"#f7c5a0",
							"#d4a4eb",
							"#d2f5a6",
							"#76f2f2"
						];
						return arr[Math.round(Math.random() * arr.length)];
						// return 'rgb(' + [
						// 	Math.round(Math.random() * 160),
						// 	Math.round(Math.random() * 160),
						// 	Math.round(Math.random() * 160)
						// ].join(',') + ')';
					}
				},
				emphasis: {
					shadowBlur: 10,
					shadowColor: '#333'
				}
			},
			data: [{
				name: "Jayfee",
				value: 666
			}, {
				name: "Nancy",
				value: 520
			}]
		}]
	};

	var X_4 = [];
	var Y_4 = {};

	for (var i = 0; i < class_4.length; ++i) {
		Y_4[class_4[i]] = [];
	}

	for (var i = 1; i < data_4.length; ++i) {
		X_4.push(data_4[i][0].toString());
		for (var j = 1; j < data_4[i].length; ++j) {
			Y_4[class_4[j - 1]].push(data_4[i][j])
		}
	}

	var series_4_1 = []

	for (var i = 0; i < class_4.length; ++i) {
		series_4_1.push({
			name: class_4[i],
			type: 'bar',
			stack: '抽查情况',
			data: Y_4[class_4[i]]
		})
	}

	option_4_1['xAxis'][0]['data'] = X_4;
	option_4_1['series'] = series_4_1;
	console.log(option_4_1['series'])


	var source_4_2 = []

	var arr_tmp = ['product']
	source_4_2.push(arr_tmp.concat(X_4));

	for (var i = 0; i < class_4.length; ++i) {
		arr_tmp = [class_4[i]];
		source_4_2.push(arr_tmp.concat(Y_4[class_4[i]]));
	}
	option_4_2['dataset']['source'] = source_4_2;
	console.log(option_4_2['dataset']['source'])



	var data_4_3 = []

	for (var i = 0; i < class_4.length; ++i) {
		data_4_3.push({
			name: class_4[i],
			value: Y_4[class_4[i]]
		})
	}

	option_4_3.series[0].data = data_4_3;


	myChart_4.setOption(option_4_3);
	var curIsPie_4 = true;

</script> -->

<script>
    var ori_data_4_5 = {};

    function callback_4_4_5(res){
        ori_data_4_5 = res;
		console.log('4_4_5.json读取成功')
		console.log(ori_data_4_5);
    }
</script>
<script src="data/4_4_5.json?callback=callback_4_4_5"></script>

<script>

	var dom_4_5 = document.getElementById("container_4");
	var myChart_4_5 = echarts.init(dom_4_5, 'chalk');
	var app_4_5 = {};

	function view_4_5_1_change(){
		console.log("4_5_1 change")
		// Document.getElementById('view_2_1_1').innerHTML
		console.log(document.getElementById('view_4_5_1').value)
		document.getElementById('view_4_5_1').innerHTML = document.getElementById('view_4_5_1').value
	}

	function view_4_5_3_change(){
		console.log("4_5_3 change")
		// Document.getElementById('view_2_1_1').innerHTML
		console.log(document.getElementById('view_4_5_3').value)
		document.getElementById('view_4_5_3').innerHTML = document.getElementById('view_4_5_3').value
	}

	console.log(data_1["4-1投诉问题类别数量分布（件）"])
	var data_4_5 = data_1["4-1投诉问题类别数量分布（件）"];
	var class_4_5 = data_4_5[0];

	var option_4_5_1 = {
		tooltip: {
			trigger: 'axis',
			axisPointer: {            // 坐标轴指示器，坐标轴触发有效
				type: 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
			},
			
		},
		toolbox: {
			show: true,
			itemSize: echart_toolbox_size, 
            orient: 'vertical',
			feature: {
				dataView: {
					show: true, 
					readOnly: false,
					optionToContent: function(opt) {
						// console.log(opt)
						var axisData = opt['xAxis'][0]['data'];
						var series = opt['series'];
						console.log("start show")
						// console.log(axisData)
						// console.log(series)
						var table = '<textarea id="view_4_5_1" onchange="view_4_5_1_change()" style="width: 100%; height: 100%; font-family: monospace; font-size: 14px; line-height: 1.6rem; color: rgb(0, 0, 0); border-color: rgb(51, 51, 51); background-color: rgb(255, 255, 255);">\n';
						// table += option_9_1_1['series'][0]['name'];
						// table += '\n';
						table += "年份"
						for(var i = 0; i < option_4_5_1['legend']['data'].length; ++i){
							table += (','+option_4_5_1['legend']['data'][i]);
						}
						table += '\n';

						for (var i = 0, l = axisData.length; i < l; i++) {
							table += axisData[i];
							for(var j = 0; j < series.length; ++j){
								// if(series[j].data[i] == undefined){
								// 	table += (',null'+series[j].data[i]);

								// }
								table += (','+series[j].data[i]);
							}
							table += '\n';
						}
						table += '</textarea>'
						// table += '</tbody></table></div>';
						// console.log(table)
						return table;
						// return option_2_1_1['xAxis']['data']
					},
					contentToOption:function(HTMLDomElement, opt){
						console.log("start save 4_5")

						var plain_tex = HTMLDomElement.firstChild.innerHTML;
						var arr_tex = plain_tex.split('\n')

						var legend_4_5 = arr_tex[0].split(',').slice(1);
						var valid_num = legend_4_5.length;

						var X_4_5 = [];
						var Y_4_5 = [];

						while(Y_4_5.length < valid_num){
							Y_4_5.push([])
						}

						for(var i = 1; i < arr_tex.length; ++i){
							cur_pair = arr_tex[i].split(',');
							// if(cur_pair.length != valid_num){
							// 	// console.alert('wrong data')
							// 	continue
							// }
							// if(cur_pair[0] == '' || cur_pair[0] == undefined){
							// 	continue
							// }
							
							if(cur_pair.length < valid_num+1 || cur_pair[0].length == 0){
								continue;
							}

							X_4_5.push(cur_pair[0]);

							for(var j = 1,k = 0; j < cur_pair.length && k < Y_4_5.length; ++j, ++k){
								Y_4_5[k].push(cur_pair[j]);
							}
							// Y_9_1.push(cur_pair[1]);
						}

						option_4_5_1['legend']['data'] = legend_4_5;
						option_4_5_1['xAxis'][0]['data'] = X_4_5;

						option_4_5_1['series'] = [];

						for(var i = 0; i < Y_4_5.length; ++i){
							option_4_5_1['series'].push({
								name: legend_4_5[i],
								type: "bar",
								// stack: "抽查情况",
								data: Y_4_5[i],
							})
						}
						
						myChart_4_5.setOption(option_4_5_1);

						var Link = document.createElement('a');
						Link.download = "4_4_5.json";
						Link.style.display = 'none';
						// 字符内容转变成blob地址
						var blob = new Blob(['callback_4_4_5('+JSON.stringify(option_4_5_1)+')']);
						Link.href = URL.createObjectURL(blob);
						// 触发点击 	
						document.body.appendChild(Link);
						Link.click();
						// 然后移除
						document.body.removeChild(Link);
						return opt
					},
				},
				magicType: {show: true, type: ['line','bar','stack','tiled']},
				// restore: {show: true},
				saveAsImage: {show: true},
				// myTool2: {
				// 	show: true,
				// 	title: '切换到饼图',
				// 	icon: 'image://img/shuju-data.png',
				// 	onclick: function (){
				// 		myChart_4_5.setOption(option_4_5_2, true);
				// 		curIsPie_4_5 = true;
				// 	}
				// },
				myTool3: {
					show: true,
					title: '切换到词云',
					icon: 'image://img/yun.png',
					onclick: function (){
						myChart_4_5.setOption(option_4_5_3, true);
						curIsPie_4_5 = false;
					}
				},
			}
		},
		legend: {
			data: class_4_5,
			textStyle: { //图例文字的样式
				color: color_legend,
				fontSize: fontSize_all_legend
			},
		},
		grid: {
			left: '3%',
			right: '4%',
			bottom: '3%',
			containLabel: true
		},
		xAxis: [
			{
				type: 'category',
				data: ['周一', '周二', '周三', '周四', '周五', '周六', '周日'],
				axisLabel:{
					textStyle: { //图例文字的样式
						color: color_axis,
						fontSize: fontSize_axis_label
					},
				}
			}
		],
		yAxis: [
			{
				type: 'value',
				axisLabel:{
					textStyle: { //图例文字的样式
						color: color_axis,
						fontSize: fontSize_axis_label
					},
				}
			}
		],
		series: [
			{
				name: '锅炉',
				type: 'bar',
				// stack: '抽查情况',
				data: [
					12028,
					11596,
					12355,
					12213,
					9377,
					8457,
					7937,
					7850,
					7608,
					6029
				]
			},
			{
				name: '固定式压力容器',
				type: 'bar',
				// stack: '抽查情况',
				data: [
					96831,
					107986,
					125706,
					123542,
					102186,
					106608,
					109989,
					105420,
					101213,
					103377
				]
			},
			{
				name: '移动式电容器',
				type: 'bar',
				// stack: '抽查情况',
				data: [
					687,
					684,
					771,
					814,
					820,
					831,
					840,
					852,
					860,
					0
				]
			},
			{
				name: '电梯',
				type: 'bar',
				// stack: '抽查情况',
				data: [
					107632,
					118447,
					133397,
					149147,
					157528,
					171802,
					184543,
					201925,
					222103,
					238664
				]
			},
			{
				name: '起重机械',
				type: 'bar',
				// stack: '抽查情况',
				data: [
					102437,
					111691,
					96244,
					101251,
					89661,
					93972,
					96611,
					88921,
					80216,
					75868
				]
			},
			{
				name: '场(厂)内机动车辆',
				type: 'bar',
				// stack: '抽查情况',
				data: [
					14491,
					17494,
					43707,
					52554,
					55302,
					59883,
					64701,
					67329,
					69870,
					73238
				]
			},
			{
				name: '大型游乐设施',
				type: 'bar',
				// stack: '抽查情况',
				data: [
					294,
					323,
					338,
					308,
					312,
					314,
					311,
					308,
					305,
					303
				]
			},
			{
				name: '客运索道',
				type: 'bar',
				// stack: '抽查情况',
				data: [
					2,
					2,
					1,
					1,
					1,
					1,
					1,
					1,
					1,
					1
				]
			}
		]
	};

	// var 20 = 25
	var option_4_5_2 = {
		toolbox: {
			show: true,
			itemSize: echart_toolbox_size, 
            orient: 'vertical',
			feature: {
				dataView: {show: true, readOnly: false},
				// magicType: {show: true, type: ['line','bar']},
				// restore: {show: true},
				saveAsImage: {show: true},
				
				myTool1: {
					show: true,
					title: '切换到柱状图',
					icon: 'image://img/shuju-bar.png',
					onclick: function (){
						myChart_4_5.setOption(option_4_5_1, true);
						curIsPie_4_5 = false;
					}
				},
				myTool3: {
					show: true,
					title: '切换到词云',
					icon: 'image://img/yun.png',
					onclick: function (){
						myChart_4_5.setOption(option_4_5_3, true);
						curIsPie_4_5 = false;
					}
				},
			}
		},
		legend: {
			data: class_4_5,
			textStyle: { //图例文字的样式
				color: color_legend,
				fontSize: fontSize_all_legend
			},
		},
		tooltip: {},
		dataset: {
			source: [
				['product','2008','2009','2010','2011','2012','2013','2014','2015','2016','2017'],
				[
					"锅炉",
					12028,
					11596,
					12355,
					12213,
					9377,
					8457,
					7937,
					7850,
					7608,
					6029
				],
				[
					"固定式压力容器",
					96831,
					107986,
					125706,
					123542,
					102186,
					106608,
					109989,
					105420,
					101213,
					103377
				],
				[
					"移动式电容器",
					687,
					684,
					771,
					814,
					820,
					831,
					840,
					852,
					860,
					0
				],
				[
					"电梯",
					107632,
					118447,
					133397,
					149147,
					157528,
					171802,
					184543,
					201925,
					222103,
					238664
				],
				[
					"起重机械",
					102437,
					111691,
					96244,
					101251,
					89661,
					93972,
					96611,
					88921,
					80216,
					75868
				],
				[
					"场(厂)内机动车辆",
					14491,
					17494,
					43707,
					52554,
					55302,
					59883,
					64701,
					67329,
					69870,
					73238
				],
				[
					"大型游乐设施",
					294,
					323,
					338,
					308,
					312,
					314,
					311,
					308,
					305,
					303
				],
				[
					"客运索道",
					2,
					2,
					1,
					1,
					1,
					1,
					1,
					1,
					1,
					1
				]
			]
		},
		series: [{
			type: 'pie',
			radius: '40%',
			// radius: 60,
			name: '2014',
			center: ['16.6%', '30%'],
			label: {
				formatter: '{d}%',
				color:color_axis
			},
			encode: {
				itemName: 'product',
				value: '2014'
			},
			// roseType: "radius"
			// No encode specified, by default, it is '2012'.
		}, {
			type: 'pie',
			radius: '40%',
			// radius: 60,
			name: '2015',
			center: ['50%', '30%'],
			label: {
				formatter: '{d}%',
				color:color_axis
			},
			encode: {
				itemName: 'product',
				value: '2015'
			},
			// roseType: "radius"
		}, {
			type: 'pie',
			radius: '40%',
			// radius: 60,
			name: '2016',
			center: ['83.4%', '30%'],
			label: {
				formatter: '{d}%',
				color:color_axis
			},
			encode: {
				itemName: 'product',
				value: '2016'
			},
			// roseType: "radius"
		},{
			type: 'pie',
			radius: '40%',
			// radius: 60,
			name: '2017',
			center: ['16.6%', '75%'],
			label: {
				formatter: '{d}%',
				color:color_axis
			},
			encode: {
				itemName: 'product',
				value: '2017'
			},
			// roseType: "radius"
			// No encode specified, by default, it is '2012'.
		}, {
			type: 'pie',
			radius: '40%',
			name: '2018',
			center: ['50%', '75%'],
			label: {
				formatter: '{d}%',
				color:color_axis
			},
			encode: {
				itemName: 'product',
				value: '2018'
			},
			// roseType: "radius"
			// No encode specified, by default, it is '2012'.
		},{
			type: 'pie',
			radius: '40%',
			name: '2019',
			center: ['83.4%', '75%'],
			label: {
				formatter: '{d}%',
				color:color_axis
			},
			encode: {
				itemName: 'product',
				value: '2019'
			},
			// roseType: "radius"
			// No encode specified, by default, it is '2012'.
		},]
	};

	option_4_5_3 = {
		// title: {
		// 	text: '热点分析',
		// 	link: 'https://www.baidu.com/s?wd=' + encodeURIComponent('ECharts'),
		// 	x: 'center',
		// 	textStyle: {
		// 		fontSize: 23
		// 	}

		// },
		// backgroundColor: '#F7F7F7',
		tooltip: {
			show: true
		},
		toolbox: {
			show: true,
			itemSize: echart_toolbox_size, 
            orient: 'vertical',
			feature: {
				dataView: {
					show: true, 
					readOnly: false,
					optionToContent: function(opt) {
						// console.log(opt)
						var axisData = option_4_5_1['xAxis'][0]['data'];
						var series = option_4_5_1['series'];
						console.log("start show")
						// console.log(axisData)
						// console.log(series)
						var table = '<textarea id="view_4_5_3" onchange="view_4_5_3_change()" style="width: 100%; height: 100%; font-family: monospace; font-size: 14px; line-height: 1.6rem; color: rgb(0, 0, 0); border-color: rgb(51, 51, 51); background-color: rgb(255, 255, 255);">\n';
						// table += option_9_1_1['series'][0]['name'];
						// table += '\n';
						table += "年份"
						for(var i = 0; i < option_4_5_1['legend']['data'].length; ++i){
							table += (','+option_4_5_1['legend']['data'][i]);
						}
						table += '\n';

						for (var i = 0, l = axisData.length; i < l; i++) {
							table += axisData[i];
							for(var j = 0; j < series.length; ++j){
								// if(series[j].data[i] == undefined){
								// 	table += (',null'+series[j].data[i]);

								// }
								table += (','+series[j].data[i]);
							}
							table += '\n';
						}
						table += '</textarea>'
						// table += '</tbody></table></div>';
						// console.log(table)
						return table;
						// return option_2_1_1['xAxis']['data']
					},
					contentToOption:function(HTMLDomElement, opt){
						console.log("start save 4_5")

						var plain_tex = HTMLDomElement.firstChild.innerHTML;
						var arr_tex = plain_tex.split('\n')

						var legend_4_5 = arr_tex[0].split(',').slice(1);
						var valid_num = legend_4_5.length;

						var X_4_5 = [];
						var Y_4_5 = [];

						while(Y_4_5.length < valid_num){
							Y_4_5.push([])
						}

						for(var i = 1; i < arr_tex.length; ++i){
							cur_pair = arr_tex[i].split(',');
							// if(cur_pair.length != valid_num){
							// 	// console.alert('wrong data')
							// 	continue
							// }
							// if(cur_pair[0] == '' || cur_pair[0] == undefined){
							// 	continue
							// }
							
							if(cur_pair.length < valid_num+1 || cur_pair[0].length == 0){
								continue;
							}

							X_4_5.push(cur_pair[0]);

							for(var j = 1,k = 0; j < cur_pair.length && k < Y_4_5.length; ++j, ++k){
								Y_4_5[k].push(cur_pair[j]);
							}
							// Y_9_1.push(cur_pair[1]);
						}

						option_4_5_1['legend']['data'] = legend_4_5;
						option_4_5_1['xAxis'][0]['data'] = X_4_5;

						option_4_5_1['series'] = [];

						for(var i = 0; i < Y_4_5.length; ++i){
							option_4_5_1['series'].push({
								name: legend_4_5[i],
								type: "bar",
								// stack: "抽查情况",
								data: Y_4_5[i],
							})
						}
						
						// myChart_4_5.setOption(option_4_5_1);

						var Link = document.createElement('a');
						Link.download = "4_4_5.json";
						Link.style.display = 'none';
						// 字符内容转变成blob地址
						var blob = new Blob(['callback_4_4_5('+JSON.stringify(option_4_5_1)+')']);
						Link.href = URL.createObjectURL(blob);
						// 触发点击 	
						document.body.appendChild(Link);
						Link.click();
						// 然后移除
						document.body.removeChild(Link);
						return opt
					},
				},
				saveAsImage: {show: true},
				myTool1: {
					show: true,
					title: '切换到柱状图',
					icon: 'image://img/shuju-bar.png',
					onclick: function (){
						myChart_4_5.setOption(option_4_5_1, true);
						curIsPie_4_5 = false;
					}
				},
				// myTool2: {
				// 	show: true,
				// 	title: '切换到饼图',
				// 	icon: 'image://img/shuju-data.png',
				// 	onclick: function (){
				// 		myChart_4_5.setOption(option_4_5_2, true);
				// 		curIsPie_4_5 = true;
				// 	}
				// }
			}
		},
		series: [{
			name: '投诉问题类别数量分布',
			type: 'wordCloud',
			// size: ['9%', '99%'],
			sizeRange: [40, 120],
			//textRotation: [0, 45, 90, -45],
			rotationRange: [-45, 90],
			//shape: 'circle',
			textPadding: 0,
			autoSize: {
				enable: false,
				minSize: 30
			},
			textStyle: {
				normal: {
					color: function() {
						var arr = [
							"#fc97af",
							"#87f7cf",
							"#f7f494",
							"#72ccff",
							"#f7c5a0",
							"#d4a4eb",
							"#d2f5a6",
							"#76f2f2"
						];
						return arr[Math.round(Math.random() * arr.length)];
						// return 'rgb(' + [
						// 	Math.round(Math.random() * 160),
						// 	Math.round(Math.random() * 160),
						// 	Math.round(Math.random() * 160)
						// ].join(',') + ')';
					}
				},
				emphasis: {
					shadowBlur: 10,
					shadowColor: '#333'
				}
			},
			data: [{
				name: "Jayfee",
				value: 666
			}, {
				name: "Nancy",
				value: 520
			}]
		}]
	};

	option_4_5_1['series'] = ori_data_4_5['series'];
	option_4_5_1['legend']['data'] = ori_data_4_5['legend']['data'];
	option_4_5_1['xAxis'][0]['data'] = ori_data_4_5['xAxis'][0]['data'];

	var data_4_5_3 = []

	for(var i = 0; i < ori_data_4_5['series'].length; ++i){
		var cur_value = 0;
		for(var j = 0; j < ori_data_4_5['series'][i]['data'].length; ++j){
			cur_value += parseInt(ori_data_4_5['series'][i]['data'][j]);
		}
		data_4_5_3.push({
			name: ori_data_4_5['series'][i]['name'],
			value: cur_value
		})
	}

	// console.log(data_4_5_3)

	option_4_5_3.series[0].data = data_4_5_3;

	myChart_4_5.setOption(option_4_5_3, true);

	// var X_4_5 = [];
	// var Y_4_5 = {};

	// for(var i = 0; i < class_4_5.length; ++i){
	// 	Y_4_5[class_4_5[i]] = [];
	// }

	// for(var i = 1; i < data_4_5.length; ++i){
	// 	X_4_5.push(data_4_5[i][0].toString());
	// 	for(var j = 1; j < data_4_5[i].length; ++j){
	// 		Y_4_5[class_4_5[j-1]].push(data_4_5[i][j])
	// 	}
	// }

	// var series_4_5_1 = []

	// for(var i = 0; i < class_4_5.length; ++i){
	// 	series_4_5_1.push({
	// 		name: class_4_5[i],
	// 		type: 'bar',
	// 		// stack: '抽查情况',
	// 		data: Y_4_5[class_4_5[i]]
	// 	})
	// }

	// option_4_5_1['xAxis'][0]['data'] = X_4_5;
	// option_4_5_1['series'] = series_4_5_1;
	// console.log(option_4_5_1['series'])


	// var source_4_5_2 = []

	// var arr_tmp = ['product']
	// source_4_5_2.push(arr_tmp.concat(X_4_5));

	// for(var i = 0; i < class_4_5.length; ++i){
	// 	arr_tmp = [class_4_5[i]];
	// 	source_4_5_2.push(arr_tmp.concat(Y_4_5[class_4_5[i]]));
	// }
	// option_4_5_2['dataset']['source'] = source_4_5_2;
	// console.log(option_4_5_2['dataset']['source'])



	// var data_4_5_3 = []

	// for(var i = 0; i < class_4_5.length; ++i){
	// 	data_4_5_3.push({
	// 		name: class_4_5[i],
	// 		value: Y_4_5[class_4_5[i]]
	// 	})
	// }

	// option_4_5_3.series[0].data = data_4_5_3;

	
	// myChart_4_5.setOption(option_4_5_1);
	// var curIsPie_4_5 = true;

</script>

<!--配置页面 front-5 的Echart图-->
<script>
	var dom_5 = document.getElementById("container_5");
	var myChart_5 = echarts.init(dom_5, 'chalk');
	//var myChart_5 = echarts.init(dom_5);

	var data_5 = [
		{
			name: "工程机械",
			value: 13
		},
		{
			name: "电工电器",
			value: 11
		},
		{
			name: "机床工具",
			value: 7
		},
		{
			name: "汽车工业",
			value: 5
		},
		{
			name: "专用设备",
			value: 4
		},
		{
			name: "发电机及发电设备",
			value: 2
		},
		{
			name: "基础件",
			value: 2
		},
		{
			name: "内燃机",
			value: 2
		},
		{
			name: "重型矿山",
			value: 2
		},
		{
			name: "石化通用",
			value: 1
		},
		{
			name: "仪器仪表",
			value: 1
		},

	]

	option_5 = {
		tooltip: {
			trigger: 'item',
			formatter: '{b} : {c} ({d}%)'
		},
		series: [{
			type: 'pie',
			radius: '80%',
			center: ['50%', '50%'],
			data: data_5,
			animation: false,
			label: {
				position: 'outer',
				//alignTo: 'labelLine',
				bleedMargin: 5
			},
			left: 0,
			right: 0,
			top: 0,
			bottom: 0
		}]
	};



	if (option_5 && typeof option_5 === 'object') {
		myChart_5.setOption(option_5);
		console.log(data_5)
	}

</script>



<!--配置页面 front-6 的Echart图-->
<!-- <script>
	var dom_6 = document.getElementById("container_6");
	var myChart_6 = echarts.init(dom_6, 'chalk');
	var data_6 = data_front_6["6-2中国与世界平均工业增加值年增长率数据（%）"]
	console.log(data_6)
	var xAxis_6 = []
	var yAxis_6a = []
	var yAxis_6b = []
	for (var i = 1; i < data_6.length; ++i) {
		xAxis_6.push(data_6[i][0])
		yAxis_6a.push(data_6[i][1])
		yAxis_6b.push(data_6[i][2])
	}
	var option_6 = {
		textStyle: {
			fontSize: fontSize_all_title,
		},
		tooltip: {
			trigger: 'axis',
			axisPointer: {
				type: 'shadow'
			}
		},
		toolbox: {
			show: true,
			itemSize: echart_toolbox_size,
			orient: 'vertical',
			left: 'right',
			top: 'center',
			feature: {
				dataView: { show: true, readOnly: false },
				magicType: { show: true, type: ['line', 'bar'] },
				restore: { show: true },
				saveAsImage: { show: true }
			}
		},
		calculable: true,
		legend: {
			data: ["中国", "世界"],
			textStyle: {
				color: color_legend,
				fontSize: fontSize_all_legend,
			}
		},
		xAxis: {
			type: 'category',
			data: xAxis_6,
			axisLine: {
				lineStyle: {
					color: color_axis
				}
			},
			axisLabel: {
				fontSize: fontSize_axis_label
			}
		},
		yAxis: {
			type: 'value',
			name: '百分比',
			axisLine: {
				lineStyle: {
					color: color_axis
				}
			},
			axisLabel: {
				formatter: '{value} %',
				fontSize: fontSize_axis_label
			}
		},
		series: [
			{
				data: yAxis_6a,
				name: '中国',
				type: 'bar',
			},
			{
				data: yAxis_6b,
				name: '世界',
				type: 'bar',
			},
		]
	};
	if (option_6 && typeof option_6 === 'object') {
		myChart_6.setOption(option_6);
		console.log(data_6)
	}
</script> -->
<script>
    var ori_data_1_6 = {};

    function callback_4_0_6(res){
        ori_data_1_6 = res;
		console.log('4_0_6.json读取成功')
		console.log(ori_data_1_6);
    }
</script>
<script src="data/4_0_6.json?callback=callback_4_0_6"></script>

<script>

	var dom_1_6 = document.getElementById("container_6");
	var myChart_1_6 = echarts.init(dom_1_6, 'chalk');
	var app_1_6 = {};

	function view_1_6_1_change(){
		console.log("1_6_1 change")
		// Document.getElementById('view_2_1_1').innerHTML
		console.log(document.getElementById('view_1_6_1').value)
		document.getElementById('view_1_6_1').innerHTML = document.getElementById('view_1_6_1').value
	}

	// 柱状图 
	var option_1_6_1 = {
		textStyle: {
            fontSize: fontSize_all_legend,
        },
		tooltip: {
			trigger: 'axis',
			axisPointer: {            // 坐标轴指示器，坐标轴触发有效
				type: 'shadow'        // 默认为直线，可选为：'line' | 'shadow'
			}
		},
		toolbox: {
			show: true,
			itemSize: echart_toolbox_size, 
            orient: 'vertical',
			feature: {
				dataView: {
					show: true, 
					readOnly: false,
					optionToContent: function(opt) {
						// console.log(opt)
						var axisData = opt['xAxis'][0]['data'];
						var series = opt['series'];
						console.log("start show")
						// console.log(axisData)
						// console.log(series)
						var table = '<textarea id="view_1_6_1" onchange="view_1_6_1_change()" style="width: 100%; height: 100%; font-family: monospace; font-size: 14px; line-height: 1.6rem; color: rgb(0, 0, 0); border-color: rgb(51, 51, 51); background-color: rgb(255, 255, 255);">\n';
						// table += option_9_1_1['series'][0]['name'];
						// table += '\n';
						table += "年份"
						for(var i = 0; i < option_1_6_1['legend']['data'].length; ++i){
							table += (','+option_1_6_1['legend']['data'][i]);
						}
						table += '\n';

						for (var i = 0, l = axisData.length; i < l; i++) {
							table += axisData[i];
							for(var j = 0; j < series.length; ++j){
								// if(series[j].data[i] == undefined){
								// 	table += (',null'+series[j].data[i]);

								// }
								table += (','+series[j].data[i]);
							}
							table += '\n';
						}
						table += '</textarea>'
						// table += '</tbody></table></div>';
						// console.log(table)
						return table;
						// return option_2_1_1['xAxis']['data']
					},
					contentToOption:function(HTMLDomElement, opt){
						console.log("start save 1_6")

						var plain_tex = HTMLDomElement.firstChild.innerHTML;
						var arr_tex = plain_tex.split('\n')

						var legend_1_6 = arr_tex[0].split(',').slice(1);
						var valid_num = legend_1_6.length;

						var X_1_6 = [];
						var Y_1_6 = [];

						while(Y_1_6.length < valid_num){
							Y_1_6.push([])
						}

						for(var i = 1; i < arr_tex.length; ++i){
							cur_pair = arr_tex[i].split(',');
							// if(cur_pair.length != valid_num){
							// 	// console.alert('wrong data')
							// 	continue
							// }
							// if(cur_pair[0] == '' || cur_pair[0] == undefined){
							// 	continue
							// }
							
							if(cur_pair.length < valid_num+1 || cur_pair[0].length == 0){
								continue;
							}

							X_1_6.push(cur_pair[0]);

							for(var j = 1,k = 0; j < cur_pair.length && k < Y_1_6.length; ++j, ++k){
								Y_1_6[k].push(cur_pair[j]);
							}
							// Y_9_1.push(cur_pair[1]);
						}

						option_1_6_1['legend']['data'] = legend_1_6;
						option_1_6_1['xAxis'][0]['data'] = X_1_6;

						option_1_6_1['series'] = [];

						for(var i = 0; i < Y_1_6.length; ++i){
							option_1_6_1['series'].push({
								name: legend_1_6[i],
								type: "bar",
								// stack: "抽查情况",
								data: Y_1_6[i],
							})
						}
						
						myChart_1_6.setOption(option_1_6_1);

						var Link = document.createElement('a');
						Link.download = "4_0_6.json";
						Link.style.display = 'none';
						// 字符内容转变成blob地址
						var blob = new Blob(['callback_4_0_6('+JSON.stringify(option_1_6_1)+')']);
						Link.href = URL.createObjectURL(blob);
						// 触发点击 	
						document.body.appendChild(Link);
						Link.click();
						// 然后移除
						document.body.removeChild(Link);
						return opt
					},
				},
				magicType: {show: true, type: ['line','bar','stack','tiled']},
				// restore: {show: true},
				saveAsImage: {show: true}
			}
		},
		legend: {
			data: ['中国', '世界'],
			textStyle: { //图例文字的样式
				color: color_legend,
				fontSize: fontSize_all_legend
			},
		},
		grid: {
			left: '3%',
			right: '4%',
			bottom: '3%',
			containLabel: true
		},
		xAxis: [
			{
				type: 'category',
				data: ['周一', '周二', '周三', '周四', '周五', '周六', '周日'],
			axisLabel:{
				textStyle: { //图例文字的样式
					color: color_axis,
					fontSize: fontSize_axis_label
				},
			}
			}
		],
		yAxis: [
			{
				type: 'value',
				name: '百分比',
				axisLabel:{
					textStyle: { //图例文字的样式
						color: color_axis,
						fontSize: fontSize_axis_label
					},
				}
				// max: 365,
			}
		],
		series: [
			{
				name: '中国',
				type: 'bar',
				// stack: '抽查情况',
				data: [120, 132, 101, 134, 90, 230, 210]
			},
			{
				name: '世界',
				type: 'bar',
				// stack: '抽查情况',
				data: [220, 182, 191, 234, 290, 330, 310]
			}
		]
	};


	option_1_6_1['series'] = ori_data_1_6['series'];
	option_1_6_1['legend']['data'] = ori_data_1_6['legend']['data'];
	option_1_6_1['xAxis'][0]['data'] = ori_data_1_6['xAxis'][0]['data'];

	myChart_1_6.setOption(option_1_6_1, true);

</script>

