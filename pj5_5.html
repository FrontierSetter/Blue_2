<!DOCTYPE html>

<html>
	<head>
		<meta charset="utf-8" />
	    <meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<meta http-equiv="X-UA-Compatible" content="IE=edge, chrome=1" />
		<meta http-equiv="Page-Enter" content="revealTrans(Duration=2.0,Transition=12)" />
		<title>大屏数据可视化 - 模板</title>
		<link rel="stylesheet" href="css/app.css" />
		<link rel="stylesheet" href="css/mine.css" />

		<!-- JQuery -->
		<script src="https://cdn.bootcdn.net/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
		
		<!-- echarts -->
		<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
		<script type="text/javascript" src="js/color.js"></script>
		<script type="text/javascript" src="js/global_config.js"></script>
		<link rel="stylesheet" href="css/mine.css" />
		
		<!-- semantic UI -->
		<link href="https://cdn.bootcdn.net/ajax/libs/semantic-ui/2.4.1/components/icon.css" rel="stylesheet">
		<link href="https://cdn.bootcdn.net/ajax/libs/semantic-ui/2.4.1/components/button.css" rel="stylesheet">
		<link href="https://cdn.bootcdn.net/ajax/libs/semantic-ui/2.4.1/components/table.css" rel="stylesheet">

		<!-- bootstrap -->
		<script src="https://cdn.staticfile.org/twitter-bootstrap/3.3.7/js/bootstrap.min.js"></script>
	</head>
	
	<body>
		<div class="header" style="padding:0px">
			<h1 class="header-title" style="font-size:40px">行业质量数据展图</h1>
		</div>
		<div class="wrapper">
			<div class="content">
				<div class="col col-l">
					<div class="xpanel-wrapper xpanel-wrapper-50">
						<div class="xpanel xpanel-l-t">
							<div class="title">2010-2018年中国金属加工机床主营业务收入与利润额</div>
							<div class="echart-container" id="container_1_1"></div>
						</div>
					</div>
					<div class="xpanel-wrapper xpanel-wrapper-55">
						<div class="xpanel xpanel-l-b">
							<div class="title">2011-2017年中国不同数控机床产品的国产化率情况</div>
							<div class="echart-container" id="container_1_2"></div>
						</div>
					</div>
				</div>
				<div class="col col-c">
					<div class="xpanel-wrapper xpanel-wrapper-50">
						<div class="xpanel xpanel-c-t">
							<div class="title title-long">2013-2018年中国机床进出口平均单价</div>
							<div class="echart-container" id="container_2_1"></div>
						</div>
					</div>
					<div class="xpanel-wrapper xpanel-wrapper-55">
						<div class="xpanel xpanel-c-b">
							<div class="title title-long">截至2017年数控机床技术全球专利主要申请人申请专利数</div>
							<div class="echart-container" id="container_2_2"></div>
						</div>
					</div>
				</div>
				<div class="col col-r">
					<div class="xpanel-wrapper xpanel-wrapper-50">
						<div class="xpanel xpanel-r-t">
							<div class="title">2005-2018年中国机床产业销售利润率</div>
							<div class="echart-container" id="container_3_1"></div>
						</div>
					</div>
					<div class="xpanel-wrapper xpanel-wrapper-55">
						<div class="xpanel xpanel-r-b">
							<div class="title">2010-2018年机床产业出口额增长率和全员劳动生产率</div>
							<div class="echart-container" id="container_3_2"></div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</body>
</html>

<!--解决本地json跨域问题-->
<script>
    var alldata = {};
    function callback5(res) {
        alldata = res;
    }
</script>
<script src="dataproc/pj5-data/data-5.json?callback=callback5"></script>
<script>
    var ori_data_5_1 = {}
    function callback_5_1(res){
        ori_data_5_1 = res;
		console.log('5_5_1.json读取成功')
		console.log(ori_data_5_1)
    }
</script>
<script src="data/5_5_1.json?callback=callback_5_1"></script>

<!--配置页面 5-1 的Echart图-->
<script>
	var dom_5_1 = document.getElementById("container_1_1");
	var myChart_5_1 = echarts.init(dom_5_1, 'chalk');
	
    // var data_5_1 = alldata["5-12010-2018年中国金属加工机床主营业务收入与利润额"]
    // var xAxis_5_1 = []
	// var yAxis_5_1a = []
    // var yAxis_5_1b = []
    // for(var i = 1; i < data_5_1.length; ++i) {
	// 	xAxis_5_1.push(data_5_1[i][0]) //年份
	// 	yAxis_5_1a.push(data_5_1[i][1]) //主营业务收入
    //     yAxis_5_1b.push(data_5_1[i][2]) //利润额
	// }

	var xAxis_5_1 = ori_data_5_1['xAxis']['data'] //年份
	var yAxis_5_1a = ori_data_5_1['series'][0]['data'] //主营业务收入
    var yAxis_5_1b = ori_data_5_1['series'][1]['data'] //利润额

	function view_5_1_change(){
		console.log("5_1 change")
		//console.log(document.getElementById('view_5_1').value)
		document.getElementById('view_5_1').innerHTML = document.getElementById('view_5_1').value
	}

	var option_5_1 = {
		textStyle: {
			fontSize: fontSize_all_title,
		},
		tooltip: {
            trigger: 'axis',
			axisPointer: {
                type: 'shadow'        
            }
        },
		toolbox: {
			show: true,
			itemSize: echart_toolbox_size,
			orient: 'vertical',
            left: 'right',
            top: 'center',
            feature: {
                dataView: {
                    show: true, 
                    readOnly: false,
                    optionToContent: function(opt) {
						console.log(opt)
						var axisData = opt['xAxis'][0]['data']
						var series = opt['series']
						console.log("start show")
						console.log(axisData)
						console.log(series)
						var table = '<textarea id="view_5_1" onchange="view_5_1_change()" style="width: 100%; height: 100%; font-family: monospace; font-size: 14px; line-height: 1.6rem; color: rgb(0, 0, 0); border-color: rgb(51, 51, 51); background-color: rgb(255, 255, 255);">年份,主营业务收入,利润额\n'
						for (var i = 0, l = axisData.length; i < l; i++) {
							table += axisData[i] + ',' + series[0].data[i] + ',' + series[1].data[i] + '\n'
						}
						table += '</textarea>'
						return table;
					},
					contentToOption: function(HTMLDomElement, opt) {
						console.log('start save')
						console.log(opt)
						console.log(HTMLDomElement.firstChild)
						var plain_tex = HTMLDomElement.firstChild.innerHTML
						var arr_tex = plain_tex.split('\n')
						console.log(arr_tex)
						xAxis_5_1 = []
						yAxis_5_1a = []
                        yAxis_5_1b = []
						for(var i = 1; i < arr_tex.length; i++) {
							cur_pair = arr_tex[i].split(',')
							if(cur_pair.length != 3) {
								//console.alert('wrong data')
								continue
							}
							if(cur_pair[0] == ' ' || cur_pair[0] == undefined) {
								continue
							}
							xAxis_5_1.push(cur_pair[0])
							yAxis_5_1a.push(cur_pair[1])
                            yAxis_5_1b.push(cur_pair[2])
						}
						console.log(xAxis_5_1)
						console.log(yAxis_5_1a)
                        console.log(yAxis_5_1b)
						option_5_1['series'][0]['data'] = yAxis_5_1a;
                        option_5_1['series'][1]['data'] = yAxis_5_1b;
						option_5_1['xAxis']['data'] = xAxis_5_1;
						myChart_5_1.setOption(option_5_1);

						var Link = document.createElement('a')
						Link.download = "5_5_1.json"
						Link.style.display = 'none'
						//字符内容转变成blob地址
						var blob = new Blob(['callback_5_1('+JSON.stringify(option_5_1)+')'])
						Link.href = URL.createObjectURL(blob)
						//触发点击
						document.body.appendChild(Link)
						Link.click()
						//然后移除
						document.body.removeChild(Link)
						return opt
                    },
                },
                magicType: {show: true, type: ['line', 'bar']},
                restore: {show: true},
                saveAsImage: {show: true}
            }
        },
		calculable: true,
        legend: {
			data: ['主营业务收入', '利润额'],
			textStyle: {
				color: color_legend,
				fontSize: fontSize_all_legend,
			}
		},
		xAxis: {
			type: 'category',
			name: '年份',
			data: xAxis_5_1,
			axisLine: {
                lineStyle: {
                    color: color_axis
                }
			},
			axisLabel: {
                fontSize: fontSize_axis_label
            }
		},
		yAxis: [
            {
                type: 'value',
                name: '主营业务收入(亿元)',
                data: yAxis_5_1a,
                position: 'left',
                axisLine: {
                    lineStyle: {
                        color: color_axis,
                    }
                },
                axisLabel: {
                    formatter: '{value}',
					fontSize: fontSize_axis_label
                }
            },
            {
                type: 'value',
                name: '利润额(亿元)',
                data: yAxis_5_1b,
                position: 'right',
                axisLine: {
                    lineStyle: {
                        color: color_axis,
                    }
                },
                axisLabel: {
                    formatter: '{value}',
                    fontSize: fontSize_axis_label
                }
            }
        ],
		series: [
            {
			    name: '主营业务收入',
			    type: 'bar',
                yAxisIndex: 0,
				data: yAxis_5_1a,
				// markPoint: {
                //     data: [
                //         {type: 'max', name: '最大值'},
                //         {type: 'min', name: '最小值'}
                //     ]  
                // },
		    },
            {
			    name: '利润额',
			    type: 'bar',
                yAxisIndex: 1,
				data: yAxis_5_1b,
				// markPoint: {
                //     data: [
                //         {type: 'max', name: '最大值'},
                //         {type: 'min', name: '最小值'}
                //     ]  
                // },
		    },
        ]
	};
	option_5_1['series'][0]['data'] = yAxis_5_1a;
	option_5_1['series'][1]['data'] = yAxis_5_1b;
	option_5_1['xAxis']['data'] = xAxis_5_1;
	if (option_5_1 && typeof option_5_1 === 'object') {
		myChart_5_1.setOption(option_5_1);
		console.log(ori_data_5_1)
	}
</script>

<script>
    var ori_data_5_2 = {}
    function callback_5_2(res){
        ori_data_5_2 = res;
		console.log('5_5_2.json读取成功')
		console.log(ori_data_5_2)
    }
</script>
<script src="data/5_5_2.json?callback=callback_5_2"></script>

<!--配置页面 5-2 的Echart图-->
<script>
    var dom_5_2 = document.getElementById("container_1_2");
	var myChart_5_2 = echarts.init(dom_5_2, 'chalk');
    
	// var data_5_2 = alldata["5-22011-2017年中国不同数控机床产品的国产化率情况"]
    // var xAxis_5_2 = []
	// var yAxis_5_2a = [] //高档数控机床
	// var yAxis_5_2b = [] //中档数控机床
	// var yAxis_5_2c = [] //中低档(普及型)数控机床
    // for(var i = 1; i < data_5_2.length; ++i) {
	// 	xAxis_5_2.push(data_5_2[i][0]) 
	// 	yAxis_5_2a.push(data_5_2[i][1])
	// 	yAxis_5_2b.push(data_5_2[i][2])
	// 	yAxis_5_2c.push(data_5_2[i][3])
	// }

	var xAxis_5_2 = ori_data_5_2['xAxis']['data'] //年份
	var yAxis_5_2a = ori_data_5_2['series'][0]['data'] //高档
    var yAxis_5_2b = ori_data_5_2['series'][1]['data'] //中档
	var yAxis_5_2c = ori_data_5_2['series'][2]['data'] //普及型

	function view_5_2_change(){
		console.log("5_2 change")
		//console.log(document.getElementById('view_5_2').value)
		document.getElementById('view_5_2').innerHTML = document.getElementById('view_5_2').value
	}
    
	// var option_5_2 = {
	// 	textStyle: {
	// 		fontSize: fontSize_all_title,
	// 	},
	// 	title: [
	// 		{
	// 			subtext: '2011',
	// 			left: '40%',
	// 			top: '30%',
	// 			textAlign: 'center',
	// 			subtextStyle:{
    //                 color:'#5793f3',
    //                 fontSize:20,
	// 				align:"center"
    //             }
	// 		},
	// 		{
	// 			subtext: '2013',
	// 			left: '60%',
	// 			top: '30%',
	// 			textAlign: 'center',
	// 			subtextStyle:{
    //                 color:'#5793f3',
    //                 fontSize:20,
	// 				align:"center"
    //             }
	// 		},
	// 		{
	// 			subtext: '2015',
	// 			left: '30%',
	// 			top: '70%',
	// 			textAlign: 'center',
	// 			subtextStyle:{
    //                 color:'#5793f3',
    //                 fontSize:20,
	// 				align:"center"
    //             }
	// 		},
	// 		{
	// 			subtext: '2016',
	// 			left: '50%',
	// 			top: '70%',
	// 			textAlign: 'center',
	// 			subtextStyle:{
    //                 color:'#5793f3',
    //                 fontSize:20,
	// 				align:"center"
    //             }
	// 		},
	// 		{
	// 			subtext: '2017',
	// 			left: '70%',
	// 			top: '70%',
	// 			textAlign: 'center',
	// 			subtextStyle:{
    //                 color:'#5793f3',
    //                 fontSize:20,
	// 				align:"center"
    //             }
	// 		}
	// 	],
    //     legend: {
	// 		data: ['高档', '中档', '普及型'],
	// 		textStyle: {
	// 			color: color_legend,
	// 			fontSize: fontSize_all_legend,
	// 		}
	// 	},
	// 	tooltip: {
    //         trigger: 'item',
	// 		formatter: '{a} <br/>{b} : {d}%'
    //     },
	// 	toolbox: {
	// 		show: true,
	// 		itemSize: echart_toolbox_size,
    //         orient: 'vertical',
    //         left: 'right',
    //         top: 'center',
    //         feature: {
	// 			dataView: {show: true, readOnly: false},
    //             restore: {show: true},
    //             saveAsImage: {show: true}
    //         }
    //     },
    //     series: [
	// 		{
    //             type: 'pie',
	// 			name: '2011',
    //             radius: 70,
    //             center: ['40%', '30%'],
	// 			label: {
	// 				// show: false,
    //                 formatter: '{d}%',
	// 				color: color_legend,
	// 				fontSize: 20,
	// 			},/*
	// 			itemStyle: {
    //                 normal: {
    //                     color: function(params) {
    //                         var colorList = [
    //                             colors[5], colors[4], colors[3], colors[2]
    //                         ];
	// 						return colorList[params.dataIndex]
	// 					}
    //                 }
    //             },*/
	// 			data: [
	// 			    {value: yAxis_5_2a[0], name: '高档'},
	// 			    {value: yAxis_5_2b[0], name: '中档'},
	// 				{value: yAxis_5_2c[0], name: '普及型'},
	// 			]
    //         },
	// 		{
    //             type: 'pie',
	// 			name: '2013',
    //             radius: 70,
    //             center: ['60%', '30%'],
	// 			label: {
	// 				// show: false,
    //                 formatter: '{d}%',
	// 				color: color_legend,
	// 				fontSize: 20,
	// 			},
	// 			data: [
	// 			    {value: yAxis_5_2a[1], name: '高档'},
	// 			    {value: yAxis_5_2b[1], name: '中档'},
	// 				{value: yAxis_5_2c[1], name: '普及型'},
	// 			]
    //         },
	// 		{
    //             type: 'pie',
	// 			name: '2015',
    //             radius: 70,
    //             center: ['30%', '70%'],
	// 			label: {
	// 				// show: false,
    //                 formatter: '{d}%',
	// 				color: color_legend,
	// 				fontSize: 20,
	// 			},
	// 			data: [
	// 			    {value: yAxis_5_2a[2], name: '高档'},	
	// 			    {value: yAxis_5_2b[2], name: '中档'},
	// 				{value: yAxis_5_2c[2], name: '普及型'},
	// 			]
    //         }, 
	// 		{
    //             type: 'pie',
	// 			name: '2016',
    //             radius: 70,
    //             center: ['50%', '70%'],
	// 			label: {
	// 				// show: false,
    //                 formatter: '{d}%',
	// 				color: color_legend,
	// 				fontSize: 20,
	// 			},
	// 			data: [
	// 			    {value: yAxis_5_2a[3], name: '高档'},
	// 			    {value: yAxis_5_2b[3], name: '中档'},
	// 				{value: yAxis_5_2c[3], name: '普及型'},
	// 			]
    //         },
	// 		{
    //             type: 'pie',
	// 			name: '2017',
    //             radius: 70,
    //             center: ['70%', '70%'],
	// 			label: {
	// 				// show: false,
    //                 formatter: '{d}%',
	// 				color: color_legend,
	// 				fontSize: 20,
	// 			},
	// 			data: [
	// 			    {value: yAxis_5_2a[4], name: '高档'},
	// 			    {value: yAxis_5_2b[4], name: '中档'},
	// 				{value: yAxis_5_2c[4], name: '普及型'},
	// 			]
    //         }
	// 	]
    // };

	var option_5_2 = {
		textStyle: {
			fontSize: fontSize_all_title,
		},
		tooltip: {
            trigger: 'axis',
			axisPointer: {
                type: 'shadow'
            }
        },
		toolbox: {
			show: true,
			itemSize: echart_toolbox_size,
			orient: 'vertical',
            left: 'right',
            top: 'center',
            feature: {
                dataView: {
                    show: true, 
                    readOnly: false,
                    optionToContent: function(opt) {
						console.log(opt)
						var axisData = opt['xAxis'][0]['data']
						var series = opt['series']
						console.log("start show")
						console.log(axisData)
						console.log(series)
						var table = '<textarea id="view_5_2" onchange="view_5_2_change()" style="width: 100%; height: 100%; font-family: monospace; font-size: 14px; line-height: 1.6rem; color: rgb(0, 0, 0); border-color: rgb(51, 51, 51); background-color: rgb(255, 255, 255);">年份,高档,中档,普及型\n'
						for (var i = 0, l = axisData.length; i < l; i++) {
							table += axisData[i] + ',' + series[0].data[i] + ',' + series[1].data[i] + ',' + series[2].data[i] + '\n'
						}
						table += '</textarea>'
						return table;
					},
					contentToOption: function(HTMLDomElement, opt) {
						console.log('start save')
						console.log(opt)
						console.log(HTMLDomElement.firstChild)
						var plain_tex = HTMLDomElement.firstChild.innerHTML
						var arr_tex = plain_tex.split('\n')
						console.log(arr_tex)
						xAxis_5_2 = []
						yAxis_5_2a = []
                        yAxis_5_2b = []
						yAxis_5_2c = []
						for(var i = 1; i < arr_tex.length; i++) {
							cur_pair = arr_tex[i].split(',')
							if(cur_pair.length != 4) {
								//console.alert('wrong data')
								continue
							}
							if(cur_pair[0] == ' ' || cur_pair[0] == undefined) {
								continue
							}
							xAxis_5_2.push(cur_pair[0])
							yAxis_5_2a.push(cur_pair[1])
                            yAxis_5_2b.push(cur_pair[2])
							yAxis_5_2c.push(cur_pair[3])
						}
						console.log(xAxis_5_2)
						console.log(yAxis_5_2a)
                        console.log(yAxis_5_2b)
						console.log(yAxis_5_2c)
						option_5_2['series'][0]['data'] = yAxis_5_2a;
                        option_5_2['series'][1]['data'] = yAxis_5_2b;
						option_5_2['series'][2]['data'] = yAxis_5_2c;
						option_5_2['xAxis']['data'] = xAxis_5_2;
						myChart_5_2.setOption(option_5_2);

						var Link = document.createElement('a')
						Link.download = "5_5_2.json"
						Link.style.display = 'none'
						//字符内容转变成blob地址
						var blob = new Blob(['callback_5_2('+JSON.stringify(option_5_2)+')'])
						Link.href = URL.createObjectURL(blob)
						//触发点击
						document.body.appendChild(Link)
						Link.click()
						//然后移除
						document.body.removeChild(Link)
						return opt
                    },
                },
                magicType: {show: true, type: ['line', 'bar']},
                restore: {show: true},
                saveAsImage: {show: true}
            }
		},
		calculable: true,
		legend: {
			data: ['高档', '中档', '普及型'],
			textStyle: {
				color: color_legend,
				fontSize: fontSize_all_legend,
			}
		},
		xAxis: {
			type: 'category',
			name: '年份',
			data: xAxis_5_2,
			axisLine: {
                lineStyle: {
                    color: color_axis
                }
			},
			axisLabel: {
                fontSize: fontSize_axis_label
            }
		},
		yAxis: [
			{
                type: 'value',
                name: '国产化率',
				axisLine: {
                    lineStyle: {
                        color: color_axis
                    }
			    },
			    axisLabel: {
				    formatter: '{value} %',
				    fontSize: fontSize_axis_label
			    },
            },
		],
		series: [
			{
				name: '高档',
			    data: yAxis_5_2a,
				type: 'bar',
				stack: '总'
		    },
			{
				name: '中档',
			    data: yAxis_5_2b,
				type: 'bar',
				stack: '总'
		    },
			{
				name: '普及型',
			    data: yAxis_5_2c,
				type: 'bar',
				stack: '总'
		    },
		]
	};
	option_5_2['series'][0]['data'] = yAxis_5_2a;
	option_5_2['series'][1]['data'] = yAxis_5_2b;
	option_5_2['series'][2]['data'] = yAxis_5_2c;
	option_5_2['xAxis']['data'] = xAxis_5_2;
	if (option_5_2 && typeof option_5_2 === 'object') {
		myChart_5_2.setOption(option_5_2);
		console.log(ori_data_5_2)
	}
</script>

<script>
    var ori_data_5_3 = {}
    function callback_5_3(res){
        ori_data_5_3 = res;
		console.log('5_5_3.json读取成功')
		console.log(ori_data_5_3)
    }
</script>
<script src="data/5_5_3.json?callback=callback_5_3"></script>

<!--配置页面 5-3 的Echart图-->
<script>
	var dom_5_3 = document.getElementById("container_2_1");
	var myChart_5_3 = echarts.init(dom_5_3, 'chalk');
	
	// var data_5_3 = alldata["5-32013-2018年中国机床进出口平均单价"]
    // var xAxis_5_3 = []
	// var yAxis_5_3a = []
	// var yAxis_5_3b = []
	// for(var i = 1; i < data_5_3.length; ++i) {
	// 	xAxis_5_3.push(data_5_3[i][0]) //年份
	// 	yAxis_5_3a.push(data_5_3[i][1]) //进口单价
	//     yAxis_5_3b.push(data_5_3[i][2]) //出口单价
	// }

	var xAxis_5_3 = ori_data_5_3['xAxis']['data'] //年份
	var yAxis_5_3a = ori_data_5_3['series'][0]['data'] //进口单价
    var yAxis_5_3b = ori_data_5_3['series'][1]['data'] //出口单价

	function view_5_3_change(){
		console.log("5_3 change")
		//console.log(document.getElementById('view_5_3').value)
		document.getElementById('view_5_3').innerHTML = document.getElementById('view_5_3').value
	}

	var option_5_3 = {
		textStyle: {
			fontSize: fontSize_all_title,
		},
		tooltip: {
            trigger: 'axis',
			axisPointer: {
                type: 'shadow'
            }
        },
		toolbox: {
			show: true,
			itemSize: echart_toolbox_size,
			orient: 'vertical',
            left: 'right',
            top: 'center',
            feature: {
                dataView: {
                    show: true, 
                    readOnly: false,
                    optionToContent: function(opt) {
						console.log(opt)
						var axisData = opt['xAxis'][0]['data']
						var series = opt['series']
						console.log("start show")
						console.log(axisData)
						console.log(series)
						var table = '<textarea id="view_5_3" onchange="view_5_3_change()" style="width: 100%; height: 100%; font-family: monospace; font-size: 14px; line-height: 1.6rem; color: rgb(0, 0, 0); border-color: rgb(51, 51, 51); background-color: rgb(255, 255, 255);">年份,进口单价,出口单价\n'
						for (var i = 0, l = axisData.length; i < l; i++) {
							table += axisData[i] + ',' + series[0].data[i] + ',' + series[1].data[i] + '\n'
						}
						table += '</textarea>'
						return table;
					},
					contentToOption: function(HTMLDomElement, opt) {
						console.log('start save')
						console.log(opt)
						console.log(HTMLDomElement.firstChild)
						var plain_tex = HTMLDomElement.firstChild.innerHTML
						var arr_tex = plain_tex.split('\n')
						console.log(arr_tex)
						xAxis_5_3 = []
						yAxis_5_3a = []
                        yAxis_5_3b = []
						for(var i = 1; i < arr_tex.length; i++) {
							cur_pair = arr_tex[i].split(',')
							if(cur_pair.length != 3) {
								//console.alert('wrong data')
								continue
							}
							if(cur_pair[0] == ' ' || cur_pair[0] == undefined) {
								continue
							}
							xAxis_5_3.push(cur_pair[0])
							yAxis_5_3a.push(cur_pair[1])
                            yAxis_5_3b.push(cur_pair[2])
						}
						console.log(xAxis_5_3)
						console.log(yAxis_5_3a)
                        console.log(yAxis_5_3b)
						option_5_3['series'][0]['data'] = yAxis_5_3a;
                        option_5_3['series'][1]['data'] = yAxis_5_3b;
						option_5_3['xAxis']['data'] = xAxis_5_3;
						myChart_5_3.setOption(option_5_3);

						var Link = document.createElement('a')
						Link.download = "5_5_3.json"
						Link.style.display = 'none'
						//字符内容转变成blob地址
						var blob = new Blob(['callback_5_3('+JSON.stringify(option_5_3)+')'])
						Link.href = URL.createObjectURL(blob)
						//触发点击
						document.body.appendChild(Link)
						Link.click()
						//然后移除
						document.body.removeChild(Link)
						return opt
                    },
                },
                magicType: {show: true, type: ['line', 'bar']},
                restore: {show: true},
                saveAsImage: {show: true}
            }
		},
		calculable: true,
		legend: {
			data: ['进口单价', '出口单价'],
			textStyle: {
				color: color_legend,
				fontSize: fontSize_all_legend,
			}
		},
		xAxis: {
			type: 'category',
			name: '年份',
			data: xAxis_5_3,
			axisLine: {
                lineStyle: {
                    color: color_axis
                }
			},
			axisLabel: {
                fontSize: fontSize_axis_label
            }
		},
		yAxis: [
			{
                type: 'value',
                name: '进口单价',
				position: 'left',
				axisLine: {
                    lineStyle: {
                        color: color_axis
                    }
			    },
			    axisLabel: {
				    formatter: '{value} 元',
				    fontSize: fontSize_axis_label
			    },
            },
			{
                type: 'value',
                name: '出口单价',
				position: 'right',
				axisLine: {
                    lineStyle: {
                        color: color_axis
                    }
			    },
				min: 0,
				max: 10000,
			    axisLabel: {
				    formatter: '{value} 元',
				    fontSize: fontSize_axis_label
			    },
            }
		],
		series: [
			{
				name: '进口单价',
			    data: yAxis_5_3a,
				type: 'line',
				yAxisIndex: 0,
				// label: {
                //     normal: {
                //         show: true,
                //         position: 'top'
                //     }
			    // },
		    },
			{
				name: '出口单价',
			    data: yAxis_5_3b,
				type: 'line',
				yAxisIndex: 1,
				// label: {
                //     normal: {
                //         show: true,
                //         position: 'top'
                //     }
			    // },
		    },

		]
	};
	option_5_3['series'][0]['data'] = yAxis_5_3a;
	option_5_3['series'][1]['data'] = yAxis_5_3b;
	option_5_3['xAxis']['data'] = xAxis_5_3;
	if (option_5_3 && typeof option_5_3 === 'object') {
		myChart_5_3.setOption(option_5_3);
		console.log(ori_data_5_3)
	}
</script>

<script>
    var ori_data_5_4 = {}
    function callback_5_4(res){
        ori_data_5_4 = res;
		console.log('5_5_4.json读取成功')
		console.log(ori_data_5_4)
    }
</script>
<script src="data/5_5_4.json?callback=callback_5_4"></script>

<!--配置页面 5-4 的Echart图-->
<script>
	var dom_5_4 = document.getElementById("container_2_2");
	var myChart_5_4 = echarts.init(dom_5_4, 'chalk');

	// var data_5_4 = alldata["5-4截至2017年数控机床技术全球专利主要申请人申请专利数"]
    // var xAxis_5_4 = []
	// var yAxis_5_4a = []
	// for(var i = 0; i < data_5_4.length; ++i) {
	// 	xAxis_5_4.push(data_5_4[i][0]) //公司
	// 	yAxis_5_4a.push(data_5_4[i][1]) //专利数
	// }
    
	var xAxis_5_4 = ori_data_5_4['xAxis']['data'] //公司
	var yAxis_5_4a = ori_data_5_4['series'][0]['data'] //专利数

	function view_5_4_change(){
		console.log("5_4 change")
		//console.log(document.getElementById('view_5_4').value)
		document.getElementById('view_5_4').innerHTML = document.getElementById('view_5_4').value
	}

	var option_5_4 = {
		textStyle: {
			fontSize: fontSize_all_title,
		},
		tooltip: {
            trigger: 'axis',
			axisPointer: {
                type: 'shadow'
            }
        },
		toolbox: {
			show: true,
			itemSize: echart_toolbox_size,
			orient: 'vertical',
            left: 'right',
            top: 'center',
            feature: {
                dataView: {
                    show: true, 
                    readOnly: false,
                    optionToContent: function(opt) {
						console.log(opt)
						var axisData = opt['xAxis'][0]['data']
						var series = opt['series']
						console.log("start show")
						console.log(axisData)
						console.log(series)
						var table = '<textarea id="view_5_4" onchange="view_5_4_change()" style="width: 100%; height: 100%; font-family: monospace; font-size: 14px; line-height: 1.6rem; color: rgb(0, 0, 0); border-color: rgb(51, 51, 51); background-color: rgb(255, 255, 255);">公司,专利数\n'
						for (var i = 0, l = axisData.length; i < l; i++) {
							table += axisData[i] + ',' + series[0].data[i] + '\n'
						}
						table += '</textarea>'
						return table;
					},
					contentToOption: function(HTMLDomElement, opt) {
						console.log('start save')
						console.log(opt)
						console.log(HTMLDomElement.firstChild)
						var plain_tex = HTMLDomElement.firstChild.innerHTML
						var arr_tex = plain_tex.split('\n')
						console.log(arr_tex)
						xAxis_5_4 = []
						yAxis_5_4a = []
						for(var i = 1; i < arr_tex.length; i++) {
							cur_pair = arr_tex[i].split(',')
							if(cur_pair.length != 2) {
								//console.alert('wrong data')
								continue
							}
							if(cur_pair[0] == ' ' || cur_pair[0] == undefined) {
								continue
							}
							xAxis_5_4.push(cur_pair[0])
							yAxis_5_4a.push(cur_pair[1])
						}
						console.log(xAxis_5_4)
						console.log(yAxis_5_4a)
						option_5_4['series'][0]['data'] = yAxis_5_4a;
						option_5_4['xAxis']['data'] = xAxis_5_4;
						myChart_5_4.setOption(option_5_4);

						var Link = document.createElement('a')
						Link.download = "5_5_4.json"
						Link.style.display = 'none'
						//字符内容转变成blob地址
						var blob = new Blob(['callback_5_4('+JSON.stringify(option_5_4)+')'])
						Link.href = URL.createObjectURL(blob)
						//触发点击
						document.body.appendChild(Link)
						Link.click()
						//然后移除
						document.body.removeChild(Link)
						return opt
                    },
                },
                magicType: {show: true, type: ['bar', 'line']},
                restore: {show: true},
                saveAsImage: {show: true}
            }
        },
		calculable: true,
		legend: {
			data: ['专利数'],
			textStyle: {
				color: color_legend,
				fontSize: fontSize_all_legend,
			}
		},
		xAxis: {
			type: 'category',
			name: '公司',
			axisLine: {
				lineStyle: {
					color: color_axis
				}
			},
			data: xAxis_5_4,
			axisLabel: {
				fontSize: fontSize_axis_label,
				rotate: 40,
				interval: 0
			}
		},
		yAxis: [
			{
				type: 'value',
				data: yAxis_5_4a,
				axisLine: {
					lineStyle: {
						color: color_axis
					}
				},
				axisLabel: {
					formatter: '{value} 个',
					fontSize: fontSize_axis_label
				}
			},
		],
		grid: {
			bottom: '50%'
		},
		
		series: [
			{
				name: '专利数',
				data: yAxis_5_4a,
			    type: 'bar',
		    },
		]
	};
	option_5_4['series'][0]['data'] = yAxis_5_4a;
	option_5_4['xAxis']['data'] = xAxis_5_4;
	if (option_5_4 && typeof option_5_4 === 'object') {
		myChart_5_4.setOption(option_5_4);
		console.log(ori_data_5_4)
	}
</script>

<script>
    var ori_data_5_5 = {}
    function callback_5_5(res){
        ori_data_5_5 = res;
		console.log('5_5_5.json读取成功')
		console.log(ori_data_5_5)
    }
</script>
<script src="data/5_5_5.json?callback=callback_5_5"></script>

<!--配置页面 5-5 的Echart图-->
<script>
	var dom_5_5 = document.getElementById("container_3_1");
	var myChart_5_5 = echarts.init(dom_5_5, 'chalk');

	// var data_5_5 = alldata["5-52005-2018年中国机床产业销售利润率"]
    // var xAxis_5_5 = []
	// var yAxis_5_5a = []
	// for(var i = 1; i < data_5_5.length; ++i) {
	// 	xAxis_5_5.push(data_5_5[i][0])
	// 	yAxis_5_5a.push(data_5_5[i][1])
	// }

    var xAxis_5_5 = ori_data_5_5['xAxis']['data'] //年份
	var yAxis_5_5a = ori_data_5_5['series'][0]['data'] //销售利润率

	function view_5_5_change(){
		console.log("5_5 change")
		//console.log(document.getElementById('view_5_5').value)
		document.getElementById('view_5_5').innerHTML = document.getElementById('view_5_5').value
	}

	var option_5_5 = {
		textStyle: {
			fontSize: fontSize_all_title,
		},
		tooltip: {
            trigger: 'axis',
			axisPointer: {
                type: 'shadow'
            }
        },
		toolbox: {
			show: true,
			itemSize: echart_toolbox_size,
			orient: 'vertical',
            left: 'right',
            top: 'center',
            feature: {
                dataView: {
                    show: true, 
                    readOnly: false,
                    optionToContent: function(opt) {
						console.log(opt)
						var axisData = opt['xAxis'][0]['data']
						var series = opt['series']
						console.log("start show")
						console.log(axisData)
						console.log(series)
						var table = '<textarea id="view_5_5" onchange="view_5_5_change()" style="width: 100%; height: 100%; font-family: monospace; font-size: 14px; line-height: 1.6rem; color: rgb(0, 0, 0); border-color: rgb(51, 51, 51); background-color: rgb(255, 255, 255);">年份,销售利润率\n'
						for (var i = 0, l = axisData.length; i < l; i++) {
							table += axisData[i] + ',' + series[0].data[i] + '\n'
						}
						table += '</textarea>'
						return table;
					},
					contentToOption: function(HTMLDomElement, opt) {
						console.log('start save')
						console.log(opt)
						console.log(HTMLDomElement.firstChild)
						var plain_tex = HTMLDomElement.firstChild.innerHTML
						var arr_tex = plain_tex.split('\n')
						console.log(arr_tex)
						xAxis_5_5 = []
						yAxis_5_5a = []
						for(var i = 1; i < arr_tex.length; i++) {
							cur_pair = arr_tex[i].split(',')
							if(cur_pair.length != 2) {
								//console.alert('wrong data')
								continue
							}
							if(cur_pair[0] == ' ' || cur_pair[0] == undefined) {
								continue
							}
							xAxis_5_5.push(cur_pair[0])
							yAxis_5_5a.push(cur_pair[1])
						}
						console.log(xAxis_5_5)
						console.log(yAxis_5_5a)
						option_5_5['series'][0]['data'] = yAxis_5_5a;
						option_5_5['xAxis']['data'] = xAxis_5_5;
						myChart_5_5.setOption(option_5_5);

						var Link = document.createElement('a')
						Link.download = "5_5_5.json"
						Link.style.display = 'none'
						//字符内容转变成blob地址
						var blob = new Blob(['callback_5_5('+JSON.stringify(option_5_5)+')'])
						Link.href = URL.createObjectURL(blob)
						//触发点击
						document.body.appendChild(Link)
						Link.click()
						//然后移除
						document.body.removeChild(Link)
						return opt
                    },
                },
                magicType: {show: true, type: ['line', 'bar']},
                restore: {show: true},
                saveAsImage: {show: true}
            }
		},
		calculable: true,
		legend: {
			data: ['销售利润率'],
			textStyle: {
				color: color_legend,
				fontSize: fontSize_all_legend,
			}
		},
		xAxis: {
			type: 'category',
			name: '年份',
			data: xAxis_5_5,
			axisLine: {
                lineStyle: {
                    color: color_axis
                }
			},
			axisLabel: {
                fontSize: fontSize_axis_label
            }
		},
		yAxis: [
			{
                type: 'value',
                name: '利润率',
				axisLine: {
                    lineStyle: {
                        color: color_axis
                    }
			    },
                axisLabel: {
					formatter: '{value} %',
					fontSize: fontSize_axis_label
                }
            }
		],
		series: [
			{
				name: '销售利润率',
				data: yAxis_5_5a,
				type: 'bar',
				// label: {
                //     normal: {
                //         show: true,
                //         position: 'top'
                //     }
			    // },
		    },
		]
	};
	option_5_5['series'][0]['data'] = yAxis_5_5a;
	option_5_5['xAxis']['data'] = xAxis_5_5;
	if (option_5_5 && typeof option_5_5 === 'object') {
		myChart_5_5.setOption(option_5_5);
		console.log(ori_data_5_5)
	}
</script>

<script>
    var ori_data_5_6 = {}
    function callback_5_6(res){
        ori_data_5_6 = res;
		console.log('5_5_6.json读取成功')
		console.log(ori_data_5_6)
    }
</script>
<script src="data/5_5_6.json?callback=callback_5_6"></script>

<!--配置页面 5-6 的Echart图-->
<script>
	var dom_5_6 = document.getElementById("container_3_2");
	var myChart_5_6 = echarts.init(dom_5_6, 'chalk');

    // var data_5_6 = alldata["5-62010-2018年机床产业出口额增长率和全员劳动生产率"]
    // var xAxis_5_6 = []
	// var yAxis_5_6a = []
    // var yAxis_5_6b = []
    // for(var i = 1; i < data_5_6.length; ++i) {
	// 	xAxis_5_6.push(data_5_6[i][0]) //年份
	// 	yAxis_5_6a.push(data_5_6[i][1]) //出口额增长率
    //     yAxis_5_6b.push(data_5_6[i][2]) //全员劳动生产率
	// }

    var xAxis_5_6 = ori_data_5_6['xAxis']['data'] //年份
	var yAxis_5_6a = ori_data_5_6['series'][0]['data'] //出口额增长率
    var yAxis_5_6b = ori_data_5_6['series'][1]['data'] //全员劳动生产率

	function view_5_6_change(){
		console.log("5_6 change")
		//console.log(document.getElementById('view_5_6').value)
		document.getElementById('view_5_6').innerHTML = document.getElementById('view_5_6').value
	}

	var option_5_6 = {
		textStyle: {
			fontSize: fontSize_all_title,
		},
		tooltip: {
            trigger: 'axis',
			axisPointer: {
                type: 'shadow'
            }
        },
		toolbox: {
			show: true,
			itemSize: echart_toolbox_size,
			orient: 'vertical',
            left: 'right',
            top: 'center',
            feature: {
                dataView: {
                    show: true, 
                    readOnly: false,
                    optionToContent: function(opt) {
						console.log(opt)
						var axisData = opt['xAxis'][0]['data']
						var series = opt['series']
						console.log("start show")
						console.log(axisData)
						console.log(series)
						var table = '<textarea id="view_5_6" onchange="view_5_6_change()" style="width: 100%; height: 100%; font-family: monospace; font-size: 14px; line-height: 1.6rem; color: rgb(0, 0, 0); border-color: rgb(51, 51, 51); background-color: rgb(255, 255, 255);">年份,出口额增长率,全员劳动生产率\n'
						for (var i = 0, l = axisData.length; i < l; i++) {
							table += axisData[i] + ',' + series[0].data[i] + ',' + series[1].data[i] + '\n'
						}
						table += '</textarea>'
						return table;
					},
					contentToOption: function(HTMLDomElement, opt) {
						console.log('start save')
						console.log(opt)
						console.log(HTMLDomElement.firstChild)
						var plain_tex = HTMLDomElement.firstChild.innerHTML
						var arr_tex = plain_tex.split('\n')
						console.log(arr_tex)
						xAxis_5_6 = []
						yAxis_5_6a = []
                        yAxis_5_6b = []
						for(var i = 1; i < arr_tex.length; i++) {
							cur_pair = arr_tex[i].split(',')
							if(cur_pair.length != 3) {
								//console.alert('wrong data')
								continue
							}
							if(cur_pair[0] == ' ' || cur_pair[0] == undefined) {
								continue
							}
							xAxis_5_6.push(cur_pair[0])
							yAxis_5_6a.push(cur_pair[1])
                            yAxis_5_6b.push(cur_pair[2])
						}
						console.log(xAxis_5_6)
						console.log(yAxis_5_6a)
                        console.log(yAxis_5_6b)
						option_5_6['series'][0]['data'] = yAxis_5_6a;
                        option_5_6['series'][1]['data'] = yAxis_5_6b;
						option_5_6['xAxis']['data'] = xAxis_5_6;
						myChart_5_6.setOption(option_5_6);

						var Link = document.createElement('a')
						Link.download = "5_5_6.json"
						Link.style.display = 'none'
						//字符内容转变成blob地址
						var blob = new Blob(['callback_5_6('+JSON.stringify(option_5_6)+')'])
						Link.href = URL.createObjectURL(blob)
						//触发点击
						document.body.appendChild(Link)
						Link.click()
						//然后移除
						document.body.removeChild(Link)
						return opt
                    },
                },
                magicType: {show: true, type: ['line', 'bar']},
                restore: {show: true},
                saveAsImage: {show: true}
            }
		},
		calculable: true,
		legend: {
			data: ['出口额增长率', '全员劳动生产率'],
			textStyle: {
				color: color_legend,
				fontSize: fontSize_all_legend,
			}
		},
		xAxis: {
			type: 'category',
			name: '年份',
			data: xAxis_5_6,
			axisLine: {
                lineStyle: {
                    color: color_axis
                }
			},
			axisLabel: {
                fontSize: fontSize_axis_label
            }
		},
		yAxis: [
			{
                type: 'value',
                name: '增长率',
				position: 'left',
				axisLine: {
                    lineStyle: {
                        color: color_axis
                    }
			    },
			    axisLabel: {
				    formatter: '{value} %',
				    fontSize: fontSize_axis_label
			    },
            },
			{
                type: 'value',
                name: '劳动生产率',
				position: 'right',
				axisLine: {
                    lineStyle: {
                        color: color_axis
                    }
			    },
			    axisLabel: {
				    formatter: '{value} 万元/人',
				    fontSize: fontSize_axis_label
			    },
            }
		],
		series: [
		    {
				name: '出口额增长率',
				data: yAxis_5_6a,
			    type: 'line',
				yAxisIndex: 0,
		    },
		    {
				name: '全员劳动生产率',
				data: yAxis_5_6b,
			    type: 'line',
				yAxisIndex: 1,
				// label: {
                //     normal: {
                //         show: true,
                //         position: 'top'
                //     }
			    // },
		    },
		]
	};
	option_5_6['series'][0]['data'] = yAxis_5_6a;
	option_5_6['series'][1]['data'] = yAxis_5_6b;
	option_5_6['xAxis']['data'] = xAxis_5_6;
	if (option_5_6 && typeof option_5_6 === 'object') {
		myChart_5_6.setOption(option_5_6);
		console.log(ori_data_5_6)
	}
</script>

<!-- <script>
	$('<i id="back-to-top" onclick="history.back()"></i>').appendTo($('body'));
	// $('<i id="back-to-top" onclick="location=\'./index_3.html\'"></i>').appendTo($('body'));
	$('#back-to-top').fadeIn();	
</script> -->

<script type="text/javascript" src="js/left_top_but.js"></script>